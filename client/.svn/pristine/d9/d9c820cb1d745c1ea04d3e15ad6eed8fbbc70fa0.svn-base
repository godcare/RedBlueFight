{"version":3,"sources":["Game16Control.js"],"names":["SoundManager","require","cc","Class","extends","Component","properties","SoundMGR","default","type","GameResultNode","Node","CountDownNode","PauseNode","GameStatus","CountDownLabel","Label","ClockObj","RedBalls","BlueBalls","redSprites","SpriteFrame","blueSprites","redBallSprites","blueBallSprites","randomListRed","randomListBlue","playStatus","countDownSeconds","tmpTimer","redFlag","blueFlag","start","startAnimation","scheduleOnce","active","generateList","showList","onClickBall","event","customEventData","indexOf","clickIndex","substr","find","getComponent","Sprite","spriteFrame","HideBalls","colorIndex","i","ra","rotateBy","ma","moveTo","x","sa","scaleTo","runAction","opacity","Button","enabled","aa","fadeTo","tmpListr","tr","Math","floor","random","length","ti","push","toString","splice","tmpListb"],"mappings":"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","file":"Game16Control.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Game16","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\nvar SoundManager = require(\"SoundManager\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        SoundMGR:\r\n        {\r\n            default: null,\r\n            type: SoundManager,\r\n        },\r\n        GameResultNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        CountDownNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        PauseNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        GameStatus: 0,//0未开始，1开始了，2结束了\r\n        CountDownLabel:\r\n        {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        ClockObj:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        RedBalls:\r\n        {\r\n            default: [],\r\n            type: [cc.Node],\r\n        },\r\n        BlueBalls:\r\n        {\r\n            default: [],\r\n            type: [cc.Node],\r\n        },\r\n        redSprites:\r\n        {\r\n            default: [],\r\n            type: [cc.SpriteFrame],\r\n        },\r\n        blueSprites:\r\n        {\r\n            default: [],\r\n            type: [cc.SpriteFrame],\r\n        },\r\n        redBallSprites:\r\n        {\r\n            default: [],\r\n            type: [cc.SpriteFrame],\r\n        },\r\n        blueBallSprites:\r\n        {\r\n            default: [],\r\n            type: [cc.SpriteFrame],\r\n        },\r\n        randomListRed: [],\r\n        randomListBlue: [],\r\n        playStatus: -1,//正在打的状态，0为红，1为蓝，2为旋转中,-1为刚开局的待定\r\n        countDownSeconds: 10,//倒计时\r\n        tmpTimer: 0,\r\n        redFlag: 0,\r\n        blueFlag: 0,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start() {\r\n        this.startAnimation();\r\n        // cc.log(this.Coin.scaleX);\r\n    },\r\n    startAnimation() {\r\n\r\n        this.scheduleOnce(function () {\r\n            this.CountDownNode.active = true;\r\n        }, 0.5)\r\n        this.scheduleOnce(function () {\r\n            this.GameStatus = 1;\r\n            this.PauseNode.active = true;\r\n            this.generateList(0);\r\n            this.generateList(1);\r\n            this.showList(0);\r\n            this.showList(1);\r\n        }, 4.5);\r\n\r\n    },\r\n\r\n    onClickBall(event, customEventData) {\r\n        if (customEventData.indexOf(\"r\") != -1) {//red click\r\n            var clickIndex = customEventData.substr(1, 1);\r\n            if (this.playStatus == -1 || this.playStatus == 0) {\r\n                if (this.redFlag == this.randomListRed[clickIndex - 1] - 1) {\r\n                    this.redFlag += 1;\r\n                    cc.find(\"Canvas/GameCore/\" + customEventData + \"/ball\", this.Node).getComponent(cc.Sprite).spriteFrame = this.redBallSprites[1];\r\n                    if (this.redFlag >= 4) {\r\n                        this.HideBalls(0);\r\n                        this.redFlag = 0;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else if (customEventData.indexOf(\"b\") != -1) {//blue click\r\n            var clickIndex = customEventData.substr(1, 1);\r\n            if (this.playStatus == -1 || this.playStatus == 1) {\r\n                if (this.blueFlag == this.randomListBlue[clickIndex - 1] - 1) {\r\n                    this.blueFlag += 1;\r\n                    cc.find(\"Canvas/GameCore/\" + customEventData + \"/ball\", this.Node).getComponent(cc.Sprite).spriteFrame = this.blueBallSprites[1];\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    HideBalls(colorIndex) {\r\n        if (colorIndex == 0)//red\r\n        {\r\n            for (var i = 0; i < 4; i++) {\r\n                var ra = cc.rotateBy(0.5, 720);\r\n                var ma = cc.moveTo(0.5, this.RedBalls[i].x, 350);\r\n                var sa = cc.scaleTo(0.5, 0, 0);\r\n                this.RedBalls[i].runAction(ra);\r\n                this.RedBalls[i].runAction(sa);\r\n                this.RedBalls[i].runAction(ma);\r\n            }\r\n        }\r\n        else {\r\n\r\n        }\r\n    },\r\n\r\n    showList(colorIndex) {\r\n        if (colorIndex == 0)//red\r\n        {\r\n            // cc.log(this.randomListRed);\r\n            for (var i = 0; i < 4; i++) {\r\n                cc.find(\"index\", this.RedBalls[i]).getComponent(cc.Sprite).spriteFrame = this.redSprites[this.randomListRed[i] - 1];\r\n                cc.find(\"index\", this.RedBalls[i]).opacity = 0;\r\n                cc.find(\"index\", this.RedBalls[i]).active = true;\r\n                this.RedBalls[i].getComponent(cc.Button).enabled = true;\r\n                cc.find(\"ball\", this.RedBalls[i]).getComponent(cc.Sprite).spriteFrame = this.redBallSprites[0];\r\n                var aa = cc.fadeTo(0.3, 255);\r\n                cc.find(\"index\", this.RedBalls[i]).runAction(aa);\r\n            }\r\n        }\r\n        else {\r\n            for (var i = 0; i < 4; i++) {\r\n                cc.find(\"index\", this.BlueBalls[i]).getComponent(cc.Sprite).spriteFrame = this.blueSprites[this.randomListBlue[i] - 1];\r\n                cc.find(\"index\", this.BlueBalls[i]).opacity = 0;\r\n                cc.find(\"index\", this.BlueBalls[i]).active = true;\r\n                this.BlueBalls[i].getComponent(cc.Button).enabled = true;\r\n                cc.find(\"ball\", this.BlueBalls[i]).getComponent(cc.Sprite).spriteFrame = this.blueBallSprites[0];\r\n                var aa = cc.fadeTo(0.3, 255);\r\n                cc.find(\"index\", this.BlueBalls[i]).runAction(aa);\r\n            }\r\n        }\r\n    },\r\n\r\n    generateList(colorIndex) {\r\n\r\n        if (colorIndex == 0)//red\r\n        {\r\n            var tmpListr = [1, 2, 3, 4];\r\n            this.randomListRed = [];\r\n            for (var i = 0; i < 4; i++) {\r\n                var tr = Math.floor(Math.random() * tmpListr.length);\r\n                var ti = tmpListr[tr];\r\n                this.randomListRed.push(ti.toString());\r\n                tmpListr.splice(tr, 1);\r\n            }\r\n        }\r\n        else {\r\n            var tmpListb = [1, 2, 3, 4];\r\n            this.randomListBlue = [];\r\n            for (var i = 0; i < 4; i++) {\r\n                var tr = Math.floor(Math.random() * tmpListb.length);\r\n                var ti = tmpListb[tr];\r\n                this.randomListBlue.push(ti.toString());\r\n                tmpListb.splice(tr, 1);\r\n            }\r\n        }\r\n    },\r\n\r\n\r\n    // update (dt) {},\r\n});\r\n"]}