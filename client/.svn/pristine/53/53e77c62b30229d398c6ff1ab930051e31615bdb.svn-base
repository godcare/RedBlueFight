{"version":3,"sources":["Game0Control.js"],"names":["GameResultControl","require","SoundManager","cc","Class","extends","Component","properties","SoundMGR","default","type","RedPlayer","Node","BluePlayer","RedSprites","SpriteFrame","BlueSprite","TargetY","TargetScale","ForceDown","MaxForce","GameStatus","OverY","GameResultNode","CountDownNode","PauseNode","redGraphics","Graphics","blueGraphics","onLoad","director","getPhysicsManager","enabled","update","position","y","log","getComponent","RigidBody","linearVelocity","Vec2","Button","find","Sprite","spriteFrame","playOver","scheduleOnce","Global","GameData","CurrentWinner","active","onClickBall","event","customEventData","playPush","start","startAnimation","redScaleAction","scaleTo","blueScaleAction","runAction","blueMoveAction","moveTo","redMoveAction","circle","width","fillColor","Color","fill"],"mappings":"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","file":"Game0Control.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Game0","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\nvar GameResultControl = require(\"GameResultControl\");\r\nvar SoundManager = require(\"SoundManager\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        SoundMGR:\r\n        {\r\n            default: null,\r\n            type: SoundManager,\r\n        },\r\n        RedPlayer:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        BluePlayer:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        RedSprites:\r\n        {\r\n            default: [],\r\n            type: [cc.SpriteFrame],\r\n        },\r\n        BlueSprite:\r\n        {\r\n            default: [],\r\n            type: [cc.SpriteFrame],\r\n        },\r\n        TargetY: 360,\r\n        TargetScale: 1.5,\r\n        ForceDown: 2,//力度衰减\r\n        MaxForce: 10,\r\n        GameStatus: 0,//0未开始，1开始了，2结束了\r\n        OverY: 0,//结束判定\r\n        GameResultNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        CountDownNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        PauseNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        redGraphics:\r\n        {\r\n            default: null,\r\n            type: cc.Graphics,\r\n        },\r\n        blueGraphics:\r\n        {\r\n            default: null,\r\n            type: cc.Graphics,\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    onLoad() {\r\n        cc.director.getPhysicsManager().enabled = true;\r\n    },\r\n    // onLoad () {},\r\n    update() {\r\n        if (this.GameStatus == 1) {\r\n            if (this.BluePlayer.position.y <= this.OverY) {\r\n                cc.log(\"Blue Win\");\r\n                this.GameStatus = 2;\r\n                this.RedPlayer.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(0, -this.MaxForce * 3);\r\n                this.RedPlayer.getComponent(cc.Button).enabled = false;\r\n                this.BluePlayer.getComponent(cc.Button).enabled = false;\r\n\r\n                cc.find(\"Player\", this.RedPlayer).getComponent(cc.Sprite).spriteFrame = this.RedSprites[0];\r\n                cc.find(\"Player\", this.BluePlayer).getComponent(cc.Sprite).spriteFrame = this.BlueSprite[1];\r\n                this.SoundMGR.playOver();\r\n                this.scheduleOnce(function () {\r\n\r\n                    Global.GameData.CurrentWinner = 1;\r\n                    this.GameResultNode.active = true;\r\n\r\n                }, 1.5);\r\n\r\n            }\r\n            else if (this.RedPlayer.position.y >= -this.OverY) {\r\n                cc.log(\"Red Win\");\r\n                this.GameStatus = 2;\r\n                this.SoundMGR.playOver();\r\n                this.BluePlayer.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(0, this.MaxForce * 3);\r\n                this.RedPlayer.getComponent(cc.Button).enabled = false;\r\n                this.BluePlayer.getComponent(cc.Button).enabled = false;\r\n\r\n                cc.find(\"Player\", this.RedPlayer).getComponent(cc.Sprite).spriteFrame = this.RedSprites[1];\r\n                cc.find(\"Player\", this.BluePlayer).getComponent(cc.Sprite).spriteFrame = this.BlueSprite[0];\r\n                this.scheduleOnce(function () {\r\n                    Global.GameData.CurrentWinner = 0;\r\n                    this.GameResultNode.active = true;\r\n\r\n                }, 1.5);\r\n            }\r\n        }\r\n        else {\r\n\r\n        }\r\n    },\r\n    onClickBall(event, customEventData) {\r\n        if (this.GameStatus == 1) {\r\n            this.SoundMGR.playPush();\r\n            if (customEventData == 0)//红色点击\r\n            {\r\n                cc.log(\"Red Click\");\r\n                this.RedPlayer.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(0, this.MaxForce);\r\n            }\r\n            else if (customEventData == 1) {//蓝色点击\r\n                cc.log(\"Blue Click\");\r\n                this.BluePlayer.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(0, -this.MaxForce);\r\n            }\r\n        }\r\n    },\r\n\r\n    start() {\r\n        cc.log(\"Start\");\r\n        this.GameStatus = 0;\r\n        this.startAnimation();\r\n\r\n\r\n    },\r\n\r\n    startAnimation: function () {\r\n        this.RedPlayer.getComponent(cc.Button).enabled = false;\r\n        this.BluePlayer.getComponent(cc.Button).enabled = false;\r\n        var redScaleAction = cc.scaleTo(0.5, this.TargetScale, this.TargetScale);\r\n        var blueScaleAction = cc.scaleTo(0.5, this.TargetScale, this.TargetScale);\r\n        this.RedPlayer.runAction(redScaleAction);\r\n        this.BluePlayer.runAction(blueScaleAction);\r\n\r\n        this.scheduleOnce(function () {\r\n            var blueMoveAction = cc.moveTo(0.5, 0, this.TargetY);\r\n            this.BluePlayer.runAction(blueMoveAction);\r\n            var redMoveAction = cc.moveTo(0.5, 0, -this.TargetY);\r\n            this.RedPlayer.runAction(redMoveAction);\r\n\r\n        }, 0.8);\r\n\r\n        this.scheduleOnce(function () {\r\n            this.redGraphics.circle(0, 0, this.RedPlayer.width / 2 + 0.5);\r\n            this.redGraphics.fillColor = new cc.Color(234, 53, 74, 255);\r\n            // this.redGraphics.stroke();\r\n            this.redGraphics.fill();\r\n            this.blueGraphics.circle(0, 0, this.BluePlayer.width / 2 + 0.5);\r\n            this.blueGraphics.fillColor = new cc.Color(42, 143, 228, 255);\r\n            // this.redGraphics.stroke();\r\n            this.blueGraphics.fill();\r\n        }, 0.85);\r\n        this.scheduleOnce(function () {\r\n            this.CountDownNode.active = true;\r\n        }, 1.3)\r\n        this.scheduleOnce(function () {\r\n            this.RedPlayer.getComponent(cc.Button).enabled = true;\r\n            this.BluePlayer.getComponent(cc.Button).enabled = true;\r\n            this.GameStatus = 1;\r\n            this.PauseNode.active = true;\r\n        }, 4.3);\r\n    }\r\n\r\n    // update (dt) {},\r\n});\r\n"]}