{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Game8/assets\\Scripts\\Control\\Games\\Game8\\Game8Control.js"],"names":["MoveRepeatBySpeed","require","SoundManager","cc","Class","extends","Component","properties","SoundMGR","default","type","GameResultNode","Node","CountDownNode","PauseNode","Bottle","RedBlock","BlueBlock","UnTouchList","bmoveDelta","Vec2","rmoveDelta","RedEnter","BlueEnter","redBalls","blueBalls","rsPoints","bsPoints","redCheckList","blueCheckList","redInList","blueInList","redIndex","blueIndex","redScore","blueScore","onLoad","director","getPhysicsManager","enabled","onTouchStart","playVoice","start","startAnimation","scheduleOnce","active","GameStatus","i","length","spawBall","getComponent","startMove","balltype","getChildren","newObj","instantiate","Math","floor","random","name","toString","setPosition","parent","playBlob","onCheckBall","childBall","parentBall","onBallHit","selfName","otherName","selfParent","log","indexOf","push","find"],"mappings":"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","file":"Game8Control.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Game8","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\nvar MoveRepeatBySpeed = require(\"MoveRepeatBySpeed\");\r\nvar SoundManager = require(\"SoundManager\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        SoundMGR:\r\n        {\r\n            default: null,\r\n            type: SoundManager,\r\n        },\r\n        GameResultNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        CountDownNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        PauseNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        Bottle:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        RedBlock:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        BlueBlock:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        UnTouchList:\r\n        {\r\n            default: [],\r\n        },\r\n        bmoveDelta:\r\n        {\r\n            default: new cc.Vec2(),\r\n        },\r\n        rmoveDelta:\r\n        {\r\n            default: new cc.Vec2(),\r\n        },\r\n        RedEnter:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        BlueEnter:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        redBalls:\r\n        {\r\n            default: [],\r\n            type: [cc.Node],\r\n        },\r\n        blueBalls:\r\n        {\r\n            default: [],\r\n            type: [cc.Node],\r\n        },\r\n        rsPoints://red spawn points\r\n        {\r\n            default: [],\r\n            type: [cc.Node],\r\n        },\r\n        bsPoints://blue spawn points\r\n        {\r\n            default: [],\r\n            type: [cc.Node],\r\n        },\r\n        redCheckList: [],//red moved balls\r\n        blueCheckList: [],//blue moved balls\r\n        redInList: [],//red in bottle\r\n        blueInList: [],//blue in bottle\r\n        redIndex: 0,\r\n        blueIndex: 0,\r\n        redScore: 0,\r\n        blueScore: 0,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        cc.director.getPhysicsManager().enabled = true;\r\n    },\r\n\r\n    onTouchStart() {\r\n        this.SoundMGR.playVoice();\r\n\r\n    },\r\n\r\n    start() {\r\n        this.startAnimation();\r\n        // cc.log(\"Untouch List:\" + this.UnTouchList);\r\n        // for (var i = 0; i < this.redBalls.length; i++) {\r\n        //     this.UnTouchList.push(this.redBalls[i].name);\r\n        // }\r\n        // for (var i = 0; i < this.blueBalls.length; i++) {\r\n        //     this.UnTouchList.push(this.blueBalls[i].name);\r\n        // }\r\n\r\n    },\r\n\r\n    startAnimation() {\r\n        this.scheduleOnce(function () {\r\n            this.CountDownNode.active = true;\r\n        }, 0.5)\r\n        this.scheduleOnce(function () {\r\n            this.GameStatus = 1;\r\n            this.PauseNode.active = true;\r\n            for (var i = 0; i < this.rsPoints.length; i++) {\r\n                this.spawBall(0);\r\n            }\r\n            for (var i = 0; i < this.bsPoints.length; i++) {\r\n                this.spawBall(1);\r\n            }\r\n            this.Bottle.getComponent(MoveRepeatBySpeed).startMove();\r\n            this.RedBlock.getComponent(MoveRepeatBySpeed).startMove();\r\n            this.BlueBlock.getComponent(MoveRepeatBySpeed).startMove();\r\n            this.RedEnter.getComponent(MoveRepeatBySpeed).startMove();\r\n            this.BlueEnter.getComponent(MoveRepeatBySpeed).startMove();\r\n        }, 4.5);\r\n\r\n    },\r\n    // update (dt) {},\r\n    spawBall(balltype) {\r\n        if (balltype == 0)//spawn red ball\r\n        {\r\n            for (var i = 0; i < this.rsPoints.length; i++) {\r\n                if (this.rsPoints[i].getChildren().length == 0) {\r\n                    this.redIndex += 1;\r\n                    var newObj = cc.instantiate(this.redBalls[Math.floor(Math.random() * 3)]);\r\n                    newObj.name = \"rn\" + this.redIndex.toString();\r\n                    newObj.setPosition(0, 0);\r\n                    newObj.parent = this.rsPoints[i];\r\n                    newObj.active = true;\r\n                    this.SoundMGR.playBlob();\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            for (var i = 0; i < this.rsPoints.length; i++) {\r\n                if (this.bsPoints[i].getChildren().length == 0) {\r\n                    this.blueIndex += 1;\r\n                    var newObj = cc.instantiate(this.blueBalls[Math.floor(Math.random() * 3)]);\r\n                    newObj.name = \"bn\" + this.blueIndex.toString();\r\n                    newObj.setPosition(0, 0);\r\n                    newObj.parent = this.bsPoints[i];\r\n                    newObj.active = true;\r\n                    this.SoundMGR.playBlob();\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    onCheckBall(childBall, parentBall) {\r\n        // cc.log(childBall + \" \" + parentBall);\r\n        this.scheduleOnce(function () {\r\n            this.CountDownNode.active = true;\r\n        }, 0.5)\r\n    },\r\n    onBallHit(selfName, otherName, selfParent) {\r\n        cc.log(\"selft:\" + selfName + \" other:\" + otherName + \" selfParent:\" + selfParent);\r\n        if (otherName == \"RedEnter\" && selfName.indexOf(\"rn\") > -1) {\r\n            if (this.redInList.indexOf(selfName) == -1) {\r\n                this.redInList.push(selfName);\r\n                this.redScore += 1;\r\n                cc.find(\"Canvas/GameCore/\" + selfParent + \"/\" + selfName).parent = cc.find(\"Canvas/GameCore\");\r\n            }\r\n        }\r\n        else if (otherName == \"BlueEnter\" && selfName.indexOf(\"bn\") > -1) {\r\n\r\n        }\r\n    },\r\n});\r\n"]}