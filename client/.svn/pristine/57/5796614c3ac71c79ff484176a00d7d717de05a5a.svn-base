{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Game0/assets\\Scripts\\Control\\Games\\Game0\\Game0Control.js"],"names":["GameResultControl","require","cc","Class","extends","Component","properties","RedPlayer","default","type","Node","BluePlayer","RedSprites","SpriteFrame","BlueSprite","TargetY","TargetScale","ForceDown","MaxForce","GameStatus","OverY","GameResultNode","CountDownNode","PauseNode","onLoad","director","getPhysicsManager","enabled","update","position","y","log","getComponent","RigidBody","linearVelocity","Vec2","scheduleOnce","Global","GameData","CurrentWinner","active","onClickBall","event","customEventData","start","startAnimation","Button","redScaleAction","scaleTo","blueScaleAction","runAction","blueMoveAction","moveTo","redMoveAction"],"mappings":"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","file":"Game0Control.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Game0","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\nvar GameResultControl = require(\"GameResultControl\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        RedPlayer:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        BluePlayer:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        RedSprites:\r\n        {\r\n            default: [],\r\n            type: [cc.SpriteFrame],\r\n        },\r\n        BlueSprite:\r\n        {\r\n            default: [],\r\n            type: [cc.SpriteFrame],\r\n        },\r\n        TargetY: 360,\r\n        TargetScale: 1.5,\r\n        ForceDown: 2,//力度衰减\r\n        MaxForce: 10,\r\n        GameStatus: 0,//0未开始，1开始了，2结束了\r\n        OverY: 0,//结束判定\r\n        GameResultNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        CountDownNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        PauseNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    onLoad() {\r\n        cc.director.getPhysicsManager().enabled = true;\r\n    },\r\n    // onLoad () {},\r\n    update() {\r\n        if (this.GameStatus == 1) {\r\n            if (this.BluePlayer.position.y <= this.OverY) {\r\n                cc.log(\"Blue Win\");\r\n                this.GameStatus = 2;\r\n                this.RedPlayer.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(0, -this.MaxForce * 3);\r\n                this.scheduleOnce(function () {\r\n\r\n                    Global.GameData.CurrentWinner = 1;\r\n                    this.GameResultNode.active = true;\r\n                }, 1.5);\r\n\r\n            }\r\n            else if (this.RedPlayer.position.y >= this.OverY) {\r\n                cc.log(\"Red Win\");\r\n                this.GameStatus = 2;\r\n                this.BluePlayer.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(0, this.MaxForce * 3);\r\n                this.scheduleOnce(function () {\r\n                    Global.GameData.CurrentWinner = 0;\r\n                    this.GameResultNode.active = true;\r\n                }, 1.5);\r\n            }\r\n        }\r\n        else {\r\n\r\n        }\r\n    },\r\n    onClickBall(event, customEventData) {\r\n        if (this.GameStatus == 1) {\r\n            if (customEventData == 0)//红色点击\r\n            {\r\n                cc.log(\"Red Click\");\r\n                this.RedPlayer.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(0, this.MaxForce);\r\n            }\r\n            else if (customEventData == 1) {//蓝色点击\r\n                cc.log(\"Blue Click\");\r\n                this.BluePlayer.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(0, -this.MaxForce);\r\n            }\r\n        }\r\n    },\r\n\r\n    start() {\r\n        cc.log(\"Start\");\r\n        this.GameStatus = 0;\r\n        this.startAnimation();\r\n\r\n\r\n    },\r\n\r\n    startAnimation: function () {\r\n        this.RedPlayer.getComponent(cc.Button).enabled = false;\r\n        this.BluePlayer.getComponent(cc.Button).enabled = false;\r\n        var redScaleAction = cc.scaleTo(0.5, this.TargetScale, this.TargetScale);\r\n        var blueScaleAction = cc.scaleTo(0.5, this.TargetScale, this.TargetScale);\r\n        this.RedPlayer.runAction(redScaleAction);\r\n        this.BluePlayer.runAction(blueScaleAction);\r\n\r\n        this.scheduleOnce(function () {\r\n            var blueMoveAction = cc.moveTo(0.5, 0, this.TargetY);\r\n            this.BluePlayer.runAction(blueMoveAction);\r\n            var redMoveAction = cc.moveTo(0.5, 0, -this.TargetY);\r\n            this.RedPlayer.runAction(redMoveAction);\r\n\r\n        }, 0.8);\r\n        this.scheduleOnce(function () {\r\n            this.CountDownNode.active = true;\r\n        }, 1.3)\r\n        this.scheduleOnce(function () {\r\n            this.RedPlayer.getComponent(cc.Button).enabled = true;\r\n            this.BluePlayer.getComponent(cc.Button).enabled = true;\r\n            this.GameStatus = 1;\r\n            this.PauseNode.active = true;\r\n        }, 4.3);\r\n    }\r\n\r\n    // update (dt) {},\r\n});\r\n"]}