{"version":3,"sources":["MoveRepeatBySpeed.js"],"names":["cc","Class","extends","Component","properties","xFrom","xTo","yFrom","yTo","speed","dFlag","shoudMove","xyRate","xSpeed","ySpeed","dtIndex","start","update","dt","tmpx","node","x","tmpy","y","startMove","Math","sqrt","stopMove"],"mappings":"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","file":"MoveRepeatBySpeed.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Common","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        xFrom: 0,\r\n        xTo: 0,\r\n        yFrom: 0,\r\n        yTo: 0,\r\n        speed: 1,\r\n        dFlag: 1,\r\n        shoudMove: false,\r\n        xyRate: 1,\r\n        xSpeed: 0,\r\n        ySpeed: 0,\r\n        dtIndex: 1000,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}, \r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    update(dt) {\r\n        if (this.shoudMove) {\r\n            //from x > to x\r\n            if (this.xFrom < this.xTo) {\r\n                var tmpx = this.node.x + this.xSpeed * dt * this.dtIndex * this.dFlag;\r\n                if (tmpx <= this.xFrom) {\r\n                    this.dFlag *= -1;\r\n                    tmpx = this.xFrom;\r\n                }\r\n                else if (tmpx >= this.xTo) {\r\n                    this.dFlag *= -1;\r\n                    tmpx = this.xTo;\r\n                }\r\n                this.node.x = tmpx;\r\n\r\n                // if (tmpx < this.xFrom || this.tmpx > this.xTo) {\r\n                //     if (this.node.x >= this.xFrom && this.node.x <= this.xTo) {\r\n                //         this.node.x = tmpx;\r\n                //         this.dFlag *= -1;\r\n                //     }\r\n                // }\r\n                // else {\r\n                //     this.node.x = tmpx;\r\n                // }\r\n                // if (this.node.x <= this.xFrom || this.node.x >= this.xTo) {\r\n                //     this.dFlag *= -1;\r\n                // }\r\n            }\r\n            else if (this.xFrom > this.xTo) {\r\n                var tmpx = this.node.x - this.xSpeed * dt * this.dtIndex * this.dFlag;\r\n                if (tmpx >= this.xFrom) {\r\n                    this.dFlag *= -1;\r\n                    tmpx = this.xFrom;\r\n                }\r\n                else if (tmpx <= this.xTo) {\r\n                    this.dFlag *= -1;\r\n                    tmpx = this.xTo;\r\n                }\r\n                this.node.x = tmpx;\r\n            }\r\n\r\n            if (this.yFrom < this.yTo) {\r\n                var tmpy = this.node.y + this.ySpeed * dt * this.dtIndex * this.dFlag;\r\n                if (tmpy <= this.yFrom) {\r\n                    this.dFlag *= -1;\r\n                    tmpy = this.yFrom;\r\n                }\r\n                else if (tmpy >= this.yTo) {\r\n                    this.dFlag *= -1;\r\n                    tmpy = this.yTo;\r\n                }\r\n                this.node.y = tmpy;\r\n            }\r\n            else if (this.yFrom > this.yTo) {\r\n                var tmpy = this.node.y - this.ySpeed * dt * this.dtIndex * this.dFlag;\r\n                if (tmpy >= this.yFrom) {\r\n                    this.dFlag *= -1;\r\n                    tmpy = this.yFrom;\r\n                }\r\n                else if (tmpy <= this.yTo) {\r\n                    this.dFlag *= -1;\r\n                    tmpy = this.yTo;\r\n                }\r\n                this.node.y = tmpy;\r\n            }\r\n        }\r\n    },\r\n\r\n    startMove() {\r\n        this.shoudMove = true;\r\n        this.xyRate = (this.yTo - this.yFrom) / (this.xTo - this.xFrom);\r\n        this.xSpeed = Math.sqrt(this.speed * this.speed / (1 + this.xyRate) * (1 + this.xyRate));\r\n        this.ySpeed = this.xSpeed * this.xyRate;\r\n    },\r\n\r\n    stopMove() {\r\n        this.shoudMove = false;\r\n    }\r\n});\r\n"]}