{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Game3/assets\\Scripts\\Control\\Games\\Game3\\Game3Control.js"],"names":["SoundManager","require","cc","Class","extends","Component","properties","SoundMGR","default","type","GameResultNode","Node","CountDownNode","PauseNode","RedPlayer","BluePlayer","RedFake","BlueFake","GameStatus","RoundInterval","safeOffsetY","rPos","bPos","bluePipeParent","redPipeParent","outY","safeY","deadY","notSafePipeY","safeX1","safeX2","pipePushY","pipeResetY","roundCount","redRightBtn","redLeftBtn","BlueLeftBtn","BlueRightBtn","isRedDead","isBlueDead","isFirstRound","start","startAnimation","x1","Math","floor","random","x2","i","find","toString","y","scheduleOnce","active","PrepareNextGame","rma","moveTo","Vec2","runAction","bma","rppa","x","bppa","ShowBalls","getComponent","Button","enabled","pushStart","shakePipes","playShake","isAlive","height","playFart","playPush2","isDraw","playOver","Global","GameData","CurrentWinner","shakeCount","shakeMaxOffset","shakeInterval","isReverse","iflag","orY","obY","j","log","setBallPos","opacity","rboa","fadeTo","rfoa","bboa","bfoa","ballType","ballPos","event","customEventData"],"mappings":"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","file":"Game3Control.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Game3","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\nvar SoundManager = require(\"SoundManager\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        SoundMGR:\r\n        {\r\n            default: null,\r\n            type: SoundManager,\r\n        },\r\n        GameResultNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        CountDownNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        PauseNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        RedPlayer:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        BluePlayer:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        RedFake:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        BlueFake:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        GameStatus: 0,//0未开始，1开始了，2结束了\r\n        RoundInterval: 2,\r\n        safeOffsetY: 35,\r\n        rPos: 3,\r\n        bPos: 6,\r\n        bluePipeParent:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        redPipeParent:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        outY: 295,\r\n        safeY: 265,\r\n        deadY: 265,\r\n        notSafePipeY: -35,\r\n        safeX1: -1,\r\n        safeX2: -1,\r\n        pipePushY: 155,\r\n        pipeResetY: 50,\r\n        roundCount: 0,\r\n        redRightBtn:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        redLeftBtn:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        BlueLeftBtn:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        BlueRightBtn:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        isRedDead: false,\r\n        isBlueDead: false,\r\n        isFirstRound: true,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    start() {\r\n        this.startAnimation();\r\n    },\r\n\r\n    startAnimation() {\r\n        var x1 = Math.floor(Math.random() * 10);\r\n        while (x1 == this.rPos || x1 == this.bPos) {\r\n            x1 = Math.floor(Math.random() * 10);\r\n        }\r\n        var x2 = Math.floor(Math.random() * 10);\r\n        while (x2 == this.rPos || x2 == this.bPos || x2 == x1) {\r\n            x2 = Math.floor(Math.random() * 10);\r\n        }\r\n        this.safeX1 = x1;\r\n        this.safeX2 = x2;\r\n        for (var i = 0; i < 10; i++) {\r\n            if (i == x1 || i == x2) {\r\n                cc.find(i.toString(), this.redPipeParent).y = this.notSafePipeY;\r\n                cc.find(i.toString(), this.bluePipeParent).y = this.notSafePipeY;\r\n            }\r\n        }\r\n        this.isFirstRound = true;\r\n        this.scheduleOnce(function () {\r\n            this.CountDownNode.active = true;\r\n        }, 0.5)\r\n        this.scheduleOnce(function () {\r\n\r\n            this.GameStatus = 1;\r\n            this.PauseNode.active = true;\r\n            this.PrepareNextGame();\r\n        }, 4.5);\r\n\r\n    },\r\n\r\n    PrepareNextGame() {\r\n        if (!this.isFirstRound) {\r\n            this.RedPlayer.active = false;\r\n            this.BluePlayer.active = false;\r\n            var x1 = Math.floor(Math.random() * 10);\r\n            while (x1 == this.rPos || x1 == this.bPos) {\r\n                x1 = Math.floor(Math.random() * 10);\r\n            }\r\n            var x2 = Math.floor(Math.random() * 10);\r\n            while (x2 == this.rPos || x2 == this.bPos || x2 == x1) {\r\n                x2 = Math.floor(Math.random() * 10);\r\n            }\r\n            this.safeX1 = x1;\r\n            this.safeX2 = x2;\r\n            var rma = cc.moveTo(0.3, new cc.Vec2(0, this.pipeResetY));\r\n            this.redPipeParent.runAction(rma);\r\n            var bma = cc.moveTo(0.3, new cc.Vec2(0, this.pipeResetY));\r\n            this.bluePipeParent.runAction(bma);\r\n            for (var i = 0; i < 10; i++) {\r\n                if (i == x1 || i == x2) {\r\n                    var rppa = cc.moveTo(0.3, new cc.Vec2(cc.find(i.toString(), this.redPipeParent).x, this.notSafePipeY));\r\n                    var bppa = cc.moveTo(0.3, new cc.Vec2(cc.find(i.toString(), this.bluePipeParent).x, this.notSafePipeY));\r\n                    cc.find(i.toString(), this.redPipeParent).runAction(rppa);\r\n                    cc.find(i.toString(), this.bluePipeParent).runAction(bppa);\r\n                }\r\n                else {\r\n                    var rppa = cc.moveTo(0.3, new cc.Vec2(cc.find(i.toString(), this.redPipeParent).x, 0));\r\n                    var bppa = cc.moveTo(0.3, new cc.Vec2(cc.find(i.toString(), this.bluePipeParent).x, 0));\r\n                    cc.find(i.toString(), this.redPipeParent).runAction(rppa);\r\n                    cc.find(i.toString(), this.bluePipeParent).runAction(bppa);\r\n                    // cc.find(i.toString(), this.redPipeParent).y = 0;\r\n                    // cc.find(i.toString(), this.bluePipeParent).y = 0;\r\n                }\r\n            }\r\n        }\r\n        this.isFirstRound = false;\r\n        this.scheduleOnce(function () {\r\n            this.ShowBalls();\r\n            this.BlueRightBtn.getComponent(cc.Button).enabled = true;\r\n            this.BlueLeftBtn.getComponent(cc.Button).enabled = true;\r\n            this.redRightBtn.getComponent(cc.Button).enabled = true;\r\n            this.redLeftBtn.getComponent(cc.Button).enabled = true;\r\n        }, 0.8);\r\n        this.scheduleOnce(function () {\r\n            this.pushStart()\r\n        }, this.RoundInterval + 0.8);\r\n    },\r\n\r\n    pushStart() {\r\n        this.roundCount += 1;\r\n        this.RoundInterval -= this.roundCount * 0.15;\r\n        if (this.RoundInterval <= 0.7) {\r\n            this.RoundInterval = 0.7;\r\n        }\r\n        this.shakePipes(20, 5, 0.05, 1);\r\n        this.SoundMGR.playShake();\r\n        this.scheduleOnce(function () {\r\n            //push pipes\r\n            this.BlueRightBtn.getComponent(cc.Button).enabled = false;\r\n            this.BlueLeftBtn.getComponent(cc.Button).enabled = false;\r\n            this.redRightBtn.getComponent(cc.Button).enabled = false;\r\n            this.redLeftBtn.getComponent(cc.Button).enabled = false;\r\n            var rma = cc.moveTo(0.1, new cc.Vec2(0, this.pipePushY));\r\n            var bma = cc.moveTo(0.1, new cc.Vec2(0, this.pipePushY));\r\n            this.bluePipeParent.runAction(rma);\r\n            this.redPipeParent.runAction(bma);\r\n\r\n            this.RedFake.active = false;\r\n            this.BlueFake.active = false;\r\n            this.scheduleOnce(function () {\r\n                var isAlive = true;\r\n                if (this.rPos != this.safeX1 && this.rPos != this.safeX2) {//Red danger\r\n                    // this.RedPlayer.active = true;\r\n                    this.RedPlayer.y = this.deadY;\r\n                    this.RedPlayer.height = 10;\r\n                    this.isRedDead = true;\r\n                    isAlive = false;\r\n                    this.SoundMGR.playFart();\r\n                    // var rsa = cc.scaleTo(0.3, new cc.Vec2(1, 1));                \r\n                    // this.RedPlayer.runAction(rsa);\r\n                }\r\n                else {\r\n                    this.isRedDead = false;\r\n                }\r\n                if (this.bPos != this.safeX1 && this.bPos != this.safeX2) {//Blue danger\r\n                    // this.BluePlayer.active = true;\r\n                    this.BluePlayer.y = this.deadY;\r\n                    this.BluePlayer.height = 10;\r\n                    this.isBlueDead = true;\r\n                    this.SoundMGR.playFart();\r\n                    isAlive = false;\r\n                    // var bsa = cc.scaleTo(0.3, new cc.Vec2(1, 1));\r\n                    // this.BluePlayer.runAction(bsa);\r\n                }\r\n                else {\r\n                    this.isBlueDead = false;\r\n                }\r\n                if (isAlive) {\r\n                    this.SoundMGR.playPush2();\r\n                }\r\n            }, 0.05);\r\n        }, 1.1);\r\n\r\n        this.scheduleOnce(function () {\r\n            this.shakePipes(10, 5, 0.05, -1);\r\n        }, 1.25);\r\n\r\n        this.scheduleOnce(function () {\r\n            var isDraw = false;\r\n            if (this.isBlueDead && this.isRedDead) {\r\n                isDraw = true;\r\n                this.PrepareNextGame();\r\n            }\r\n            else if (!this.isBlueDead && !this.isRedDead) {\r\n                isDraw = true;\r\n                this.PrepareNextGame();\r\n            }\r\n            else {\r\n                if (this.isBlueDead) {\r\n                    this.GameStatus = 2;\r\n                    this.SoundMGR.playOver();\r\n                    Global.GameData.CurrentWinner = 0;\r\n                    this.GameResultNode.active = true;\r\n\r\n                }\r\n                else if (this.isRedDead) {\r\n                    this.GameStatus = 2;\r\n                    this.SoundMGR.playOver();\r\n                    Global.GameData.CurrentWinner = 1;\r\n                    this.GameResultNode.active = true;\r\n                }\r\n            }\r\n        }, 2);\r\n        // this.scheduleOnce(function () {\r\n        //     this.shakePipes(20, 3, 0.05, 1);\r\n        // }, this.RoundInterval);\r\n    },\r\n\r\n    shakePipes(shakeCount, shakeMaxOffset, shakeInterval, isReverse) {\r\n\r\n        if (isReverse == 1) {\r\n            var iflag = 1;\r\n            var orY = this.redPipeParent.y;\r\n            var obY = this.bluePipeParent.y;\r\n            var j = 0;\r\n            for (var i = 0; i < shakeCount; i++) {\r\n\r\n                this.scheduleOnce(function () {\r\n                    iflag *= -1;\r\n                    j += 1;\r\n                    cc.log(j);\r\n                    var rma = cc.moveTo(shakeInterval, new cc.Vec2(0, orY + (shakeMaxOffset * iflag * (j + 1) / shakeCount)));\r\n                    var bma = cc.moveTo(shakeInterval, new cc.Vec2(0, obY + (shakeMaxOffset * iflag * (j + 1) / shakeCount)));\r\n                    this.redPipeParent.runAction(rma);\r\n                    this.bluePipeParent.runAction(bma);\r\n\r\n                }, i * shakeInterval);\r\n            }\r\n        }\r\n        else {\r\n            var iflag = 1;\r\n            var orY = this.redPipeParent.y;\r\n            var obY = this.bluePipeParent.y;\r\n            var j = 0;\r\n            for (var i = 0; i < shakeCount; i++) {\r\n                cc.log(\"shake reverse\");\r\n                this.scheduleOnce(function () {\r\n                    iflag *= -1;\r\n                    j += 1;\r\n                    // cc.log((i));\r\n                    // cc.log(shakeMaxOffset * iflag * (shakeCount - i) / shakeCount);\r\n                    var rma = cc.moveTo(shakeInterval, new cc.Vec2(0, orY + (shakeMaxOffset * iflag * (shakeCount - j) / shakeCount)));\r\n                    var bma = cc.moveTo(shakeInterval, new cc.Vec2(0, obY + (shakeMaxOffset * iflag * (shakeCount - j) / shakeCount)));\r\n                    this.redPipeParent.runAction(rma);\r\n                    this.bluePipeParent.runAction(bma);\r\n\r\n                }, i * shakeInterval);\r\n            }\r\n        }\r\n    },\r\n\r\n    ShowBalls() {\r\n        this.setBallPos(0, this.rPos);\r\n        this.setBallPos(1, this.bPos);\r\n        this.RedPlayer.active = true;\r\n        this.BluePlayer.active = true;\r\n        this.RedFake.active = true;\r\n        this.BlueFake.active = true;\r\n        this.RedPlayer.opacity = 0;\r\n        this.BluePlayer.opacity = 0;\r\n        this.RedFake.opacity = 0;\r\n        this.BlueFake.opacity = 0;\r\n        this.BluePlayer.height = 104;\r\n        this.RedPlayer.height = 104;\r\n        var rboa = cc.fadeTo(0.3, 255);\r\n        var rfoa = cc.fadeTo(0.3, 120);\r\n        var bboa = cc.fadeTo(0.3, 255);\r\n        var bfoa = cc.fadeTo(0.3, 120);\r\n        this.RedPlayer.runAction(rboa);\r\n        this.BluePlayer.runAction(bboa);\r\n        this.RedFake.runAction(rfoa);\r\n        this.BlueFake.runAction(bfoa);\r\n    },\r\n\r\n    setBallPos(ballType, ballPos) {\r\n        if (ballType == 0)//red\r\n        {\r\n            this.RedPlayer.x = cc.find(ballPos.toString(), this.redPipeParent).x;\r\n            if (this.safeX1 != ballPos && this.safeX2 != ballPos) {\r\n                this.RedPlayer.y = this.outY;\r\n            }\r\n            else {\r\n                this.RedPlayer.y = this.safeY;\r\n            }\r\n            this.RedFake.x = cc.find(ballPos.toString(), this.bluePipeParent).x;\r\n            if (this.safeX1 != ballPos && this.safeX2 != ballPos) {\r\n                this.RedFake.y = this.outY;\r\n            }\r\n            else {\r\n                this.RedFake.y = this.safeY;\r\n            }\r\n\r\n        }\r\n        else {\r\n            this.BluePlayer.x = cc.find(ballPos.toString(), this.bluePipeParent).x;\r\n            if (this.safeX1 != ballPos && this.safeX2 != ballPos) {\r\n                this.BluePlayer.y = this.outY;\r\n            }\r\n            else {\r\n                this.BluePlayer.y = this.safeY;\r\n            }\r\n            this.BlueFake.x = cc.find(ballPos.toString(), this.redPipeParent).x;\r\n            if (this.safeX1 != ballPos && this.safeX2 != ballPos) {\r\n                this.BlueFake.y = this.outY;\r\n            }\r\n            else {\r\n                this.BlueFake.y = this.safeY;\r\n            }\r\n        }\r\n    },\r\n\r\n    onRedMove(event, customEventData) {\r\n        cc.log(\"red move:\" + customEventData);\r\n        if (customEventData == \"-1\") {\r\n            if (this.rPos > 0) {\r\n                if ((this.rPos - 1) != this.bPos) {\r\n                    this.rPos -= 1;\r\n                }\r\n                else if (this.rPos - 2 >= 0) {\r\n                    this.rPos -= 2;\r\n                }\r\n                this.setBallPos(0, this.rPos);\r\n            }\r\n        }\r\n        else {\r\n            if (this.rPos < 9) {\r\n                if ((this.rPos + 1) != this.bPos) {\r\n                    this.rPos += 1;\r\n                }\r\n                else if (this.rPos + 2 <= 9) {\r\n                    this.rPos += 2;\r\n                }\r\n                this.setBallPos(0, this.rPos);\r\n            }\r\n        }\r\n    },\r\n\r\n    onBlueMove(event, customEventData) {\r\n        if (customEventData == -1) {\r\n            if (this.bPos > 0) {\r\n                if ((this.bPos - 1) != this.rPos) {\r\n                    this.bPos -= 1;\r\n                }\r\n                else if (this.bPos - 2 >= 0) {\r\n                    this.bPos -= 2;\r\n                }\r\n                this.setBallPos(1, this.bPos);\r\n            }\r\n        }\r\n        else {\r\n            if (this.bPos < 9) {\r\n                if ((this.bPos + 1) != this.rPos) {\r\n                    this.bPos += 1;\r\n                }\r\n                else if (this.bPos + 2 <= 9) {\r\n                    this.bPos += 2;\r\n                }\r\n                this.setBallPos(1, this.bPos);\r\n            }\r\n        }\r\n    },\r\n    // update (dt) {},\r\n});\r\n"]}