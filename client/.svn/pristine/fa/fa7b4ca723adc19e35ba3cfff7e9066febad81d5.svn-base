{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Game24/assets\\Scripts\\Control\\Games\\Game24\\Game24Control.js"],"names":["MySpriteNumber","require","SoundManager","cc","Class","extends","Component","properties","SoundMGR","default","type","GameResultNode","Node","CountDownNode","PauseNode","GameStatus","BallParent","blueTouch","Sucker","ballSprites","SpriteFrame","blueScoreLabel","blueProgress","ProgressBar","moveSpeed","currentScore","currentDoorIndex","rMoveDelta","hitList","TotalSeconds","tmpTimer","onLoad","director","getPhysicsManager","enabled","onBallHit","selfName","otherName","indexOf","push","find","getComponent","RigidBody","linearVelocity","Vec2","active","showDoor","AddScore","scheduleOnce","setBall","substr","log","playOver","Global","GameData","CurrentCopScore","CurrentCopHistoryScore","CopHistoryScore","SaveCache","setNumber","playScore","start","startAnimation","i","on","EventType","TOUCH_MOVE","event","delta","getDelta","y","x","tmpy","newIndex","Math","floor","random","aa","fadeTo","runAction","aa1","ballIndex","newFlag","obj","tmpScale","tmpX","tmpY","tmpSprite","Sprite","spriteFrame","scale","splice","tmpNewY","position","update","dt","progress"],"mappings":"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","file":"Game24Control.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Game24","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\nvar MySpriteNumber = require(\"MySpriteNumber\");\r\nvar SoundManager = require(\"SoundManager\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        SoundMGR:\r\n        {\r\n            default: null,\r\n            type: SoundManager,\r\n        },\r\n        GameResultNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        CountDownNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        PauseNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        GameStatus: 0,\r\n\r\n        BallParent:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        blueTouch:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        Sucker:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        ballSprites:\r\n        {\r\n            default: [],\r\n            type: [cc.SpriteFrame],\r\n        },\r\n\r\n        blueScoreLabel:\r\n        {\r\n            default: null,\r\n            type: MySpriteNumber,\r\n        },\r\n        blueProgress:\r\n        {\r\n            default: null,\r\n            type: cc.ProgressBar,\r\n        },\r\n        moveSpeed: 1,\r\n        currentScore: 0,\r\n        currentDoorIndex: -1,\r\n        rMoveDelta: 0,\r\n        hitList: [],\r\n        TotalSeconds: 45,\r\n        tmpTimer: 0,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        cc.director.getPhysicsManager().enabled = true;\r\n\r\n    },\r\n\r\n    onBallHit(selfName, otherName) {\r\n        if (selfName.indexOf(\"b\") != -1) {\r\n            if (otherName == \"Up\")//hit and score\r\n            {\r\n                if (this.GameStatus == 1) {\r\n                    if (this.hitList.indexOf(selfName) == -1) {\r\n                        this.hitList.push(selfName);\r\n                        cc.find(selfName, this.BallParent).getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(0, 0);\r\n                        // var sa = cc.scaleTo(0.1, 0, 0);\r\n                        // cc.find(selfName, this.BallParent).runAction(sa);\r\n                        cc.find(selfName, this.BallParent).active = false;\r\n                        this.showDoor();\r\n                        this.AddScore();\r\n                        this.scheduleOnce(function () {\r\n                            cc.find(selfName, this.BallParent).active = true;\r\n                            this.setBall(selfName.substr(1, 1), 1);\r\n                            cc.log(\"create new ball after hit\");\r\n                        }, 0.3);\r\n                    }\r\n                }\r\n            }\r\n            else if (otherName == \"over\") {\r\n                this.GameStatus = 2;\r\n                this.SoundMGR.playOver();\r\n                Global.GameData.CurrentCopScore = this.currentScore;\r\n                Global.GameData.CurrentCopHistoryScore = Global.GameData.CopHistoryScore[2];\r\n                if (this.currentScore > Global.GameData.CurrentCopHistoryScore) {\r\n                    Global.GameData.CurrentCopHistoryScore = this.currentScore;\r\n                    Global.GameData.CopHistoryScore[2] = this.currentScore;\r\n                    Global.GameData.SaveCache();\r\n                }\r\n                this.scheduleOnce(function () {\r\n                    this.GameResultNode.active = true;\r\n                }, 0.5);\r\n\r\n            }\r\n        }\r\n    },\r\n\r\n    AddScore() {\r\n        this.currentScore += 1;\r\n        this.blueScoreLabel.setNumber(this.currentScore);\r\n        this.SoundMGR.playScore();\r\n    },\r\n\r\n    start() {\r\n        this.startAnimation();\r\n\r\n    },\r\n    startAnimation() {\r\n        this.showDoor();\r\n        this.scheduleOnce(function () {\r\n            this.CountDownNode.active = true;\r\n        }, 0.5)\r\n        this.scheduleOnce(function () {\r\n            this.GameStatus = 1;\r\n            this.PauseNode.active = true;\r\n            for (var i = 0; i < 4; i++) {\r\n                this.setBall(i, 0);\r\n\r\n            }\r\n            this.blueTouch.on(cc.Node.EventType.TOUCH_MOVE, function (event) {\r\n                // this.opacity = 255;\r\n                // cc.log(\"blue touch move\");\r\n                var delta = event.getDelta();\r\n                if (cc.find(\"Up\", this).y >= -200) {\r\n                    cc.find(\"Up\", this).x += delta.x;\r\n                    var tmpy = cc.find(\"Up\", this).y + delta.y;\r\n\r\n                    if (tmpy < -200) {\r\n                        tmpy = -200;\r\n                    }\r\n                    cc.find(\"Up\", this).y = tmpy;\r\n                }\r\n            }, this.blueTouch);\r\n        }, 4.5);\r\n\r\n    },\r\n\r\n    showDoor() {\r\n        var newIndex = Math.floor(Math.random() * 4);\r\n        if (newIndex == this.currentDoorIndex) {\r\n            newIndex = this.currentDoorIndex - 1;\r\n            if (newIndex < 0) {\r\n                newIndex = 3;\r\n            }\r\n        }\r\n        if (this.currentDoorIndex == -1) {\r\n            cc.find(\"door\" + newIndex, this.BallParent).active = true;\r\n            this.currentDoorIndex = newIndex;\r\n        }\r\n        else {\r\n            //hide old,how new\r\n\r\n            for (var i = 0; i < 3; i++) {\r\n                // var doorObj = cc.find(\"door\" + this.currentDoorIndex, this.BallParent);\r\n                // cc.find(i, doorObj).runAction(aa);\r\n\r\n                var aa = cc.fadeTo(0.3, 0);\r\n                cc.find(\"door\" + this.currentDoorIndex + \"/\" + i, this.BallParent).runAction(aa);\r\n            }\r\n            this.scheduleOnce(function () {\r\n                // cc.log(\"newIndex:\" + newIndex);\r\n                cc.find(\"door\" + this.currentDoorIndex, this.BallParent).active = false;\r\n                cc.find(\"door\" + newIndex, this.BallParent).active = true;\r\n\r\n                this.currentDoorIndex = newIndex;\r\n                for (var i = 0; i < 3; i++) {\r\n                    var aa1 = cc.fadeTo(0.3, 255);\r\n                    // cc.find(\"door\" + newIndex + \"/\" + i, this.BallParent).opacity = 0;\r\n                    cc.find(\"door\" + newIndex + \"/\" + i, this.BallParent).runAction(aa1);\r\n\r\n                }\r\n            }, 0.35);\r\n        }\r\n    },\r\n    setBall(ballIndex, newFlag) {\r\n        var obj = cc.find(\"b\" + ballIndex, this.BallParent);\r\n        obj.active = true;\r\n        var tmpScale = Math.random() / 2 + 0.3;\r\n        var tmpX = Math.random() * 400 + 100;\r\n        var tmpY = Math.random() * 10;\r\n        var tmpSprite = Math.floor(Math.random() * 2);\r\n        obj.getComponent(cc.Sprite).spriteFrame = this.ballSprites[tmpSprite];\r\n        obj.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(tmpX, tmpY);\r\n        obj.scale = new cc.Vec2(tmpScale, tmpScale);\r\n        if (this.hitList.indexOf(\"b\" + ballIndex) != -1) {\r\n            this.hitList.splice(this.hitList.indexOf(\"b\" + ballIndex), 1);\r\n        }\r\n\r\n        if (newFlag == 1) {\r\n            //new y -100~-500\r\n            var tmpNewY = -(Math.random() * 400 + 100);\r\n            obj.position = new cc.Vec2(-480, tmpNewY);\r\n        }\r\n    },\r\n\r\n\r\n\r\n    update(dt) {\r\n        if (this.GameStatus == 1) {\r\n            //update timer\r\n\r\n            if (this.tmpTimer <= this.TotalSeconds) {\r\n                this.tmpTimer += dt;\r\n\r\n                this.blueProgress.progress = (this.TotalSeconds - this.tmpTimer) / this.TotalSeconds;\r\n            }\r\n            else {\r\n                this.GameStatus = 2;\r\n                this.SoundMGR.playOver();\r\n                Global.GameData.CurrentCopScore = this.currentScore;\r\n                Global.GameData.CurrentCopHistoryScore = Global.GameData.CopHistoryScore[2];\r\n                if (this.currentScore > Global.GameData.CurrentCopHistoryScore) {\r\n                    Global.GameData.CurrentCopHistoryScore = this.currentScore;\r\n                    Global.GameData.CopHistoryScore[2] = this.currentScore;\r\n                    Global.GameData.SaveCache();\r\n                }\r\n                this.scheduleOnce(function () {\r\n                    this.GameResultNode.active = true;\r\n                }, 0.5);\r\n            }\r\n\r\n            for (var i = 0; i < 4; i++) {\r\n                var obj = cc.find(\"b\" + i, this.BallParent);\r\n                if (obj.x >= 430 || obj.x <= -500) {\r\n                    this.setBall(i, 1);\r\n                }\r\n\r\n            }\r\n\r\n\r\n        }\r\n    },\r\n});\r\n"]}