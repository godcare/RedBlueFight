{"version":3,"sources":["Game8Control.js"],"names":["MoveRepeatBySpeed","require","SoundManager","cc","Class","extends","Component","properties","SoundMGR","default","type","GameResultNode","Node","CountDownNode","PauseNode","Bottle","RedBlock","BlueBlock","UnTouchList","bmoveDelta","Vec2","rmoveDelta","RedEnter","BlueEnter","redBalls","blueBalls","rsPoints","bsPoints","redCheckList","blueCheckList","redInList","blueInList","redIndex","blueIndex","redScore","blueScore","GameStatus","onLoad","director","getPhysicsManager","enabled","onTouchStart","playVoice","start","startAnimation","scheduleOnce","active","i","length","spawBall","getComponent","startMove","balltype","getChildren","newObj","instantiate","Math","floor","random","name","toString","setPosition","parent","setScale","sa","scaleTo","runAction","playBlob","onCheckBall","childBall","parentBall","indexOf","find","destroy","onBallHit","selfName","otherName","selfParent","log","push","playOver","stopMove","Global","GameData","CurrentWinner"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIA,oBAAoBC,QAAQ,mBAAR,CAAxB;AACA,IAAIC,eAAeD,QAAQ,cAAR,CAAnB;AACAE,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,kBACA;AACIC,qBAAS,IADb;AAEIC,kBAAMR;AAFV,SAjBQ;AAqBRS,wBACA;AACIF,qBAAS,IADb;AAEIC,kBAAMP,GAAGS;AAFb,SAtBQ;AA0BRC,uBACA;AACIJ,qBAAS,IADb;AAEIC,kBAAMP,GAAGS;AAFb,SA3BQ;AA+BRE,mBACA;AACIL,qBAAS,IADb;AAEIC,kBAAMP,GAAGS;AAFb,SAhCQ;AAoCRG,gBACA;AACIN,qBAAS,IADb;AAEIC,kBAAMP,GAAGS;AAFb,SArCQ;AAyCRI,kBACA;AACIP,qBAAS,IADb;AAEIC,kBAAMP,GAAGS;AAFb,SA1CQ;AA8CRK,mBACA;AACIR,qBAAS,IADb;AAEIC,kBAAMP,GAAGS;AAFb,SA/CQ;AAmDRM,qBACA;AACIT,qBAAS;AADb,SApDQ;AAuDRU,oBACA;AACIV,qBAAS,IAAIN,GAAGiB,IAAP;AADb,SAxDQ;AA2DRC,oBACA;AACIZ,qBAAS,IAAIN,GAAGiB,IAAP;AADb,SA5DQ;AA+DRE,kBACA;AACIb,qBAAS,IADb;AAEIC,kBAAMP,GAAGS;AAFb,SAhEQ;AAoERW,mBACA;AACId,qBAAS,IADb;AAEIC,kBAAMP,GAAGS;AAFb,SArEQ;AAyERY,kBACA;AACIf,qBAAS,EADb;AAEIC,kBAAM,CAACP,GAAGS,IAAJ;AAFV,SA1EQ;AA8ERa,mBACA;AACIhB,qBAAS,EADb;AAEIC,kBAAM,CAACP,GAAGS,IAAJ;AAFV,SA/EQ;AAmFRc,kBAAS;AACT;AACIjB,qBAAS,EADb;AAEIC,kBAAM,CAACP,GAAGS,IAAJ;AAFV,SApFQ;AAwFRe,kBAAS;AACT;AACIlB,qBAAS,EADb;AAEIC,kBAAM,CAACP,GAAGS,IAAJ;AAFV,SAzFQ;AA6FRgB,sBAAc,EA7FN,EA6FS;AACjBC,uBAAe,EA9FP,EA8FU;AAClBC,mBAAW,EA/FH,EA+FM;AACdC,oBAAY,EAhGJ,EAgGO;AACfC,kBAAU,CAjGF;AAkGRC,mBAAW,CAlGH;AAmGRC,kBAAU,CAnGF;AAoGRC,mBAAW,CApGH;AAqGRC,oBAAY,CArGJ,CAqGM;AArGN,KAHP;;AA2GL;;AAEAC,UA7GK,oBA6GI;AACLlC,WAAGmC,QAAH,CAAYC,iBAAZ,GAAgCC,OAAhC,GAA0C,IAA1C;AACH,KA/GI;AAiHLC,gBAjHK,0BAiHU;AACX,aAAKjC,QAAL,CAAckC,SAAd;AAEH,KApHI;AAsHLC,SAtHK,mBAsHG;AACJ,aAAKC,cAAL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEH,KAhII;AAkILA,kBAlIK,4BAkIY;AACb,aAAKC,YAAL,CAAkB,YAAY;AAC1B,iBAAKhC,aAAL,CAAmBiC,MAAnB,GAA4B,IAA5B;AACH,SAFD,EAEG,GAFH;AAGA,aAAKD,YAAL,CAAkB,YAAY;AAC1B,iBAAKT,UAAL,GAAkB,CAAlB;AACA,iBAAKtB,SAAL,CAAegC,MAAf,GAAwB,IAAxB;AACA,iBAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,KAAKrB,QAAL,CAAcsB,MAAlC,EAA0CD,GAA1C,EAA+C;AAC3C,qBAAKE,QAAL,CAAc,CAAd;AACH;AACD,iBAAK,IAAIF,IAAI,CAAb,EAAgBA,IAAI,KAAKpB,QAAL,CAAcqB,MAAlC,EAA0CD,GAA1C,EAA+C;AAC3C,qBAAKE,QAAL,CAAc,CAAd;AACH;AACD,iBAAKlC,MAAL,CAAYmC,YAAZ,CAAyBlD,iBAAzB,EAA4CmD,SAA5C;AACA,iBAAKnC,QAAL,CAAckC,YAAd,CAA2BlD,iBAA3B,EAA8CmD,SAA9C;AACA,iBAAKlC,SAAL,CAAeiC,YAAf,CAA4BlD,iBAA5B,EAA+CmD,SAA/C;AACA,iBAAK7B,QAAL,CAAc4B,YAAd,CAA2BlD,iBAA3B,EAA8CmD,SAA9C;AACA,iBAAK5B,SAAL,CAAe2B,YAAf,CAA4BlD,iBAA5B,EAA+CmD,SAA/C;AACH,SAdD,EAcG,GAdH;AAgBH,KAtJI;;AAuJL;AACAF,YAxJK,oBAwJIG,QAxJJ,EAwJc;AACf,YAAIA,YAAY,CAAhB,EAAkB;AAClB;AACI,qBAAK,IAAIL,IAAI,CAAb,EAAgBA,IAAI,KAAKrB,QAAL,CAAcsB,MAAlC,EAA0CD,GAA1C,EAA+C;AAC3C,wBAAI,KAAKrB,QAAL,CAAcqB,CAAd,EAAiBM,WAAjB,GAA+BL,MAA/B,IAAyC,CAA7C,EAAgD;AAC5C,6BAAKhB,QAAL,IAAiB,CAAjB;AACA,4BAAIsB,SAASnD,GAAGoD,WAAH,CAAe,KAAK/B,QAAL,CAAcgC,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAgB,CAA3B,CAAd,CAAf,CAAb;AACAJ,+BAAOK,IAAP,GAAc,OAAO,KAAK3B,QAAL,CAAc4B,QAAd,EAArB;AACAN,+BAAOO,WAAP,CAAmB,CAAnB,EAAsB,CAAtB;AACAP,+BAAOQ,MAAP,GAAgB,KAAKpC,QAAL,CAAcqB,CAAd,CAAhB;AACAO,+BAAOR,MAAP,GAAgB,IAAhB;AACAQ,+BAAOS,QAAP,CAAgB,CAAhB,EAAmB,CAAnB;AACA,4BAAIC,KAAK7D,GAAG8D,OAAH,CAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,CAAT;AACAX,+BAAOY,SAAP,CAAiBF,EAAjB;AACA,6BAAKxD,QAAL,CAAc2D,QAAd;AACA;AACH;AACJ;AACJ,aAjBD,MAkBK;AACD,iBAAK,IAAIpB,IAAI,CAAb,EAAgBA,IAAI,KAAKpB,QAAL,CAAcqB,MAAlC,EAA0CD,GAA1C,EAA+C;AAC3C,oBAAI,KAAKpB,QAAL,CAAcoB,CAAd,EAAiBM,WAAjB,GAA+BL,MAA/B,IAAyC,CAA7C,EAAgD;AAC5C,yBAAKf,SAAL,IAAkB,CAAlB;AACA,wBAAIqB,SAASnD,GAAGoD,WAAH,CAAe,KAAK9B,SAAL,CAAe+B,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAgB,CAA3B,CAAf,CAAf,CAAb;AACAJ,2BAAOK,IAAP,GAAc,OAAO,KAAK1B,SAAL,CAAe2B,QAAf,EAArB;AACAN,2BAAOO,WAAP,CAAmB,CAAnB,EAAsB,CAAtB;AACAP,2BAAOQ,MAAP,GAAgB,KAAKnC,QAAL,CAAcoB,CAAd,CAAhB;AACAO,2BAAOR,MAAP,GAAgB,IAAhB;AACAQ,2BAAOS,QAAP,CAAgB,CAAhB,EAAmB,CAAnB;AACA,wBAAIC,KAAK7D,GAAG8D,OAAH,CAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,CAAT;AACAX,2BAAOY,SAAP,CAAiBF,EAAjB;AACA,yBAAKxD,QAAL,CAAc2D,QAAd;AACA;AACH;AACJ;AACJ;AACJ,KA5LI;AA8LLC,eA9LK,uBA8LOC,SA9LP,EA8LkBC,UA9LlB,EA8L8B;AAC/B;AACA,aAAKzB,YAAL,CAAkB,YAAY;AAC1B,gBAAIwB,UAAUE,OAAV,CAAkB,IAAlB,IAA0B,CAAC,CAA/B,EAAkC;AAAC;AAC/B,oBAAI,KAAKzC,SAAL,CAAeyC,OAAf,CAAuBF,SAAvB,IAAoC,CAAC,CAAzC,EAA2C;AAC3C;AACI,6BAAKpB,QAAL,CAAc,CAAd;AACH,qBAHD,MAIK;AACD,wBAAI9C,GAAGqE,IAAH,CAAQ,qBAAqBF,UAArB,GAAkC,GAAlC,GAAwCD,SAAhD,KAA8D,IAAlE,EAAwE;AACpElE,2BAAGqE,IAAH,CAAQ,qBAAqBF,UAArB,GAAkC,GAAlC,GAAwCD,SAAhD,EAA2DI,OAA3D;AACH;AACD,yBAAK5B,YAAL,CAAkB,YAAY;AAC1B,6BAAKI,QAAL,CAAc,CAAd;AACH,qBAFD,EAEG,GAFH;AAGH;AACJ;AACD,gBAAIoB,UAAUE,OAAV,CAAkB,IAAlB,IAA0B,CAAC,CAA/B,EAAkC;AAAC;AAC/B,oBAAI,KAAKxC,UAAL,CAAgBwC,OAAhB,CAAwBF,SAAxB,IAAqC,CAAC,CAA1C,EAA4C;AAC5C;AACI,6BAAKpB,QAAL,CAAc,CAAd;AACH,qBAHD,MAIK;AACD,wBAAI9C,GAAGqE,IAAH,CAAQ,qBAAqBF,UAArB,GAAkC,GAAlC,GAAwCD,SAAhD,KAA8D,IAAlE,EAAwE;AACpElE,2BAAGqE,IAAH,CAAQ,qBAAqBF,UAArB,GAAkC,GAAlC,GAAwCD,SAAhD,EAA2DI,OAA3D;AACH;AACD,yBAAK5B,YAAL,CAAkB,YAAY;AAC1B,6BAAKI,QAAL,CAAc,CAAd;AACH,qBAFD,EAEG,GAFH;AAGH;AACJ;AACJ,SA7BD,EA6BG,CA7BH;AA8BH,KA9NI;AA+NLyB,aA/NK,qBA+NKC,QA/NL,EA+NeC,SA/Nf,EA+N0BC,UA/N1B,EA+NsC;AACvC1E,WAAG2E,GAAH,CAAO,WAAWH,QAAX,GAAsB,SAAtB,GAAkCC,SAAlC,GAA8C,cAA9C,GAA+DC,UAAtE;AACA,YAAID,aAAa,UAAb,IAA2BD,SAASJ,OAAT,CAAiB,IAAjB,IAAyB,CAAC,CAAzD,EAA4D;AACxD,gBAAI,KAAKzC,SAAL,CAAeyC,OAAf,CAAuBI,QAAvB,KAAoC,CAAC,CAAzC,EAA4C;AACxC,qBAAK7C,SAAL,CAAeiD,IAAf,CAAoBJ,QAApB;AACA,qBAAKzC,QAAL,IAAiB,CAAjB;AACA/B,mBAAGqE,IAAH,CAAQ,qBAAqBK,UAArB,GAAkC,GAAlC,GAAwCF,QAAhD,EAA0Db,MAA1D,GAAmE3D,GAAGqE,IAAH,CAAQ,oBAAR,CAAnE;AACA,oBAAI,KAAKtC,QAAL,IAAiB,CAAjB,IAAsB,KAAKE,UAAL,IAAmB,CAA7C,EAAgD;AAC5C,yBAAK5B,QAAL,CAAcwE,QAAd;AACA,yBAAKjE,MAAL,CAAYmC,YAAZ,CAAyBlD,iBAAzB,EAA4CiF,QAA5C;AACA,yBAAKjE,QAAL,CAAckC,YAAd,CAA2BlD,iBAA3B,EAA8CiF,QAA9C;AACA,yBAAKhE,SAAL,CAAeiC,YAAf,CAA4BlD,iBAA5B,EAA+CiF,QAA/C;AACA,yBAAK3D,QAAL,CAAc4B,YAAd,CAA2BlD,iBAA3B,EAA8CiF,QAA9C;AACA,yBAAK1D,SAAL,CAAe2B,YAAf,CAA4BlD,iBAA5B,EAA+CiF,QAA/C;AACA,yBAAKpC,YAAL,CAAkB,YAAY;AAC1B,6BAAKT,UAAL,GAAkB,CAAlB;AACA8C,+BAAOC,QAAP,CAAgBC,aAAhB,GAAgC,CAAhC;AACA,6BAAKzE,cAAL,CAAoBmC,MAApB,GAA6B,IAA7B;AACH,qBAJD,EAIG,CAJH;AAKH;AACJ;AACJ,SAnBD,MAoBK,IAAI8B,aAAa,WAAb,IAA4BD,SAASJ,OAAT,CAAiB,IAAjB,IAAyB,CAAC,CAA1D,EAA6D;AAC9D,gBAAI,KAAKxC,UAAL,CAAgBwC,OAAhB,CAAwBI,QAAxB,KAAqC,CAAC,CAA1C,EAA6C;AACzC,qBAAK5C,UAAL,CAAgBgD,IAAhB,CAAqBJ,QAArB;AACA,qBAAKxC,SAAL,IAAkB,CAAlB;AACA,oBAAI,KAAKA,SAAL,IAAkB,CAAlB,IAAuB,KAAKC,UAAL,IAAmB,CAA9C,EAAiD;AAC7C,yBAAK5B,QAAL,CAAcwE,QAAd;AACA,yBAAKjE,MAAL,CAAYmC,YAAZ,CAAyBlD,iBAAzB,EAA4CiF,QAA5C;AACA,yBAAKjE,QAAL,CAAckC,YAAd,CAA2BlD,iBAA3B,EAA8CiF,QAA9C;AACA,yBAAKhE,SAAL,CAAeiC,YAAf,CAA4BlD,iBAA5B,EAA+CiF,QAA/C;AACA,yBAAK3D,QAAL,CAAc4B,YAAd,CAA2BlD,iBAA3B,EAA8CiF,QAA9C;AACA,yBAAK1D,SAAL,CAAe2B,YAAf,CAA4BlD,iBAA5B,EAA+CiF,QAA/C;AACA,yBAAKpC,YAAL,CAAkB,YAAY;AAC1B,6BAAKT,UAAL,GAAkB,CAAlB;AACA8C,+BAAOC,QAAP,CAAgBC,aAAhB,GAAgC,CAAhC;AACA,6BAAKzE,cAAL,CAAoBmC,MAApB,GAA6B,IAA7B;AACH,qBAJD,EAIG,CAJH;AAKH;AACD3C,mBAAGqE,IAAH,CAAQ,qBAAqBK,UAArB,GAAkC,GAAlC,GAAwCF,QAAhD,EAA0Db,MAA1D,GAAmE3D,GAAGqE,IAAH,CAAQ,oBAAR,CAAnE;AACH;AACJ;AACJ;AAzQI,CAAT","file":"Game8Control.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Game8","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\nvar MoveRepeatBySpeed = require(\"MoveRepeatBySpeed\");\r\nvar SoundManager = require(\"SoundManager\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        SoundMGR:\r\n        {\r\n            default: null,\r\n            type: SoundManager,\r\n        },\r\n        GameResultNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        CountDownNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        PauseNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        Bottle:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        RedBlock:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        BlueBlock:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        UnTouchList:\r\n        {\r\n            default: [],\r\n        },\r\n        bmoveDelta:\r\n        {\r\n            default: new cc.Vec2(),\r\n        },\r\n        rmoveDelta:\r\n        {\r\n            default: new cc.Vec2(),\r\n        },\r\n        RedEnter:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        BlueEnter:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        redBalls:\r\n        {\r\n            default: [],\r\n            type: [cc.Node],\r\n        },\r\n        blueBalls:\r\n        {\r\n            default: [],\r\n            type: [cc.Node],\r\n        },\r\n        rsPoints://red spawn points\r\n        {\r\n            default: [],\r\n            type: [cc.Node],\r\n        },\r\n        bsPoints://blue spawn points\r\n        {\r\n            default: [],\r\n            type: [cc.Node],\r\n        },\r\n        redCheckList: [],//red moved balls\r\n        blueCheckList: [],//blue moved balls\r\n        redInList: [],//red in bottle\r\n        blueInList: [],//blue in bottle\r\n        redIndex: 0,\r\n        blueIndex: 0,\r\n        redScore: 0,\r\n        blueScore: 0,\r\n        GameStatus: 0,//0未开始，1开始了，2结束了\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        cc.director.getPhysicsManager().enabled = true;\r\n    },\r\n\r\n    onTouchStart() {\r\n        this.SoundMGR.playVoice();\r\n\r\n    },\r\n\r\n    start() {\r\n        this.startAnimation();\r\n        // cc.log(\"Untouch List:\" + this.UnTouchList);\r\n        // for (var i = 0; i < this.redBalls.length; i++) {\r\n        //     this.UnTouchList.push(this.redBalls[i].name);\r\n        // }\r\n        // for (var i = 0; i < this.blueBalls.length; i++) {\r\n        //     this.UnTouchList.push(this.blueBalls[i].name);\r\n        // }\r\n\r\n    },\r\n\r\n    startAnimation() {\r\n        this.scheduleOnce(function () {\r\n            this.CountDownNode.active = true;\r\n        }, 0.5)\r\n        this.scheduleOnce(function () {\r\n            this.GameStatus = 1;\r\n            this.PauseNode.active = true;\r\n            for (var i = 0; i < this.rsPoints.length; i++) {\r\n                this.spawBall(0);\r\n            }\r\n            for (var i = 0; i < this.bsPoints.length; i++) {\r\n                this.spawBall(1);\r\n            }\r\n            this.Bottle.getComponent(MoveRepeatBySpeed).startMove();\r\n            this.RedBlock.getComponent(MoveRepeatBySpeed).startMove();\r\n            this.BlueBlock.getComponent(MoveRepeatBySpeed).startMove();\r\n            this.RedEnter.getComponent(MoveRepeatBySpeed).startMove();\r\n            this.BlueEnter.getComponent(MoveRepeatBySpeed).startMove();\r\n        }, 4.5);\r\n\r\n    },\r\n    // update (dt) {},\r\n    spawBall(balltype) {\r\n        if (balltype == 0)//spawn red ball\r\n        {\r\n            for (var i = 0; i < this.rsPoints.length; i++) {\r\n                if (this.rsPoints[i].getChildren().length == 0) {\r\n                    this.redIndex += 1;\r\n                    var newObj = cc.instantiate(this.redBalls[Math.floor(Math.random() * 3)]);\r\n                    newObj.name = \"rn\" + this.redIndex.toString();\r\n                    newObj.setPosition(0, 0);\r\n                    newObj.parent = this.rsPoints[i];\r\n                    newObj.active = true;\r\n                    newObj.setScale(0, 0);\r\n                    var sa = cc.scaleTo(0.1, 0.7, 0.7);\r\n                    newObj.runAction(sa);\r\n                    this.SoundMGR.playBlob();\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            for (var i = 0; i < this.bsPoints.length; i++) {\r\n                if (this.bsPoints[i].getChildren().length == 0) {\r\n                    this.blueIndex += 1;\r\n                    var newObj = cc.instantiate(this.blueBalls[Math.floor(Math.random() * 3)]);\r\n                    newObj.name = \"bn\" + this.blueIndex.toString();\r\n                    newObj.setPosition(0, 0);\r\n                    newObj.parent = this.bsPoints[i];\r\n                    newObj.active = true;\r\n                    newObj.setScale(0, 0);\r\n                    var sa = cc.scaleTo(0.1, 0.7, 0.7);\r\n                    newObj.runAction(sa);\r\n                    this.SoundMGR.playBlob();\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    onCheckBall(childBall, parentBall) {\r\n        // cc.log(childBall + \" \" + parentBall);\r\n        this.scheduleOnce(function () {\r\n            if (childBall.indexOf(\"rn\") > -1) {//red ball\r\n                if (this.redInList.indexOf(childBall) > -1)// already in\r\n                {\r\n                    this.spawBall(0);\r\n                }\r\n                else {\r\n                    if (cc.find(\"Canvas/GameCore/\" + parentBall + \"/\" + childBall) != null) {\r\n                        cc.find(\"Canvas/GameCore/\" + parentBall + \"/\" + childBall).destroy();\r\n                    }\r\n                    this.scheduleOnce(function () {\r\n                        this.spawBall(0);\r\n                    }, 0.1);\r\n                }\r\n            }\r\n            if (childBall.indexOf(\"bn\") > -1) {//blue ball\r\n                if (this.blueInList.indexOf(childBall) > -1)// already in\r\n                {\r\n                    this.spawBall(1);\r\n                }\r\n                else {\r\n                    if (cc.find(\"Canvas/GameCore/\" + parentBall + \"/\" + childBall) != null) {\r\n                        cc.find(\"Canvas/GameCore/\" + parentBall + \"/\" + childBall).destroy();\r\n                    }\r\n                    this.scheduleOnce(function () {\r\n                        this.spawBall(1);\r\n                    }, 0.1);\r\n                }\r\n            }\r\n        }, 3)\r\n    },\r\n    onBallHit(selfName, otherName, selfParent) {\r\n        cc.log(\"selft:\" + selfName + \" other:\" + otherName + \" selfParent:\" + selfParent);\r\n        if (otherName == \"RedEnter\" && selfName.indexOf(\"rn\") > -1) {\r\n            if (this.redInList.indexOf(selfName) == -1) {\r\n                this.redInList.push(selfName);\r\n                this.redScore += 1;\r\n                cc.find(\"Canvas/GameCore/\" + selfParent + \"/\" + selfName).parent = cc.find(\"Canvas/GameCore/In\");\r\n                if (this.redScore == 3 && this.GameStatus == 1) {\r\n                    this.SoundMGR.playOver();\r\n                    this.Bottle.getComponent(MoveRepeatBySpeed).stopMove();\r\n                    this.RedBlock.getComponent(MoveRepeatBySpeed).stopMove();\r\n                    this.BlueBlock.getComponent(MoveRepeatBySpeed).stopMove();\r\n                    this.RedEnter.getComponent(MoveRepeatBySpeed).stopMove();\r\n                    this.BlueEnter.getComponent(MoveRepeatBySpeed).stopMove();\r\n                    this.scheduleOnce(function () {\r\n                        this.GameStatus = 2;\r\n                        Global.GameData.CurrentWinner = 0;\r\n                        this.GameResultNode.active = true;\r\n                    }, 2);\r\n                }\r\n            }\r\n        }\r\n        else if (otherName == \"BlueEnter\" && selfName.indexOf(\"bn\") > -1) {\r\n            if (this.blueInList.indexOf(selfName) == -1) {\r\n                this.blueInList.push(selfName);\r\n                this.blueScore += 1;\r\n                if (this.blueScore == 3 && this.GameStatus == 1) {\r\n                    this.SoundMGR.playOver();\r\n                    this.Bottle.getComponent(MoveRepeatBySpeed).stopMove();\r\n                    this.RedBlock.getComponent(MoveRepeatBySpeed).stopMove();\r\n                    this.BlueBlock.getComponent(MoveRepeatBySpeed).stopMove();\r\n                    this.RedEnter.getComponent(MoveRepeatBySpeed).stopMove();\r\n                    this.BlueEnter.getComponent(MoveRepeatBySpeed).stopMove();\r\n                    this.scheduleOnce(function () {\r\n                        this.GameStatus = 2;\r\n                        Global.GameData.CurrentWinner = 1;\r\n                        this.GameResultNode.active = true;\r\n                    }, 2);\r\n                }\r\n                cc.find(\"Canvas/GameCore/\" + selfParent + \"/\" + selfName).parent = cc.find(\"Canvas/GameCore/In\");\r\n            }\r\n        }\r\n    },\r\n});\r\n"]}