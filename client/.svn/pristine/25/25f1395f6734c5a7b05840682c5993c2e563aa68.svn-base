{"version":3,"sources":["Splash.js"],"names":["cc","Class","extends","Component","properties","onLoad","sys","platform","WECHAT_GAME","director","loadScene","wx","getUpdateManager","updateManager","onCheckForUpdate","res","console","log","hasUpdate","onUpdateReady","showModal","title","content","success","confirm","applyUpdate","start"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfQ,KAHP;;AAqBL;;AAEAC,UAvBK,oBAuBI;AACL,YAAI,EAAEL,GAAGM,GAAH,CAAOC,QAAP,KAAoBP,GAAGM,GAAH,CAAOE,WAA7B,CAAJ,EAA+C;AAC3CR,eAAGS,QAAH,CAAYC,SAAZ,CAAsB,SAAtB;AACH,SAFD,MAGK;AACD,gBAAIC,GAAGC,gBAAP,EAAyB;AAAE;AACvB,oBAAMC,gBAAgBF,GAAGC,gBAAH,EAAtB;AACA;AACAC,8BAAcC,gBAAd,CAA+B,UAACC,GAAD,EAAS;AACpCC,4BAAQC,GAAR,CAAY,UAAZ,EAAwBF,GAAxB;AACA,wBAAIA,IAAIG,SAAJ,IAAiB,KAArB,EAA4B;AAAE;AAC1BlB,2BAAGS,QAAH,CAAYC,SAAZ,CAAsB,SAAtB;AAEH;AACJ,iBAND;AAOA;AACAG,8BAAcM,aAAd,CAA4B,UAACJ,GAAD,EAAS;AACjCJ,uBAAGS,SAAH,CAAa;AACTC,+BAAO,MADE;AAETC,iCAAS,kBAFA;AAGTC,iCAAS,iBAAUR,GAAV,EAAe;AACpB,gCAAIA,IAAIS,OAAR,EAAiB;AACb;AACAX,8CAAcY,WAAd;AACH;AACJ;;AARQ,qBAAb;AAYH,iBAbD;AAeH,aA1BD,MA2BK;AAAE;;AAEHzB,mBAAGS,QAAH,CAAYC,SAAZ,CAAsB,SAAtB;AAGH;AACJ;AACJ,KA9DI;AAgELgB,SAhEK,mBAgEG,CAEP;AAlEI;;AAoEL;AApEJ","file":"Splash.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Common","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        if (!(cc.sys.platform === cc.sys.WECHAT_GAME)) {\r\n            cc.director.loadScene(\"Loading\");\r\n        }\r\n        else {\r\n            if (wx.getUpdateManager) { //微信6.6.7才支持此接口\r\n                const updateManager = wx.getUpdateManager();\r\n                // 检查更新\r\n                updateManager.onCheckForUpdate((res) => {\r\n                    console.log(\"热更新接口返回：\", res);\r\n                    if (res.hasUpdate == false) { // 没有更新\r\n                        cc.director.loadScene(\"Loading\");\r\n\r\n                    }\r\n                });\r\n                // 下载更新完成\r\n                updateManager.onUpdateReady((res) => {\r\n                    wx.showModal({\r\n                        title: '更新提示',\r\n                        content: '新版本已经准备好，是否重启应用？',\r\n                        success: function (res) {\r\n                            if (res.confirm) {\r\n                                // 新的版本已经下载好，调用 applyUpdate 应用新版本并重启\r\n                                updateManager.applyUpdate()\r\n                            }\r\n                        }\r\n\r\n\r\n                    })\r\n                });\r\n\r\n            }\r\n            else { //低版本时直接进入\r\n\r\n                cc.director.loadScene(\"Loading\");\r\n\r\n\r\n            }\r\n        }\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}