{"version":3,"sources":["Game13Control.js"],"names":["SoundManager","require","cc","Class","extends","Component","properties","SoundMGR","default","type","GameResultNode","Node","CountDownNode","PauseNode","GameStatus","redBall","blueBall","isJumpStart","UnShowList","moveDangerParent","onLoad","director","getPhysicsManager","enabled","start","i","push","startAnimation","scheduleOnce","active","ShowMoveDanger","length","tmpI","Math","floor","random","index","splice","leftObj","find","toString","rightObj","lma","moveTo","Vec2","y","rma","runAction","OnTouchPanelStart","touchName","jumpBall","log","getComponent","RigidBody","gravityScale","linearVelocity","schedule","OnBallHit","ballName","hitName","hitParentName","playOver","playPunch","Global","GameData","CurrentWinner","ballIndex","playVoice","x"],"mappings":"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","file":"Game13Control.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Game13","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\nvar SoundManager = require(\"SoundManager\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        SoundMGR:\r\n        {\r\n            default: null,\r\n            type: SoundManager,\r\n        },\r\n        GameResultNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        CountDownNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        PauseNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        GameStatus: 0,//0未开始，1开始了，2结束了\r\n        redBall:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        blueBall:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        isJumpStart: false,\r\n        UnShowList: [],\r\n        moveDangerParent:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        cc.director.getPhysicsManager().enabled = true;\r\n    },\r\n\r\n    start() {\r\n        // this.redScoreTotalNumber.setNumber(20);\r\n        for (var i = 0; i < 13; i++) {\r\n            this.UnShowList.push(i);\r\n        }\r\n        this.startAnimation();\r\n\r\n    },\r\n\r\n    startAnimation() {\r\n\r\n        this.scheduleOnce(function () {\r\n            this.CountDownNode.active = true;\r\n        }, 0.5)\r\n        this.scheduleOnce(function () {\r\n            this.GameStatus = 1;\r\n            this.PauseNode.active = true;\r\n\r\n        }, 4.5);\r\n\r\n    },\r\n\r\n    ShowMoveDanger() {\r\n        if (this.UnShowList.length > 0) {\r\n            var tmpI = Math.floor(Math.random() * this.UnShowList.length);\r\n            var index = this.UnShowList[tmpI];\r\n            this.UnShowList.splice(tmpI, 1);\r\n            var leftObj = cc.find(\"l\" + index.toString(), this.moveDangerParent);\r\n            var rightObj = cc.find(\"r\" + index.toString(), this.moveDangerParent);\r\n            leftObj.active = true;\r\n            rightObj.active = true;\r\n            var lma = cc.moveTo(0.5, new cc.Vec2(-330, leftObj.y));\r\n            var rma = cc.moveTo(0.5, new cc.Vec2(330, rightObj.y));\r\n            leftObj.runAction(lma);\r\n            rightObj.runAction(rma);\r\n        }\r\n    },\r\n\r\n    OnTouchPanelStart(touchName) {\r\n        if (this.GameStatus == 1) {\r\n            if (this.isJumpStart) {\r\n                if (touchName == \"redTouch\") {\r\n                    this.jumpBall(0);\r\n                }\r\n                else if (touchName == \"blueTouch\") {\r\n                    this.jumpBall(1);\r\n                }\r\n            }\r\n            else {\r\n                cc.log(touchName);\r\n                this.isJumpStart = true;\r\n                this.redBall.getComponent(cc.RigidBody).gravityScale = 1;\r\n                this.blueBall.getComponent(cc.RigidBody).gravityScale = -1;\r\n                this.redBall.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(300, 0);\r\n                this.blueBall.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(-300, 0);\r\n                this.jumpBall(0);\r\n                this.jumpBall(1);\r\n                this.schedule(function () {\r\n                    this.ShowMoveDanger();\r\n                }, 2);\r\n            }\r\n        }\r\n\r\n\r\n    },\r\n\r\n    OnBallHit(ballName, hitName, hitParentName) {\r\n        if (this.GameStatus == 1) {\r\n            if (ballName == \"redBall\") {\r\n                if (hitName == \"Left\") {\r\n                    this.redBall.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(300, this.redBall.getComponent(cc.RigidBody).linearVelocity.y);\r\n                }\r\n                else if (hitName == \"Right\") {\r\n                    this.redBall.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(-300, this.redBall.getComponent(cc.RigidBody).linearVelocity.y);\r\n                }\r\n                else if (hitName == \"Danger\" || hitParentName == \"moveDangers\") {\r\n                    this.GameStatus = 2;\r\n                    this.redBall.getComponent(cc.RigidBody).gravityScale = 0;\r\n                    this.blueBall.getComponent(cc.RigidBody).gravityScale = 0;\r\n                    this.redBall.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(0, 0);\r\n                    this.blueBall.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(0, 0);\r\n                    this.SoundMGR.playOver();\r\n                    this.SoundMGR.playPunch();\r\n                    this.schedule(function () {\r\n                        this.redBall.active = !this.redBall.active;\r\n                    }, 0.3);\r\n                    this.scheduleOnce(function () {\r\n                        Global.GameData.CurrentWinner = 1;\r\n                        this.GameResultNode.active = true;\r\n                    }, 1.5);\r\n                }\r\n\r\n            }\r\n            else if (ballName == \"blueBall\") {\r\n                if (hitName == \"Left\") {\r\n                    this.blueBall.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(300, this.blueBall.getComponent(cc.RigidBody).linearVelocity.y);\r\n                }\r\n                else if (hitName == \"Right\") {\r\n                    this.blueBall.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(-300, this.blueBall.getComponent(cc.RigidBody).linearVelocity.y);\r\n                }\r\n                else if (hitName == \"Danger\" || hitParentName == \"moveDangers\") {\r\n                    this.GameStatus = 2;\r\n                    this.redBall.getComponent(cc.RigidBody).gravityScale = 0;\r\n                    this.blueBall.getComponent(cc.RigidBody).gravityScale = 0;\r\n                    this.redBall.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(0, 0);\r\n                    this.blueBall.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(0, 0);\r\n                    this.SoundMGR.playOver();\r\n                    this.SoundMGR.playPunch();\r\n                    this.schedule(function () {\r\n                        this.blueBall.active = !this.blueBall.active;\r\n                    }, 0.3);\r\n                    this.scheduleOnce(function () {\r\n                        Global.GameData.CurrentWinner = 0;\r\n                        this.GameResultNode.active = true;\r\n                    }, 1.5);\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    jumpBall(ballIndex) {\r\n        this.SoundMGR.playVoice();\r\n        if (ballIndex == 0) {\r\n            this.redBall.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(this.redBall.getComponent(cc.RigidBody).linearVelocity.x, 300);\r\n        }\r\n        else if (ballIndex == 1) {\r\n            this.blueBall.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(this.blueBall.getComponent(cc.RigidBody).linearVelocity.x, -300);\r\n        }\r\n    }\r\n    // update (dt) {},\r\n});\r\n"]}