{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Game0/assets\\Scripts\\Control\\Games\\Game0\\Game0Control.js"],"names":["GameResultControl","require","SoundManager","cc","Class","extends","Component","properties","SoundMGR","default","type","RedPlayer","Node","BluePlayer","RedSprites","SpriteFrame","BlueSprite","TargetY","TargetScale","ForceDown","MaxForce","GameStatus","OverY","GameResultNode","CountDownNode","PauseNode","onLoad","director","getPhysicsManager","enabled","update","position","y","log","getComponent","RigidBody","linearVelocity","Vec2","playOver","scheduleOnce","Global","GameData","CurrentWinner","active","onClickBall","event","customEventData","playPush","start","startAnimation","Button","redScaleAction","scaleTo","blueScaleAction","runAction","blueMoveAction","moveTo","redMoveAction"],"mappings":"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","file":"Game0Control.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Game0","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\nvar GameResultControl = require(\"GameResultControl\");\r\nvar SoundManager = require(\"SoundManager\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        SoundMGR:\r\n        {\r\n            default: null,\r\n            type: SoundManager,\r\n        },\r\n        RedPlayer:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        BluePlayer:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        RedSprites:\r\n        {\r\n            default: [],\r\n            type: [cc.SpriteFrame],\r\n        },\r\n        BlueSprite:\r\n        {\r\n            default: [],\r\n            type: [cc.SpriteFrame],\r\n        },\r\n        TargetY: 360,\r\n        TargetScale: 1.5,\r\n        ForceDown: 2,//力度衰减\r\n        MaxForce: 10,\r\n        GameStatus: 0,//0未开始，1开始了，2结束了\r\n        OverY: 0,//结束判定\r\n        GameResultNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        CountDownNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        PauseNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    onLoad() {\r\n        cc.director.getPhysicsManager().enabled = true;\r\n    },\r\n    // onLoad () {},\r\n    update() {\r\n        if (this.GameStatus == 1) {\r\n            if (this.BluePlayer.position.y <= this.OverY) {\r\n                cc.log(\"Blue Win\");\r\n                this.GameStatus = 2;\r\n                this.RedPlayer.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(0, -this.MaxForce * 3);\r\n                this.SoundMGR.playOver();\r\n                this.scheduleOnce(function () {\r\n\r\n                    Global.GameData.CurrentWinner = 1;\r\n                    this.GameResultNode.active = true;\r\n                    \r\n                }, 1.5);\r\n\r\n            }\r\n            else if (this.RedPlayer.position.y >= this.OverY) {\r\n                cc.log(\"Red Win\");\r\n                this.GameStatus = 2;\r\n                this.SoundMGR.playOver();\r\n                this.BluePlayer.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(0, this.MaxForce * 3);\r\n                this.scheduleOnce(function () {\r\n                    Global.GameData.CurrentWinner = 0;\r\n                    this.GameResultNode.active = true;\r\n                   \r\n                }, 1.5);\r\n            }\r\n        }\r\n        else {\r\n\r\n        }\r\n    },\r\n    onClickBall(event, customEventData) {\r\n        if (this.GameStatus == 1) {\r\n            this.SoundMGR.playPush();\r\n            if (customEventData == 0)//红色点击\r\n            {\r\n                cc.log(\"Red Click\");\r\n                this.RedPlayer.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(0, this.MaxForce);               \r\n            }\r\n            else if (customEventData == 1) {//蓝色点击\r\n                cc.log(\"Blue Click\");\r\n                this.BluePlayer.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(0, -this.MaxForce);\r\n            }\r\n        }\r\n    },\r\n\r\n    start() {\r\n        cc.log(\"Start\");\r\n        this.GameStatus = 0;\r\n        this.startAnimation();\r\n\r\n\r\n    },\r\n\r\n    startAnimation: function () {\r\n        this.RedPlayer.getComponent(cc.Button).enabled = false;\r\n        this.BluePlayer.getComponent(cc.Button).enabled = false;\r\n        var redScaleAction = cc.scaleTo(0.5, this.TargetScale, this.TargetScale);\r\n        var blueScaleAction = cc.scaleTo(0.5, this.TargetScale, this.TargetScale);\r\n        this.RedPlayer.runAction(redScaleAction);\r\n        this.BluePlayer.runAction(blueScaleAction);\r\n\r\n        this.scheduleOnce(function () {\r\n            var blueMoveAction = cc.moveTo(0.5, 0, this.TargetY);\r\n            this.BluePlayer.runAction(blueMoveAction);\r\n            var redMoveAction = cc.moveTo(0.5, 0, -this.TargetY);\r\n            this.RedPlayer.runAction(redMoveAction);\r\n\r\n        }, 0.8);\r\n        this.scheduleOnce(function () {\r\n            this.CountDownNode.active = true;\r\n        }, 1.3)\r\n        this.scheduleOnce(function () {\r\n            this.RedPlayer.getComponent(cc.Button).enabled = true;\r\n            this.BluePlayer.getComponent(cc.Button).enabled = true;\r\n            this.GameStatus = 1;\r\n            this.PauseNode.active = true;\r\n        }, 4.3);\r\n    }\r\n\r\n    // update (dt) {},\r\n});\r\n"]}