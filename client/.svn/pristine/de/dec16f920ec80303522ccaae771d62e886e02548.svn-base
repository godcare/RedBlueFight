{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Common/assets\\Scripts\\Control\\Games\\Common\\GameResultCopControl.js"],"names":["MySpriteNumber","require","cc","Class","extends","Component","properties","MaxRound","Winner","LevelIndex","ShowPlayerY","ShowOpY","RedPlayer","default","type","Node","BluePlayer","NextSprites","SpriteFrame","RedOp","BlueOp","CopScore","historyScore","currentScore","LoadingObj","rSpeed","start","startAnimation","Global","GameData","PlayedGameCount","TotalGameCount","find","getComponent","Button","enabled","Sprite","spriteFrame","active","blueMoveAction","scaleTo","runAction","redMoveAction","IsPlayForFun","log","CurrentCopScore","CurrentCopHistoryScore","scheduleOnce","setNumber","bOpMoveAction","moveTo","rOpMoveAction","OnMainClick","event","customEventData","director","loadScene","OnReplayClick","LastSceneName","OnNextClick","showLoading","MaxSchedulerCount","ScheduledGames","toString","update","dt","rotation","ra","rotateBy"],"mappings":"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","file":"GameResultCopControl.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Common","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\nvar MySpriteNumber = require(\"MySpriteNumber\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        MaxRound: 3,\r\n        Winner: 0,//胜者，0-红，1-蓝，-1-无\r\n        LevelIndex: 0,//下一关序号\r\n        ShowPlayerY: 450,//展示时的Y轴坐标\r\n        ShowOpY: 375,//菜单Y轴\r\n        RedPlayer:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        BluePlayer:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n\r\n        NextSprites:\r\n        {\r\n            default: [],\r\n            type: [cc.SpriteFrame],\r\n        },\r\n        RedOp:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        BlueOp:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        CopScore:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        historyScore:\r\n        {\r\n            default: null,\r\n            type: MySpriteNumber,\r\n        },\r\n        currentScore:\r\n        {\r\n            default: null,\r\n            type: MySpriteNumber,\r\n        },\r\n        LoadingObj:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        rSpeed: 6,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start() {\r\n        this.startAnimation();\r\n    },\r\n\r\n    startAnimation() {\r\n\r\n        Global.GameData.PlayedGameCount += 1;\r\n\r\n\r\n\r\n\r\n        if (Global.GameData.PlayedGameCount >= Global.GameData.TotalGameCount) {\r\n            cc.find(\"BtnNext\", this.RedOp).getComponent(cc.Button).enabled = false;\r\n            cc.find(\"BtnNext\", this.RedOp).getComponent(cc.Sprite).spriteFrame = this.NextSprites[1];\r\n            cc.find(\"BtnNext\", this.BlueOp).getComponent(cc.Button).enabled = false;\r\n            cc.find(\"BtnNext\", this.BlueOp).getComponent(cc.Sprite).spriteFrame = this.NextSprites[1];\r\n\r\n        }\r\n        else {\r\n            cc.find(\"BtnNext\", this.RedOp).getComponent(cc.Button).enabled = true;\r\n            cc.find(\"BtnNext\", this.RedOp).getComponent(cc.Sprite).spriteFrame = this.NextSprites[0];\r\n            cc.find(\"BtnNext\", this.BlueOp).getComponent(cc.Button).enabled = true;\r\n            cc.find(\"BtnNext\", this.BlueOp).getComponent(cc.Sprite).spriteFrame = this.NextSprites[0];\r\n        }\r\n        this.BluePlayer.active = true;\r\n        this.RedPlayer.active = true;\r\n        var blueMoveAction = cc.scaleTo(0.3, 1, 1);\r\n        this.BluePlayer.runAction(blueMoveAction);\r\n        var redMoveAction = cc.scaleTo(0.3, 1, 1);\r\n        this.RedPlayer.runAction(redMoveAction);\r\n\r\n        cc.find(\"BtnNext\", this.RedOp).active = !Global.GameData.IsPlayForFun;\r\n        cc.find(\"BtnReplay\", this.RedOp).active = Global.GameData.IsPlayForFun;\r\n        cc.find(\"BtnNext\", this.BlueOp).active = !Global.GameData.IsPlayForFun;\r\n        cc.find(\"BtnReplay\", this.BlueOp).active = Global.GameData.IsPlayForFun;\r\n        cc.log(\"current score:\" + Global.GameData.CurrentCopScore + \" history:\" + Global.GameData.CurrentCopHistoryScore);\r\n        this.scheduleOnce(function () {\r\n            this.currentScore.setNumber(Global.GameData.CurrentCopScore);\r\n            this.historyScore.setNumber(Global.GameData.CurrentCopHistoryScore);\r\n        }, 0.35);\r\n\r\n        var bOpMoveAction = cc.moveTo(1, 0, this.ShowOpY);\r\n        this.BlueOp.runAction(bOpMoveAction);\r\n        var rOpMoveAction = cc.moveTo(1, 0, -this.ShowOpY);\r\n        this.RedOp.runAction(rOpMoveAction);\r\n    },\r\n\r\n    OnMainClick(event, customEventData) {\r\n        cc.director.loadScene(\"MainMenu\");\r\n    },\r\n\r\n    OnReplayClick(event, customEventData) {\r\n        cc.director.loadScene(Global.GameData.LastSceneName);\r\n    },\r\n\r\n    OnNextClick(event, customEventData) {\r\n        this.showLoading();\r\n        cc.log(\"played:\" + Global.GameData.PlayedGameCount + \" max scheduler:\" + Global.GameData.MaxSchedulerCount);\r\n        if (Global.GameData.PlayedGameCount < Global.GameData.MaxSchedulerCount) {\r\n            cc.director.loadScene(\"GameScene\" + Global.GameData.ScheduledGames[Global.GameData.PlayedGameCount.toString()]);\r\n        }\r\n    },\r\n    update(dt) {\r\n        // cc.log(this.CopScore.rotation % 360);\r\n        if (this.CopScore.rotation % 360 >= -30 || this.CopScore.rotation % 360 <= -330) {\r\n            this.rSpeed = 50;\r\n        }\r\n        else if (this.CopScore.rotation % 360 >= -210 && this.CopScore.rotation % 360 <= -150) {\r\n            this.rSpeed = 50;\r\n        }\r\n        else {\r\n            this.rSpeed = 200;\r\n        }\r\n        this.CopScore.rotation -= this.rSpeed * dt;\r\n    },\r\n\r\n    showLoading() {\r\n        this.LoadingObj.active = true;\r\n        var ra = cc.rotateBy(100, 36000);\r\n        cc.find(\"LoadingCircle\", this.LoadingObj).runAction(ra);\r\n    }\r\n});\r\n"]}