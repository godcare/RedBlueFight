{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Game19/assets\\Scripts\\Control\\Games\\Game19\\Game19Control.js"],"names":["SoundManager","require","cc","Class","extends","Component","properties","SoundMGR","default","type","GameResultNode","Node","CountDownNode","PauseNode","bBallParent","rBallParent","redCorrect","redSign","blueCorrect","blueSign","redSprites","SpriteFrame","blueSprites","GameStatus","start","startAnimation","setAllBalls","scheduleOnce","active","i","tempRX","Math","random","tempRY","tempRR","tempI","floor","length","find","getComponent","Sprite","spriteFrame","position","Vec2","rotation","color","Color","GRAY","tempBX","tempBY","tempBR","update","dt","sub","mag","playOver","Global","GameData","CurrentWinner","onBallTouchStartRed","touchName","playPop","onBallTouchStartBlue","onRedTouch","redName","WHITE","onRedRelease","onBlueTouch","blueName","onBlueRelease"],"mappings":"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","file":"Game19Control.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Game19","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\nvar SoundManager = require(\"SoundManager\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        SoundMGR:\r\n        {\r\n            default: null,\r\n            type: SoundManager,\r\n        },\r\n        GameResultNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        CountDownNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        PauseNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n\r\n        bBallParent:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        rBallParent:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        redCorrect:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        redSign:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        blueCorrect:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        blueSign:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        redSprites:\r\n        {\r\n            default: [],\r\n            type: [cc.SpriteFrame],\r\n        },\r\n        blueSprites:\r\n        {\r\n            default: [],\r\n            type: [cc.SpriteFrame],\r\n        },\r\n        GameStatus: 0,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n\r\n\r\n    start() {\r\n        this.startAnimation();\r\n\r\n    },\r\n\r\n    startAnimation() {\r\n        this.setAllBalls();\r\n        this.scheduleOnce(function () {\r\n            this.CountDownNode.active = true;\r\n        }, 0.5)\r\n        this.scheduleOnce(function () {\r\n            this.GameStatus = 1;\r\n            this.PauseNode.active = true;\r\n\r\n        }, 4.5);\r\n\r\n    },\r\n\r\n    setAllBalls() {\r\n        for (var i = 0; i < 20; i++) {\r\n            var tempRX = (Math.random() * 2 - 1) * 350;\r\n            var tempRY = (Math.random() * 2 - 1) * 250;\r\n            var tempRR = Math.random() * 360;\r\n            var tempI = Math.floor(Math.random() * this.redSprites.length);\r\n            cc.find(\"w\" + i, this.rBallParent).getComponent(cc.Sprite).spriteFrame = this.redSprites[tempI];\r\n            cc.find(\"w\" + i, this.rBallParent).position = new cc.Vec2(tempRX, tempRY);\r\n            cc.find(\"w\" + i, this.rBallParent).rotation = tempRR;\r\n            cc.find(\"w\" + i, this.rBallParent).color = cc.Color.GRAY;\r\n\r\n            var tempBX = (Math.random() * 2 - 1) * 350;\r\n            var tempBY = (Math.random() * 2 - 1) * 250;\r\n            var tempBR = Math.random() * 360;\r\n\r\n            cc.find(\"w\" + i, this.bBallParent).getComponent(cc.Sprite).spriteFrame = this.blueSprites[tempI];\r\n            cc.find(\"w\" + i, this.bBallParent).position = new cc.Vec2(tempBX, tempBY);\r\n            cc.find(\"w\" + i, this.bBallParent).rotation = tempBR;\r\n            cc.find(\"w\" + i, this.bBallParent).color = cc.Color.GRAY;\r\n        }\r\n\r\n        var tempRX = (Math.random() * 2 - 1) * 350;\r\n        var tempRY = (Math.random() * 2 - 1) * 250;\r\n        var tempRR = Math.random() * 360;\r\n        if (tempRX < -100 && tempRY < 40) {\r\n            tempRY += 100;\r\n        }\r\n        var tempI = Math.floor(Math.random() * this.redSprites.length);\r\n        this.redCorrect.getComponent(cc.Sprite).spriteFrame = this.redSprites[tempI];\r\n        this.redSign.getComponent(cc.Sprite).spriteFrame = this.redSprites[tempI];\r\n        this.redCorrect.position = new cc.Vec2(tempRX, tempRY);\r\n        this.redCorrect.rotation = tempRR;\r\n        this.redCorrect.color = cc.Color.GRAY;\r\n\r\n        var tempBX = (Math.random() * 2 - 1) * 350;\r\n        var tempBY = (Math.random() * 2 - 1) * 250;\r\n        var tempBR = Math.random() * 360;\r\n        if (tempBX < -100 && tempBY < 40) {\r\n            tempBY += 100;\r\n        }\r\n\r\n        this.blueCorrect.getComponent(cc.Sprite).spriteFrame = this.blueSprites[tempI];\r\n        this.blueSign.getComponent(cc.Sprite).spriteFrame = this.blueSprites[tempI];\r\n        this.blueCorrect.position = new cc.Vec2(tempBX, tempBY);\r\n        this.blueCorrect.rotation = tempBR;\r\n        this.blueCorrect.color = cc.Color.GRAY;\r\n    },\r\n\r\n\r\n    update(dt) {\r\n        if (this.GameStatus == 1) {\r\n            if (this.redCorrect.position.sub(this.redSign.position).mag() <= 50) {\r\n                // cc.log(\"red win\");\r\n                this.GameStatus = 2;\r\n                this.SoundMGR.playOver();\r\n                Global.GameData.CurrentWinner = 0;\r\n                this.GameResultNode.active = true;\r\n            }\r\n            else if (this.blueCorrect.position.sub(this.blueSign.position).mag() <= 50) {\r\n                // cc.log(\"red win\");\r\n                this.GameStatus = 2;\r\n                this.SoundMGR.playOver();\r\n                Global.GameData.CurrentWinner = 1;\r\n                this.GameResultNode.active = true;\r\n            }\r\n\r\n        }\r\n    },\r\n\r\n    onBallTouchStartRed(touchName) {\r\n\r\n        this.SoundMGR.playPop();\r\n        if (touchName == \"correct\") {\r\n            this.GameStatus = 2;\r\n            this.SoundMGR.playOver();\r\n            Global.GameData.CurrentWinner = 0;\r\n            this.GameResultNode.active = true;\r\n        }\r\n    },\r\n\r\n\r\n    onBallTouchStartBlue(touchName) {\r\n\r\n        this.SoundMGR.playPop();\r\n        if (touchName == \"correct\") {\r\n            this.GameStatus = 2;\r\n            this.SoundMGR.playOver();\r\n            Global.GameData.CurrentWinner = 1;\r\n            this.GameResultNode.active = true;\r\n        }\r\n    },\r\n\r\n    onRedTouch(redName) {\r\n        // if (redName != \"correct\") {\r\n\r\n        cc.find(redName, this.rBallParent).color = cc.Color.WHITE;\r\n\r\n        // }\r\n    },\r\n\r\n    onRedRelease(redName) {\r\n        // if (redName != \"correct\") {\r\n        cc.find(redName, this.rBallParent).color = cc.Color.GRAY;\r\n        // }\r\n    },\r\n\r\n    onBlueTouch(blueName) {\r\n\r\n        cc.find(blueName, this.bBallParent).color = cc.Color.WHITE;\r\n        // }\r\n    },\r\n\r\n    onBlueRelease(blueName) {\r\n        // if (redName != \"correct\") {\r\n        cc.find(blueName, this.bBallParent).color = cc.Color.GRAY;\r\n        // }\r\n    },\r\n});\r\n"]}