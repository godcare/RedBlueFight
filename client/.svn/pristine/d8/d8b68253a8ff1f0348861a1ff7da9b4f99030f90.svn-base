{"version":3,"sources":["Game4Control.js"],"names":["MySpriteAnimation","require","CountDownControl","SoundManager","cc","Class","extends","Component","properties","SoundMGR","default","type","GameResultNode","Node","CountDownNode","PauseNode","RedStage","BlueStage","RedAwaitSprites","SpriteFrame","BlueAwaitSprites","RedAttackSprites","BlueAttackSprites","RedDefendSprites","BlueDefendSprites","RedHurtSprites","BlueHurtSprites","GameStatus","RedAttackBtn","RedDefendBtn","BlueAttackBtn","BlueDefendBtn","RedHint","BlueHint","RedStageFoul","BlueStageFoul","RedOpSprites","BlueOpSprites","RightOp","start","startAnimation","scheduleOnce","active","ShowNextOp","PlayAwait","switchBtnStatus","Math","floor","random","y","opacity","getComponent","Sprite","spriteFrame","rm","moveTo","ra","fadeIn","bm","ba","fadeTo","runAction","isEnabled","Button","enabled","onRedAttackClick","event","customEventData","onRedWin","onBlueWin","onRedDefendClick","onDefend","onBlueAttackClick","onBlueDefendClick","isFoul","find","Sprites","Play","x","playFoul","playPunch","playOver","Global","GameData","CurrentWinner","Restart"],"mappings":"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","file":"Game4Control.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Game4","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\nvar MySpriteAnimation = require(\"MySpriteAnimation\");\r\nvar CountDownControl = require(\"CountDownControl\");\r\nvar SoundManager = require(\"SoundManager\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // }, \r\n        SoundMGR:\r\n        {\r\n            default: null,\r\n            type: SoundManager,\r\n        },\r\n        GameResultNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        CountDownNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        PauseNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        RedStage:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        BlueStage:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        RedAwaitSprites:\r\n        {\r\n            default: [],\r\n            type: [cc.SpriteFrame],\r\n        },\r\n        BlueAwaitSprites:\r\n        {\r\n            default: [],\r\n            type: [cc.SpriteFrame],\r\n        },\r\n        RedAttackSprites:\r\n        {\r\n            default: [],\r\n            type: [cc.SpriteFrame],\r\n        },\r\n        BlueAttackSprites:\r\n        {\r\n            default: [],\r\n            type: [cc.SpriteFrame],\r\n        },\r\n        RedDefendSprites:\r\n        {\r\n            default: [],\r\n            type: [cc.SpriteFrame],\r\n        },\r\n        BlueDefendSprites:\r\n        {\r\n            default: [],\r\n            type: [cc.SpriteFrame],\r\n        },\r\n        RedHurtSprites:\r\n        {\r\n            default: [],\r\n            type: [cc.SpriteFrame],\r\n        },\r\n        BlueHurtSprites:\r\n        {\r\n            default: [],\r\n            type: [cc.SpriteFrame],\r\n        },\r\n        GameStatus: 0,//0未开始，1开始了，2结束了\r\n        RedAttackBtn:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        RedDefendBtn:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        BlueAttackBtn:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        BlueDefendBtn:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        RedHint:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        BlueHint:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        RedStageFoul:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        BlueStageFoul:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        RedOpSprites:\r\n        {\r\n            default: [],\r\n            type: [cc.SpriteFrame],\r\n        },\r\n        BlueOpSprites:\r\n        {\r\n            default: [],\r\n            type: [cc.SpriteFrame],\r\n        },\r\n\r\n        RightOp: -1,//正确的操作\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start() {\r\n        this.startAnimation();\r\n    },\r\n\r\n    startAnimation() {\r\n        this.scheduleOnce(function () {\r\n            this.CountDownNode.active = true;\r\n        }, 0.5)\r\n        this.scheduleOnce(function () {\r\n\r\n            this.GameStatus = 1;\r\n            this.PauseNode.active = true;\r\n            this.ShowNextOp();\r\n        }, 4.5);\r\n\r\n    },\r\n\r\n    ShowNextOp() {\r\n        this.PlayAwait();\r\n        this.switchBtnStatus(true);\r\n        this.RightOp = -1;\r\n        //等待一段时间，生成下一局，这期间按了操作，会被当作犯规\r\n        this.scheduleOnce(function () {\r\n            if (this.GameStatus != 2) {//游戏还未结束\r\n                this.RightOp = Math.floor(Math.random() * 2);//随机生成0和1，若为0，则红进攻，反之则防守\r\n                this.RedHint.active = true;\r\n                this.BlueHint.active = true;\r\n                this.RedHint.y = -400;\r\n                this.BlueHint.y = -400;\r\n\r\n                this.BlueHint.opacity = 0;\r\n                this.RedHint.opacity = 0;\r\n                this.RedHint.getComponent(cc.Sprite).spriteFrame = this.RedOpSprites[this.RightOp];\r\n                this.BlueHint.getComponent(cc.Sprite).spriteFrame = this.BlueOpSprites[1 - this.RightOp];\r\n                var rm = cc.moveTo(0.7, 0, -150);\r\n                var ra = cc.fadeIn(0.7, 255);\r\n                var bm = cc.moveTo(0.7, 0, -150);\r\n                var ba = cc.fadeTo(0.7, 255);\r\n                this.RedHint.runAction(rm);\r\n                this.RedHint.runAction(ra);\r\n                this.BlueHint.runAction(bm);\r\n                this.BlueHint.runAction(ba);\r\n            }\r\n        }, 1);\r\n\r\n    },\r\n\r\n    switchBtnStatus(isEnabled) {\r\n        this.RedAttackBtn.getComponent(cc.Button).enabled = isEnabled;\r\n        this.RedDefendBtn.getComponent(cc.Button).enabled = isEnabled;\r\n        this.BlueAttackBtn.getComponent(cc.Button).enabled = isEnabled;\r\n        this.BlueDefendBtn.getComponent(cc.Button).enabled = isEnabled;\r\n    },\r\n\r\n    //红色点了进攻，如果是0，则红色胜利，如果是1或者-1则犯规，蓝胜利\r\n    onRedAttackClick(event, customEventData) {\r\n        this.switchBtnStatus(false);\r\n        if (this.RightOp == 0) {\r\n            this.onRedWin(false);\r\n        }\r\n        else {\r\n            this.onBlueWin(true);\r\n        }\r\n    },\r\n\r\n    //红色点了进攻，如果是1，则平局，红方防守，进行下一局，否则视为犯规，蓝方胜利\r\n    onRedDefendClick(event, customEventData) {\r\n        this.switchBtnStatus(false);\r\n        if (this.RightOp == 1) {\r\n            this.onDefend();\r\n        }\r\n        else {\r\n            this.onBlueWin(true);\r\n        }\r\n    },\r\n\r\n    //蓝色点了进攻，如果是1，则蓝色胜利，如果是0或者是-1则犯规，红胜利\r\n    onBlueAttackClick(event, customEventData) {\r\n        this.switchBtnStatus(false);\r\n        if (this.RightOp == 1) {\r\n            this.onBlueWin(false);\r\n        }\r\n        else {\r\n            this.onRedWin(true);\r\n        }\r\n    },\r\n\r\n    //蓝色点了防守，如果0，则平局，蓝方防守，进行下一局，否则视为犯规，红方胜利\r\n    onBlueDefendClick(event, customEventData) {\r\n        this.switchBtnStatus(false);\r\n        if (this.RightOp == 0) {\r\n            this.onDefend();\r\n        }\r\n        else {\r\n            this.onRedWin(true);\r\n        }\r\n    },\r\n\r\n    onRedWin(isFoul) {\r\n        cc.find(\"RedPlayer\", this.RedStage).getComponent(MySpriteAnimation).Sprites = this.RedAttackSprites;\r\n        cc.find(\"RedPlayer\", this.RedStage).getComponent(MySpriteAnimation).Play(false);\r\n        cc.find(\"BluePlayer\", this.RedStage).getComponent(MySpriteAnimation).Sprites = this.BlueHurtSprites;\r\n        cc.find(\"BluePlayer\", this.RedStage).getComponent(MySpriteAnimation).Play(false);\r\n        cc.find(\"RedPlayer\", this.BlueStage).getComponent(MySpriteAnimation).Sprites = this.RedAttackSprites;\r\n        cc.find(\"RedPlayer\", this.BlueStage).getComponent(MySpriteAnimation).Play(false);\r\n        cc.find(\"BluePlayer\", this.BlueStage).getComponent(MySpriteAnimation).Sprites = this.BlueHurtSprites;\r\n        cc.find(\"BluePlayer\", this.BlueStage).getComponent(MySpriteAnimation).Play(false);\r\n        this.RedStageFoul.active = isFoul;\r\n        this.BlueStageFoul.active = isFoul;\r\n        this.RedStageFoul.x = 100;\r\n        this.BlueStageFoul.x = 100;\r\n        if (isFoul) {\r\n            this.BlueHint.active = true;\r\n            this.BlueHint.getComponent(cc.Sprite).spriteFrame = this.BlueOpSprites[2];\r\n            this.BlueHint.y = -150;\r\n            this.BlueHint.opacity = 255;\r\n            this.SoundMGR.playFoul();\r\n        }\r\n        else\r\n        {\r\n            this.SoundMGR.playPunch();\r\n        }\r\n        this.GameStatus = 2;\r\n        this.SoundMGR.playOver();\r\n        this.scheduleOnce(function () {\r\n\r\n            Global.GameData.CurrentWinner = 0;\r\n            this.GameResultNode.active = true;\r\n        }, 1);\r\n    },\r\n\r\n    onBlueWin(isFoul) {\r\n        cc.find(\"RedPlayer\", this.RedStage).getComponent(MySpriteAnimation).Sprites = this.RedHurtSprites;\r\n        cc.find(\"RedPlayer\", this.RedStage).getComponent(MySpriteAnimation).Play(false);\r\n        cc.find(\"BluePlayer\", this.RedStage).getComponent(MySpriteAnimation).Sprites = this.BlueAttackSprites;\r\n        cc.find(\"BluePlayer\", this.RedStage).getComponent(MySpriteAnimation).Play(false);\r\n        cc.find(\"RedPlayer\", this.BlueStage).getComponent(MySpriteAnimation).Sprites = this.RedHurtSprites;\r\n        cc.find(\"RedPlayer\", this.BlueStage).getComponent(MySpriteAnimation).Play(false);\r\n        cc.find(\"BluePlayer\", this.BlueStage).getComponent(MySpriteAnimation).Sprites = this.BlueAttackSprites;\r\n        cc.find(\"BluePlayer\", this.BlueStage).getComponent(MySpriteAnimation).Play(false);\r\n        this.RedStageFoul.x = -100;\r\n        this.BlueStageFoul.x = -100;\r\n        this.RedStageFoul.active = isFoul;\r\n        this.BlueStageFoul.active = isFoul;\r\n        if (isFoul) {\r\n            this.RedHint.active = true;\r\n            this.RedHint.getComponent(cc.Sprite).spriteFrame = this.RedOpSprites[2];\r\n            this.RedHint.y = -150;\r\n            this.RedHint.opacity = 255;\r\n            this.SoundMGR.playFoul();\r\n        }\r\n        else\r\n        {\r\n            this.SoundMGR.playPunch();\r\n        }\r\n        this.GameStatus = 2;\r\n        this.SoundMGR.playOver();\r\n        this.scheduleOnce(function () {\r\n\r\n            Global.GameData.CurrentWinner = 1;\r\n            this.GameResultNode.active = true;\r\n        }, 1);\r\n    },\r\n\r\n    onDefend() {\r\n        //蓝色成功防守\r\n        this.SoundMGR.playPunch();\r\n        if (this.RightOp == 0) {\r\n            cc.find(\"RedPlayer\", this.RedStage).getComponent(MySpriteAnimation).Sprites = this.RedAttackSprites;\r\n            cc.find(\"RedPlayer\", this.RedStage).getComponent(MySpriteAnimation).Play(false);\r\n            cc.find(\"BluePlayer\", this.RedStage).getComponent(MySpriteAnimation).Sprites = this.BlueDefendSprites;\r\n            cc.find(\"BluePlayer\", this.RedStage).getComponent(MySpriteAnimation).Play(false);\r\n            cc.find(\"RedPlayer\", this.BlueStage).getComponent(MySpriteAnimation).Sprites = this.RedAttackSprites;\r\n            cc.find(\"RedPlayer\", this.BlueStage).getComponent(MySpriteAnimation).Play(false);\r\n            cc.find(\"BluePlayer\", this.BlueStage).getComponent(MySpriteAnimation).Sprites = this.BlueDefendSprites;\r\n            cc.find(\"BluePlayer\", this.BlueStage).getComponent(MySpriteAnimation).Play(false);\r\n        }\r\n        else if (this.RightOp == 1) {\r\n            cc.find(\"RedPlayer\", this.RedStage).getComponent(MySpriteAnimation).Sprites = this.RedDefendSprites;\r\n            cc.find(\"RedPlayer\", this.RedStage).getComponent(MySpriteAnimation).Play(false);\r\n            cc.find(\"BluePlayer\", this.RedStage).getComponent(MySpriteAnimation).Sprites = this.BlueAttackSprites;\r\n            cc.find(\"BluePlayer\", this.RedStage).getComponent(MySpriteAnimation).Play(false);\r\n            cc.find(\"RedPlayer\", this.BlueStage).getComponent(MySpriteAnimation).Sprites = this.RedDefendSprites;\r\n            cc.find(\"RedPlayer\", this.BlueStage).getComponent(MySpriteAnimation).Play(false);\r\n            cc.find(\"BluePlayer\", this.BlueStage).getComponent(MySpriteAnimation).Sprites = this.BlueAttackSprites;\r\n            cc.find(\"BluePlayer\", this.BlueStage).getComponent(MySpriteAnimation).Play(false);\r\n        }\r\n\r\n        this.scheduleOnce(function () {\r\n            this.CountDownNode.active = true;\r\n            this.CountDownNode.getComponent(CountDownControl).Restart();\r\n            this.BlueHint.active = false;\r\n            this.RedHint.active = false;\r\n            this.BlueStageFoul.active = false;\r\n            this.RedStageFoul.active = false;\r\n            this.PlayAwait();\r\n        }, 1.5)\r\n\r\n        this.scheduleOnce(function () {\r\n            this.ShowNextOp();\r\n        }, 4.5);\r\n    },\r\n\r\n    PlayAwait() {\r\n        cc.find(\"RedPlayer\", this.RedStage).getComponent(MySpriteAnimation).Sprites = this.RedAwaitSprites;\r\n        cc.find(\"BluePlayer\", this.RedStage).getComponent(MySpriteAnimation).Sprites = this.BlueAwaitSprites;\r\n        cc.find(\"RedPlayer\", this.BlueStage).getComponent(MySpriteAnimation).Sprites = this.RedAwaitSprites;\r\n        cc.find(\"BluePlayer\", this.BlueStage).getComponent(MySpriteAnimation).Sprites = this.BlueAwaitSprites;\r\n        cc.find(\"RedPlayer\", this.RedStage).getComponent(MySpriteAnimation).Play(true);\r\n        cc.find(\"BluePlayer\", this.RedStage).getComponent(MySpriteAnimation).Play(true);\r\n        cc.find(\"RedPlayer\", this.BlueStage).getComponent(MySpriteAnimation).Play(true);\r\n        cc.find(\"BluePlayer\", this.BlueStage).getComponent(MySpriteAnimation).Play(true);\r\n    }\r\n    // update (dt) {},\r\n});\r\n"]}