{"version":3,"sources":["Game23Control.js"],"names":["MySpriteNumber","require","SoundManager","cc","Class","extends","Component","properties","SoundMGR","default","type","GameResultNode","Node","CountDownNode","PauseNode","GameStatus","BallParent","UpBtn","DownBtn","Ship","ballSprites","SpriteFrame","redScoreLabel","blueScoreLabel","moveSpeed","currentScore","coinRate","onLoad","director","getPhysicsManager","enabled","onShipMoveClick","event","customEventData","y","start","startAnimation","i","setBall","getComponent","Button","color","Color","GRAY","scheduleOnce","active","WHITE","ballIndex","isNewSpawn","activeCount","find","obj","tmp","Math","random","Sprite","spriteFrame","tmpr","nIndex","x","tmpR","update","dt","setNumber","floor","hitObj","position","sub","mag","playOver","schedule","Global","GameData","CurrentCopScore","CurrentCopHistoryScore","CopHistoryScore","SaveCache"],"mappings":"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","file":"Game23Control.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Game23","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\nvar MySpriteNumber = require(\"MySpriteNumber\");\r\nvar SoundManager = require(\"SoundManager\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        SoundMGR:\r\n        {\r\n            default: null,\r\n            type: SoundManager,\r\n        },\r\n        GameResultNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        CountDownNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        PauseNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        GameStatus: 0,\r\n\r\n        BallParent:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        UpBtn:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        DownBtn:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        Ship:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        ballSprites:\r\n        {\r\n            default: [],\r\n            type: [cc.SpriteFrame],\r\n        },\r\n\r\n        redScoreLabel:\r\n        {\r\n            default: null,\r\n            type: MySpriteNumber,\r\n        },\r\n        blueScoreLabel:\r\n        {\r\n            default: null,\r\n            type: MySpriteNumber,\r\n        },\r\n\r\n        moveSpeed: 1,\r\n        currentScore: 0,\r\n        coinRate: 0.2,//刷金币的概率\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        cc.director.getPhysicsManager().enabled = true;\r\n\r\n    },\r\n\r\n    onShipMoveClick(event, customEventData) {\r\n        if (customEventData == \"up\") {\r\n            if (this.Ship.y < 175) {\r\n                this.Ship.y += 175;\r\n            }\r\n\r\n        }\r\n        else {\r\n            if (this.Ship.y > -175) {\r\n                this.Ship.y -= 175\r\n            }\r\n        }\r\n    },\r\n\r\n    start() {\r\n        this.startAnimation();\r\n    },\r\n    startAnimation() {\r\n        for (var i = 0; i < 5; i++) {\r\n            this.setBall(i, 1);\r\n        }\r\n        this.UpBtn.getComponent(cc.Button).enabled = false;\r\n        this.DownBtn.getComponent(cc.Button).enabled = false;\r\n        this.UpBtn.color = cc.Color.GRAY;\r\n        this.DownBtn.color = cc.Color.GRAY;\r\n        this.scheduleOnce(function () {\r\n            this.CountDownNode.active = true;\r\n        }, 0.5)\r\n        this.scheduleOnce(function () {\r\n            this.GameStatus = 1;\r\n            this.PauseNode.active = true;\r\n            this.UpBtn.getComponent(cc.Button).enabled = true;\r\n            this.DownBtn.getComponent(cc.Button).enabled = true;\r\n            this.UpBtn.color = cc.Color.WHITE;\r\n            this.DownBtn.color = cc.Color.WHITE;\r\n        }, 4.5);\r\n\r\n    },\r\n\r\n\r\n    setBall(ballIndex, isNewSpawn) {\r\n        var activeCount = 0;\r\n        //同一个竖线上最多同时存在两个\r\n        if (ballIndex < 3) {\r\n            for (var i = 0; i < 3; i++) {\r\n                if (cc.find(\"b\" + i, this.BallParent).active) {\r\n                    activeCount += 1;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            for (var i = 3; i < 6; i++) {\r\n                if (cc.find(\"b\" + i, this.BallParent).active) {\r\n                    activeCount += 1;\r\n                }\r\n            }\r\n        }\r\n        if (activeCount == 0) {\r\n            var obj = cc.find(\"b\" + ballIndex, this.BallParent);\r\n            var tmp = Math.random();\r\n            if (tmp <= this.coinRate) {\r\n                obj.getComponent(cc.Sprite).spriteFrame = this.ballSprites[0];\r\n            }\r\n            else {\r\n                obj.getComponent(cc.Sprite).spriteFrame = this.ballSprites[1];\r\n            }\r\n            var tmpr = (Math.random() * 2 - 1) * 20;\r\n            var nIndex = (ballIndex + 3) % 6;\r\n            if (isNewSpawn == 0) {\r\n                obj.x = cc.find(\"b\" + nIndex, this.BallParent).x + 420 + tmpr;\r\n            }\r\n            else {\r\n                obj.x += tmpr;\r\n            }\r\n            obj.active = true;\r\n        }\r\n        else if (activeCount == 1) {\r\n            var tmpR = Math.random();\r\n            if (tmpR <= 0.5) {\r\n                var obj = cc.find(\"b\" + ballIndex, this.BallParent);\r\n                var tmp = Math.random();\r\n                if (tmp <= this.coinRate) {\r\n                    obj.getComponent(cc.Sprite).spriteFrame = this.ballSprites[0];\r\n                }\r\n                else {\r\n                    obj.getComponent(cc.Sprite).spriteFrame = this.ballSprites[1];\r\n                }\r\n                var tmpr = (Math.random() * 2 - 1) * 20;\r\n                var nIndex = (ballIndex + 3) % 6;\r\n                if (isNewSpawn == 0) {\r\n                    obj.x = cc.find(\"b\" + nIndex, this.BallParent).x + 420 + tmpr;\r\n                }\r\n                else {\r\n                    obj.x += tmpr;\r\n                }\r\n                obj.active = true;\r\n            }\r\n            else {\r\n                var obj = cc.find(\"b\" + ballIndex, this.BallParent).active = false;\r\n            }\r\n\r\n        }\r\n        else {\r\n            var obj = cc.find(\"b\" + ballIndex, this.BallParent).active = false;\r\n        }\r\n    },\r\n\r\n\r\n\r\n    update(dt) {\r\n        if (this.GameStatus == 1) {\r\n            //update timer\r\n\r\n\r\n\r\n            for (var i = 0; i < 6; i++) {\r\n\r\n                if (cc.find(\"b\" + i, this.BallParent).x <= -420) {\r\n                    if (cc.find(\"b\" + i, this.BallParent).active) {\r\n                        // cc.find(\"b\" + i, this.BallParent).active = false;\r\n                        this.currentScore += 1;\r\n                        this.redScoreLabel.setNumber(this.currentScore);\r\n                        this.blueScoreLabel.setNumber(this.currentScore);\r\n                        this.moveSpeed = 100 + Math.floor((this.currentScore / 10)) * 25;\r\n\r\n                    }\r\n                    cc.find(\"b\" + i, this.BallParent).active = false;\r\n\r\n                    this.setBall(i, 0);\r\n                }\r\n                else {\r\n                    if (cc.find(\"b\" + i, this.BallParent).active) {\r\n                        var hitObj = cc.find(\"b\" + i, this.BallParent);\r\n                        if (hitObj.position.sub(this.Ship.position).mag() <= 100) {//判断距离\r\n                            if (hitObj.getComponent(cc.Sprite).spriteFrame == this.ballSprites[0])//hit coin\r\n                            {\r\n                                this.currentScore += 1;\r\n                                this.redScoreLabel.setNumber(this.currentScore);\r\n                                this.blueScoreLabel.setNumber(this.currentScore);\r\n                                this.moveSpeed = 100 + Math.floor((this.currentScore / 10)) * 25;\r\n                                // hitObj.x = 350 + tmpr;\r\n                                hitObj.active = false;\r\n                                // var tmpr = (Math.random() * 2 - 1) * 20;\r\n                                // \r\n\r\n                                this.setBall(i, 0);\r\n\r\n\r\n                            }\r\n                            else {// game over\r\n                                this.GameStatus = 2;\r\n                                this.SoundMGR.playOver();\r\n                                this.schedule(function () {\r\n                                    this.Ship.active = !this.Ship.active;\r\n                                }, 0.3);\r\n                                Global.GameData.CurrentCopScore = this.currentScore;\r\n                                Global.GameData.CurrentCopHistoryScore = Global.GameData.CopHistoryScore[1];\r\n                                \r\n                                if (this.currentScore > Global.GameData.CurrentCopHistoryScore) {\r\n                                    Global.GameData.CurrentCopHistoryScore = this.currentScore;\r\n                                    Global.GameData.CopHistoryScore[1] = this.currentScore;\r\n                                    Global.GameData.SaveCache();\r\n                                }\r\n                                this.scheduleOnce(function () {\r\n\r\n                                    this.GameResultNode.active = true;\r\n                                }, 1.5);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                cc.find(\"b\" + i, this.BallParent).x -= this.moveSpeed * dt;\r\n            }\r\n        }\r\n    },\r\n});\r\n"]}