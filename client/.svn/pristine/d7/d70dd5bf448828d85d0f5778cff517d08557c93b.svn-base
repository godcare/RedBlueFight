{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Game3/assets\\Scripts\\Control\\Games\\Game3\\Game3Control.js"],"names":["SoundManager","require","cc","Class","extends","Component","properties","SoundMGR","default","type","GameResultNode","Node","CountDownNode","PauseNode","RedPlayer","BluePlayer","RedFake","BlueFake","GameStatus","RoundInterval","safeOffsetY","rPos","bPos","bluePipeParent","redPipeParent","outY","safeY","deadY","notSafePipeY","safeX1","safeX2","pipePushY","pipeResetY","roundCount","redRightBtn","redLeftBtn","BlueLeftBtn","BlueRightBtn","isRedDead","isBlueDead","start","startAnimation","scheduleOnce","active","PrepareNextGame","x1","Math","floor","random","x2","rma","moveTo","Vec2","runAction","bma","i","rppa","find","toString","x","bppa","ShowBalls","getComponent","Button","enabled","pushStart","shakePipes","playShake","isAlive","y","height","playFart","playPush2","isDraw","playOver","Global","GameData","CurrentWinner","shakeCount","shakeMaxOffset","shakeInterval","isReverse","iflag","orY","obY","j","log","setBallPos","opacity","rboa","fadeTo","rfoa","bboa","bfoa","ballType","ballPos","event","customEventData"],"mappings":"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","file":"Game3Control.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Game3","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\nvar SoundManager = require(\"SoundManager\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        SoundMGR:\r\n        {\r\n            default: null,\r\n            type: SoundManager,\r\n        },\r\n        GameResultNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        CountDownNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        PauseNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        RedPlayer:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        BluePlayer:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        RedFake:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        BlueFake:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        GameStatus: 0,//0未开始，1开始了，2结束了\r\n        RoundInterval: 2,\r\n        safeOffsetY: 35,\r\n        rPos: 3,\r\n        bPos: 6,\r\n        bluePipeParent:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        redPipeParent:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        outY: 295,\r\n        safeY: 265,\r\n        deadY: 265,\r\n        notSafePipeY: -35,\r\n        safeX1: -1,\r\n        safeX2: -1,\r\n        pipePushY: 155,\r\n        pipeResetY: 50,\r\n        roundCount: 0,\r\n        redRightBtn:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        redLeftBtn:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        BlueLeftBtn:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        BlueRightBtn:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        isRedDead: false,\r\n        isBlueDead: false,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    start() {\r\n        this.startAnimation();\r\n    },\r\n\r\n    startAnimation() {\r\n        this.scheduleOnce(function () {\r\n            this.CountDownNode.active = true;\r\n        }, 0.5)\r\n        this.scheduleOnce(function () {\r\n\r\n            this.GameStatus = 1;\r\n            this.PauseNode.active = true;\r\n            this.PrepareNextGame();\r\n        }, 4.5);\r\n\r\n    },\r\n\r\n    PrepareNextGame() {\r\n        this.RedPlayer.active = false;\r\n        this.BluePlayer.active = false;\r\n        var x1 = Math.floor(Math.random() * 10);\r\n        while (x1 == this.rPos || x1 == this.bPos) {\r\n            x1 = Math.floor(Math.random() * 10);\r\n        }\r\n        var x2 = Math.floor(Math.random() * 10);\r\n        while (x2 == this.rPos || x2 == this.bPos || x2 == x1) {\r\n            x2 = Math.floor(Math.random() * 10);\r\n        }\r\n        this.safeX1 = x1;\r\n        this.safeX2 = x2;\r\n        var rma = cc.moveTo(0.3, new cc.Vec2(0, this.pipeResetY));\r\n        this.redPipeParent.runAction(rma);\r\n        var bma = cc.moveTo(0.3, new cc.Vec2(0, this.pipeResetY));\r\n        this.bluePipeParent.runAction(bma);\r\n        for (var i = 0; i < 10; i++) {\r\n            if (i == x1 || i == x2) {\r\n                var rppa = cc.moveTo(0.3, new cc.Vec2(cc.find(i.toString(), this.redPipeParent).x, this.notSafePipeY));\r\n                var bppa = cc.moveTo(0.3, new cc.Vec2(cc.find(i.toString(), this.bluePipeParent).x, this.notSafePipeY));\r\n                cc.find(i.toString(), this.redPipeParent).runAction(rppa);\r\n                cc.find(i.toString(), this.bluePipeParent).runAction(bppa);\r\n            }\r\n            else {\r\n                var rppa = cc.moveTo(0.3, new cc.Vec2(cc.find(i.toString(), this.redPipeParent).x, 0));\r\n                var bppa = cc.moveTo(0.3, new cc.Vec2(cc.find(i.toString(), this.bluePipeParent).x, 0));\r\n                cc.find(i.toString(), this.redPipeParent).runAction(rppa);\r\n                cc.find(i.toString(), this.bluePipeParent).runAction(bppa);\r\n                // cc.find(i.toString(), this.redPipeParent).y = 0;\r\n                // cc.find(i.toString(), this.bluePipeParent).y = 0;\r\n            }\r\n        }\r\n        this.scheduleOnce(function () {\r\n            this.ShowBalls();\r\n            this.BlueRightBtn.getComponent(cc.Button).enabled = true;\r\n            this.BlueLeftBtn.getComponent(cc.Button).enabled = true;\r\n            this.redRightBtn.getComponent(cc.Button).enabled = true;\r\n            this.redLeftBtn.getComponent(cc.Button).enabled = true;\r\n        }, 0.8);\r\n        this.scheduleOnce(function () {\r\n            this.pushStart()\r\n        }, this.RoundInterval + 0.8);\r\n    },\r\n\r\n    pushStart() {\r\n        this.roundCount += 1;\r\n        this.RoundInterval -= this.roundCount * 0.15;\r\n        if (this.RoundInterval <= 0.7) {\r\n            this.RoundInterval = 0.7;\r\n        }\r\n        this.shakePipes(20, 5, 0.05, 1);\r\n        this.SoundMGR.playShake();\r\n        this.scheduleOnce(function () {\r\n            //push pipes\r\n            this.BlueRightBtn.getComponent(cc.Button).enabled = false;\r\n            this.BlueLeftBtn.getComponent(cc.Button).enabled = false;\r\n            this.redRightBtn.getComponent(cc.Button).enabled = false;\r\n            this.redLeftBtn.getComponent(cc.Button).enabled = false;\r\n            var rma = cc.moveTo(0.1, new cc.Vec2(0, this.pipePushY));\r\n            var bma = cc.moveTo(0.1, new cc.Vec2(0, this.pipePushY));\r\n            this.bluePipeParent.runAction(rma);\r\n            this.redPipeParent.runAction(bma);\r\n\r\n            this.RedFake.active = false;\r\n            this.BlueFake.active = false;\r\n            this.scheduleOnce(function () {\r\n                var isAlive = true;\r\n                if (this.rPos != this.safeX1 && this.rPos != this.safeX2) {//Red danger\r\n                    // this.RedPlayer.active = true;\r\n                    this.RedPlayer.y = this.deadY;\r\n                    this.RedPlayer.height = 10;\r\n                    this.isRedDead = true;\r\n                    isAlive = false;\r\n                    this.SoundMGR.playFart();\r\n                    // var rsa = cc.scaleTo(0.3, new cc.Vec2(1, 1));                \r\n                    // this.RedPlayer.runAction(rsa);\r\n                }\r\n                else {\r\n                    this.isRedDead = false;\r\n                }\r\n                if (this.bPos != this.safeX1 && this.bPos != this.safeX2) {//Blue danger\r\n                    // this.BluePlayer.active = true;\r\n                    this.BluePlayer.y = this.deadY;\r\n                    this.BluePlayer.height = 10;\r\n                    this.isBlueDead = true;\r\n                    this.SoundMGR.playFart();\r\n                    isAlive = false;\r\n                    // var bsa = cc.scaleTo(0.3, new cc.Vec2(1, 1));\r\n                    // this.BluePlayer.runAction(bsa);\r\n                }\r\n                else {\r\n                    this.isBlueDead = false;\r\n                }\r\n                if (isAlive) {\r\n                    this.SoundMGR.playPush2();\r\n                }\r\n            }, 0.05);\r\n        }, 1.1);\r\n\r\n        this.scheduleOnce(function () {\r\n            this.shakePipes(10, 5, 0.05, -1);\r\n        }, 1.25);\r\n\r\n        this.scheduleOnce(function () {\r\n            var isDraw = false;\r\n            if (this.isBlueDead && this.isRedDead) {\r\n                isDraw = true;\r\n                this.PrepareNextGame();\r\n            }\r\n            else if (!this.isBlueDead && !this.isRedDead) {\r\n                isDraw = true;\r\n                this.PrepareNextGame();\r\n            }\r\n            else {\r\n                if (this.isBlueDead) {\r\n                    this.GameStatus = 2;\r\n                    this.SoundMGR.playOver();\r\n                    Global.GameData.CurrentWinner = 0;\r\n                    this.GameResultNode.active = true;\r\n\r\n                }\r\n                else if (this.isRedDead) {\r\n                    this.GameStatus = 2;\r\n                    this.SoundMGR.playOver();\r\n                    Global.GameData.CurrentWinner = 1;\r\n                    this.GameResultNode.active = true;\r\n                }\r\n            }\r\n        }, 2);\r\n        // this.scheduleOnce(function () {\r\n        //     this.shakePipes(20, 3, 0.05, 1);\r\n        // }, this.RoundInterval);\r\n    },\r\n\r\n    shakePipes(shakeCount, shakeMaxOffset, shakeInterval, isReverse) {\r\n\r\n        if (isReverse == 1) {\r\n            var iflag = 1;\r\n            var orY = this.redPipeParent.y;\r\n            var obY = this.bluePipeParent.y;\r\n            var j = 0;\r\n            for (var i = 0; i < shakeCount; i++) {\r\n\r\n                this.scheduleOnce(function () {\r\n                    iflag *= -1;\r\n                    j += 1;\r\n                    cc.log(j);\r\n                    var rma = cc.moveTo(shakeInterval, new cc.Vec2(0, orY + (shakeMaxOffset * iflag * (j + 1) / shakeCount)));\r\n                    var bma = cc.moveTo(shakeInterval, new cc.Vec2(0, obY + (shakeMaxOffset * iflag * (j + 1) / shakeCount)));\r\n                    this.redPipeParent.runAction(rma);\r\n                    this.bluePipeParent.runAction(bma);\r\n\r\n                }, i * shakeInterval);\r\n            }\r\n        }\r\n        else {\r\n            var iflag = 1;\r\n            var orY = this.redPipeParent.y;\r\n            var obY = this.bluePipeParent.y;\r\n            var j = 0;\r\n            for (var i = 0; i < shakeCount; i++) {\r\n                cc.log(\"shake reverse\");\r\n                this.scheduleOnce(function () {\r\n                    iflag *= -1;\r\n                    j += 1;\r\n                    // cc.log((i));\r\n                    // cc.log(shakeMaxOffset * iflag * (shakeCount - i) / shakeCount);\r\n                    var rma = cc.moveTo(shakeInterval, new cc.Vec2(0, orY + (shakeMaxOffset * iflag * (shakeCount - j) / shakeCount)));\r\n                    var bma = cc.moveTo(shakeInterval, new cc.Vec2(0, obY + (shakeMaxOffset * iflag * (shakeCount - j) / shakeCount)));\r\n                    this.redPipeParent.runAction(rma);\r\n                    this.bluePipeParent.runAction(bma);\r\n\r\n                }, i * shakeInterval);\r\n            }\r\n        }\r\n    },\r\n\r\n    ShowBalls() {\r\n        this.setBallPos(0, this.rPos);\r\n        this.setBallPos(1, this.bPos);\r\n        this.RedPlayer.active = true;\r\n        this.BluePlayer.active = true;\r\n        this.RedFake.active = true;\r\n        this.BlueFake.active = true;\r\n        this.RedPlayer.opacity = 0;\r\n        this.BluePlayer.opacity = 0;\r\n        this.RedFake.opacity = 0;\r\n        this.BlueFake.opacity = 0;\r\n        this.BluePlayer.height = 104;\r\n        this.RedPlayer.height = 104;\r\n        var rboa = cc.fadeTo(0.3, 255);\r\n        var rfoa = cc.fadeTo(0.3, 120);\r\n        var bboa = cc.fadeTo(0.3, 255);\r\n        var bfoa = cc.fadeTo(0.3, 120);\r\n        this.RedPlayer.runAction(rboa);\r\n        this.BluePlayer.runAction(bboa);\r\n        this.RedFake.runAction(rfoa);\r\n        this.BlueFake.runAction(bfoa);\r\n    },\r\n\r\n    setBallPos(ballType, ballPos) {\r\n        if (ballType == 0)//red\r\n        {\r\n            this.RedPlayer.x = cc.find(ballPos.toString(), this.redPipeParent).x;\r\n            if (this.safeX1 != ballPos && this.safeX2 != ballPos) {\r\n                this.RedPlayer.y = this.outY;\r\n            }\r\n            else {\r\n                this.RedPlayer.y = this.safeY;\r\n            }\r\n            this.RedFake.x = cc.find(ballPos.toString(), this.bluePipeParent).x;\r\n            if (this.safeX1 != ballPos && this.safeX2 != ballPos) {\r\n                this.RedFake.y = this.outY;\r\n            }\r\n            else {\r\n                this.RedFake.y = this.safeY;\r\n            }\r\n\r\n        }\r\n        else {\r\n            this.BluePlayer.x = cc.find(ballPos.toString(), this.bluePipeParent).x;\r\n            if (this.safeX1 != ballPos && this.safeX2 != ballPos) {\r\n                this.BluePlayer.y = this.outY;\r\n            }\r\n            else {\r\n                this.BluePlayer.y = this.safeY;\r\n            }\r\n            this.BlueFake.x = cc.find(ballPos.toString(), this.redPipeParent).x;\r\n            if (this.safeX1 != ballPos && this.safeX2 != ballPos) {\r\n                this.BlueFake.y = this.outY;\r\n            }\r\n            else {\r\n                this.BlueFake.y = this.safeY;\r\n            }\r\n        }\r\n    },\r\n\r\n    onRedMove(event, customEventData) {\r\n        cc.log(\"red move:\" + customEventData);\r\n        if (customEventData == \"-1\") {\r\n            if (this.rPos > 0) {\r\n                if ((this.rPos - 1) != this.bPos) {\r\n                    this.rPos -= 1;\r\n                }\r\n                else if (this.rPos - 2 >= 0) {\r\n                    this.rPos -= 2;\r\n                }\r\n                this.setBallPos(0, this.rPos);\r\n            }\r\n        }\r\n        else {\r\n            if (this.rPos < 9) {\r\n                if ((this.rPos + 1) != this.bPos) {\r\n                    this.rPos += 1;\r\n                }\r\n                else if (this.rPos + 2 <= 9) {\r\n                    this.rPos += 2;\r\n                }\r\n                this.setBallPos(0, this.rPos);\r\n            }\r\n        }\r\n    },\r\n\r\n    onBlueMove(event, customEventData) {\r\n        if (customEventData == -1) {\r\n            if (this.bPos > 0) {\r\n                if ((this.bPos - 1) != this.rPos) {\r\n                    this.bPos -= 1;\r\n                }\r\n                else if (this.bPos - 2 >= 0) {\r\n                    this.bPos -= 2;\r\n                }\r\n                this.setBallPos(1, this.bPos);\r\n            }\r\n        }\r\n        else {\r\n            if (this.bPos < 9) {\r\n                if ((this.bPos + 1) != this.rPos) {\r\n                    this.bPos += 1;\r\n                }\r\n                else if (this.bPos + 2 <= 9) {\r\n                    this.bPos += 2;\r\n                }\r\n                this.setBallPos(1, this.bPos);\r\n            }\r\n        }\r\n    },\r\n    // update (dt) {},\r\n});\r\n"]}