{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Game1/assets\\Scripts\\Control\\Games\\Game1\\Game1Control.js"],"names":["DragMove","require","SoundManager","cc","Class","extends","Component","properties","SoundMGR","default","type","RedPlayer","Node","BluePlayer","GameStatus","BallSpriteWhenRed","SpriteFrame","BallSpriteWhenBlue","GameResultNode","CountDownNode","PauseNode","Ball","offsetY","onLoad","director","getPhysicsManager","enabled","start","startAnimation","scheduleOnce","active","getComponent","RigidBody","linearVelocity","Vec2","angularVelocity","onBallHit","hitTarget","log","toString","Sprite","spriteFrame","playRebounce2","playOver","Global","GameData","CurrentWinner"],"mappings":"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","file":"Game1Control.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Game1","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\nvar DragMove = require(\"Game1DragMove\");\r\nvar SoundManager = require(\"SoundManager\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        SoundMGR:\r\n        {\r\n            default: null,\r\n            type: SoundManager,\r\n        },\r\n        RedPlayer:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        BluePlayer:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        GameStatus: 0,//0未开始，1开始了，2结束了\r\n        BallSpriteWhenRed:\r\n        {\r\n            default: null,\r\n            type: cc.SpriteFrame,\r\n        },\r\n        BallSpriteWhenBlue:\r\n        {\r\n            default: null,\r\n            type: cc.SpriteFrame,\r\n        },\r\n\r\n        GameResultNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        CountDownNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        PauseNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        Ball:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        offsetY: 1.1,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n    onLoad() {\r\n        cc.director.getPhysicsManager().enabled = true;\r\n\r\n    },\r\n\r\n    start() {\r\n        this.startAnimation();\r\n    },\r\n\r\n    startAnimation() {\r\n        this.scheduleOnce(function () {\r\n            this.CountDownNode.active = true;\r\n        }, 0.5)\r\n        this.scheduleOnce(function () {\r\n            this.RedPlayer.getComponent(DragMove).enabled = true;\r\n            this.BluePlayer.getComponent(DragMove).enabled = true;\r\n            this.GameStatus = 1;\r\n            this.PauseNode.active = true;\r\n            this.Ball.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(2, 800);\r\n            this.Ball.getComponent(cc.RigidBody).angularVelocity = 5;\r\n        }, 3.5);\r\n\r\n    },\r\n\r\n    onBallHit(hitTarget) {\r\n\r\n        cc.log(\"Game Control Detect Hit:\" + hitTarget.toString());\r\n        if (hitTarget == \"RedPlayer\") {\r\n            this.Ball.getComponent(cc.Sprite).spriteFrame = this.BallSpriteWhenRed;\r\n            // this.Ball.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(this.Ball.getComponent(cc.RigidBody).linearVelocity.x, this.Ball.getComponent(cc.RigidBody).linearVelocity.offsetY * this.offsetY);\r\n            this.SoundMGR.playRebounce2();\r\n        }\r\n        else if (hitTarget == \"BluePlayer\") {\r\n            this.Ball.getComponent(cc.Sprite).spriteFrame = this.BallSpriteWhenBlue;\r\n            // this.Ball.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(this.Ball.getComponent(cc.RigidBody).linearVelocity.x, this.Ball.getComponent(cc.RigidBody).linearVelocity.offsetY * this.offsetY);\r\n            this.SoundMGR.playRebounce2();\r\n        }\r\n        else if (hitTarget == \"Top\") {\r\n            //Red win\r\n            cc.log(\"Red Win\");\r\n\r\n            this.GameStatus = 2;\r\n            this.SoundMGR.playOver();\r\n            this.RedPlayer.getComponent(DragMove).enabled = false;\r\n            this.BluePlayer.getComponent(DragMove).enabled = false;\r\n            this.scheduleOnce(function () {\r\n\r\n                Global.GameData.CurrentWinner = 0;\r\n                this.GameResultNode.active = true;\r\n            }, 0.5);\r\n        }\r\n        else if (hitTarget == \"Bottom\") {\r\n            //Blue win\r\n            cc.log(\"Blue Win\");\r\n            this.GameStatus = 2;\r\n            this.SoundMGR.playOver();\r\n            this.RedPlayer.getComponent(DragMove).enabled = false;\r\n            this.BluePlayer.getComponent(DragMove).enabled = false;\r\n            this.scheduleOnce(function () {\r\n\r\n                Global.GameData.CurrentWinner = 1;\r\n                this.GameResultNode.active = true;\r\n            }, 0.5);\r\n        }\r\n    }\r\n\r\n    // update (dt) {},\r\n});\r\n"]}