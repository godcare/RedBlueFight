{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Game22/assets\\Scripts\\Control\\Games\\Game22\\Game22Control.js"],"names":["MySpriteNumber","require","SoundManager","cc","Class","extends","Component","properties","SoundMGR","default","type","GameResultNode","Node","CountDownNode","PauseNode","GameStatus","BeltParent","BallParent","ballSprites","SpriteFrame","buttonSPrites","redScoreLabel","blueScoreLabel","redProgress","ProgressBar","blueProgress","moveSpeed","currentScore","TotalSeconds","tmpTimer","start","startAnimation","i","setBall","setCapsule","scheduleOnce","active","ballIndex","obj","find","tmpR","Math","floor","random","getComponent","Sprite","spriteFrame","placeIndex","numberIndex","scale","Vec2","checkSame","isSame","setNumber","onClickCapsule","event","customEventData","indexOf","clickIndex","substr","rightX","haveFit","abs","x","playBlob","sa","scaleTo","runAction","playRebounce","update","dt","progress","playOver","Global","GameData","CurrentCopScore","CurrentCopHistoryScore","CopHistoryScore","SaveCache","index"],"mappings":"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","file":"Game22Control.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Game22","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\nvar MySpriteNumber = require(\"MySpriteNumber\");\r\nvar SoundManager = require(\"SoundManager\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        SoundMGR:\r\n        {\r\n            default: null,\r\n            type: SoundManager,\r\n        },\r\n        GameResultNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        CountDownNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        PauseNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        GameStatus: 0,\r\n        BeltParent:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        BallParent:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        ballSprites:\r\n        {\r\n            default: [],\r\n            type: [cc.SpriteFrame],\r\n        },\r\n        buttonSPrites:\r\n        {\r\n            default: [],\r\n            type: [cc.SpriteFrame],\r\n        },\r\n        redScoreLabel:\r\n        {\r\n            default: null,\r\n            type: MySpriteNumber,\r\n        },\r\n        blueScoreLabel:\r\n        {\r\n            default: null,\r\n            type: MySpriteNumber,\r\n        },\r\n        redProgress:\r\n        {\r\n            default: null,\r\n            type: cc.ProgressBar,\r\n        },\r\n        blueProgress:\r\n        {\r\n            default: null,\r\n            type: cc.ProgressBar,\r\n        },\r\n        moveSpeed: 1,\r\n        currentScore: 0,\r\n        TotalSeconds: 45,\r\n        tmpTimer: 0,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n    start() {\r\n        this.startAnimation();\r\n    },\r\n    startAnimation() {\r\n        for (var i = 0; i < 5; i++) {\r\n            this.setBall(i);\r\n        }\r\n        for (var i = 0; i < 3; i++) {\r\n            this.setCapsule(0, i);\r\n            this.setCapsule(1, i);\r\n        }\r\n        this.scheduleOnce(function () {\r\n            this.CountDownNode.active = true;\r\n        }, 0.5)\r\n        this.scheduleOnce(function () {\r\n            this.GameStatus = 1;\r\n            this.PauseNode.active = true;\r\n\r\n        }, 4.5);\r\n\r\n    },\r\n\r\n    setBall(ballIndex) {\r\n        var obj = cc.find(\"ball\" + ballIndex, this.BallParent);\r\n        cc.find(\"top\", obj).active = false;\r\n        cc.find(\"bottom\", obj).active = false;\r\n        var tmpR = Math.floor(Math.random() * 2);\r\n        obj.getComponent(cc.Sprite).spriteFrame = this.ballSprites[tmpR];\r\n    },\r\n\r\n    setCapsule(placeIndex, numberIndex) {\r\n        if (placeIndex == 0)//top\r\n        {\r\n            var obj = cc.find(\"top\" + numberIndex, this.BallParent);\r\n            var tmpR = Math.floor(Math.random() * 2);\r\n            obj.getComponent(cc.Sprite).spriteFrame = this.buttonSPrites[tmpR];\r\n            obj.scale = new cc.Vec2(1, 1);\r\n            obj.active = true;\r\n        }\r\n        else {\r\n            var obj = cc.find(\"bottom\" + numberIndex, this.BallParent);\r\n            var tmpR = Math.floor(Math.random() * 2);\r\n            obj.getComponent(cc.Sprite).spriteFrame = this.buttonSPrites[tmpR];\r\n            obj.scale = new cc.Vec2(1, 1);\r\n            obj.active = true;\r\n        }\r\n    },\r\n\r\n    checkSame(ballIndex) {\r\n\r\n        var obj = cc.find(\"ball\" + ballIndex, this.BallParent);\r\n        if (cc.find(\"bottom\", obj).active == true && cc.find(\"top\", obj).active) {\r\n            if (cc.find(\"top\", obj).getComponent(cc.Sprite).spriteFrame == cc.find(\"bottom\", obj).getComponent(cc.Sprite).spriteFrame) {\r\n                //判断是否和球的颜色一致\r\n                var isSame = false;\r\n                if (obj.getComponent(cc.Sprite).spriteFrame == this.ballSprites[0] && cc.find(\"top\", obj).getComponent(cc.Sprite).spriteFrame == this.buttonSPrites[0]) {\r\n                    isSame = true;\r\n                }\r\n                else if (obj.getComponent(cc.Sprite).spriteFrame == this.ballSprites[1] && cc.find(\"top\", obj).getComponent(cc.Sprite).spriteFrame == this.buttonSPrites[1]) {\r\n                    isSame = true;\r\n                }\r\n                if (isSame) {\r\n                    this.currentScore += 1;\r\n                    this.redScoreLabel.setNumber(this.currentScore);\r\n                    this.blueScoreLabel.setNumber(this.currentScore);\r\n                }\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n\r\n    onClickCapsule(event, customEventData) {\r\n        if (this.GameStatus == 1) {\r\n            if (customEventData.indexOf(\"top\") != -1) {\r\n                //top click\r\n                var clickIndex = customEventData.substr(3, 1);\r\n                // cc.log(\"click:\" + clickIndex);\r\n                var rightX = (clickIndex - 1) * 200;\r\n                var haveFit = false;\r\n\r\n                for (var i = 0; i < 5; i++) {\r\n                    if (Math.abs(cc.find(\"ball\" + i, this.BallParent).x - rightX) <= 40) {\r\n                        var obj = cc.find(\"ball\" + i, this.BallParent);\r\n                        if (cc.find(\"top\", obj).active != true) {\r\n                            haveFit = true;\r\n                            this.SoundMGR.playBlob();\r\n                            var sa = cc.scaleTo(0.5, 0, 0);\r\n                            cc.find(customEventData, this.BallParent).runAction(sa);\r\n\r\n                            cc.find(\"top\", obj).getComponent(cc.Sprite).spriteFrame = cc.find(customEventData, this.BallParent).getComponent(cc.Sprite).spriteFrame;\r\n                            cc.find(\"top\", obj).active = true;\r\n                            this.checkSame(i);\r\n                            this.scheduleOnce(function () {\r\n                                this.setCapsule(0, clickIndex);\r\n                            }, 1)\r\n                            break;\r\n                        }\r\n\r\n\r\n                    }\r\n                }\r\n                if (!haveFit) {\r\n                    this.SoundMGR.playRebounce();\r\n                }\r\n            }\r\n            else {\r\n                var clickIndex = customEventData.substr(6, 1);\r\n                // cc.log(\"click:\" + clickIndex);\r\n                var rightX = (clickIndex - 1) * 200;\r\n                var haveFit = false;\r\n\r\n                for (var i = 0; i < 5; i++) {\r\n                    if (Math.abs(cc.find(\"ball\" + i, this.BallParent).x - rightX) <= 40) {\r\n\r\n                        var obj = cc.find(\"ball\" + i, this.BallParent);\r\n                        if (cc.find(\"bottom\", obj).active != true) {\r\n                            haveFit = true;\r\n                            this.SoundMGR.playBlob();\r\n                            var sa = cc.scaleTo(0.5, 0, 0);\r\n                            cc.find(customEventData, this.BallParent).runAction(sa);\r\n                            cc.find(\"bottom\", obj).getComponent(cc.Sprite).spriteFrame = cc.find(customEventData, this.BallParent).getComponent(cc.Sprite).spriteFrame;\r\n                            cc.find(\"bottom\", obj).active = true;\r\n                            this.checkSame(i);\r\n                            this.scheduleOnce(function () {\r\n                                this.setCapsule(1, clickIndex);\r\n                            }, 1)\r\n                            break;\r\n                        }\r\n\r\n\r\n                    }\r\n                }\r\n                if (!haveFit) {\r\n                    this.SoundMGR.playRebounce();\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n\r\n    update(dt) {\r\n        if (this.GameStatus == 1) {\r\n            //update timer\r\n            if (this.tmpTimer <= this.TotalSeconds) {\r\n                this.tmpTimer += dt;\r\n                this.redProgress.progress = (this.TotalSeconds - this.tmpTimer) / this.TotalSeconds;\r\n                this.blueProgress.progress = (this.TotalSeconds - this.tmpTimer) / this.TotalSeconds;\r\n            }\r\n            else {\r\n                this.GameStatus = 2;\r\n                this.SoundMGR.playOver();\r\n                Global.GameData.CurrentCopScore = this.currentScore;\r\n                Global.GameData.CurrentCopHistoryScore = Global.GameData.CopHistoryScore[0];\r\n                if(this.currentScore>Global.GameData.CurrentCopHistoryScore)\r\n                {\r\n                    Global.GameData.CurrentCopHistoryScore = this.currentScore;\r\n                    Global.GameData.CopHistoryScore[0] = this.currentScore;\r\n                    Global.GameData.SaveCache();\r\n                }\r\n                this.scheduleOnce(function () {\r\n                    this.GameResultNode.active = true;\r\n                }, 0.5);\r\n            }\r\n\r\n            for (var i = 0; i < 3; i++) {\r\n\r\n                if (cc.find(\"Part\" + i, this.BeltParent).x <= -1000) {\r\n                    var index = i - 1;\r\n                    if (i - 1 < 0) {\r\n                        index = 2;\r\n                    }\r\n                    cc.find(\"Part\" + i, this.BeltParent).x = cc.find(\"Part\" + index, this.BeltParent).x + 815;\r\n                }\r\n                cc.find(\"Part\" + i, this.BeltParent).x -= this.moveSpeed * dt;\r\n            }\r\n            for (var i = 0; i < 5; i++) {\r\n\r\n                if (cc.find(\"ball\" + i, this.BeltParent).x <= -600) {\r\n                    var index = i - 1;\r\n                    if (i - 1 < 0) {\r\n                        index = 4;\r\n                    }\r\n                    cc.find(\"ball\" + i, this.BallParent).x = cc.find(\"ball\" + index, this.BallParent).x + 200;\r\n                    this.setBall(i);\r\n                }\r\n                cc.find(\"ball\" + i, this.BallParent).x -= this.moveSpeed * dt;\r\n            }\r\n        }\r\n    },\r\n});\r\n"]}