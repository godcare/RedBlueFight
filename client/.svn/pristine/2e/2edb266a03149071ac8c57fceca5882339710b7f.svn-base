{"version":3,"sources":["Game13Control.js"],"names":["SoundManager","require","cc","Class","extends","Component","properties","SoundMGR","default","type","GameResultNode","Node","CountDownNode","PauseNode","GameStatus","redBall","blueBall","isJumpStart","onLoad","director","getPhysicsManager","enabled","start","startAnimation","scheduleOnce","active","OnTouchPanelStart","touchName","jumpBall","log","getComponent","RigidBody","gravityScale","linearVelocity","Vec2","OnBallHit","ballName","hitName","y","playOver","schedule","Global","GameData","CurrentWinner","ballIndex","x"],"mappings":"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","file":"Game13Control.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Game13","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\nvar SoundManager = require(\"SoundManager\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        SoundMGR:\r\n        {\r\n            default: null,\r\n            type: SoundManager,\r\n        },\r\n        GameResultNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        CountDownNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        PauseNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        GameStatus: 0,//0未开始，1开始了，2结束了\r\n        redBall:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        blueBall:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        isJumpStart: false,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        cc.director.getPhysicsManager().enabled = true;\r\n    },\r\n\r\n    start() {\r\n        // this.redScoreTotalNumber.setNumber(20);\r\n        this.startAnimation();\r\n\r\n    },\r\n    startAnimation() {\r\n\r\n        this.scheduleOnce(function () {\r\n            this.CountDownNode.active = true;\r\n        }, 0.5)\r\n        this.scheduleOnce(function () {\r\n            this.GameStatus = 1;\r\n            this.PauseNode.active = true;\r\n        }, 4.5);\r\n\r\n    },\r\n\r\n    OnTouchPanelStart(touchName) {\r\n        if (this.GameStatus == 1) {\r\n            if (this.isJumpStart) {\r\n                if (touchName == \"redTouch\") {\r\n                    this.jumpBall(0);\r\n                }\r\n                else if (touchName == \"blueTouch\") {\r\n                    this.jumpBall(1);\r\n                }\r\n            }\r\n            else {\r\n                cc.log(touchName);\r\n                this.isJumpStart = true;\r\n                this.redBall.getComponent(cc.RigidBody).gravityScale = 1;\r\n                this.blueBall.getComponent(cc.RigidBody).gravityScale = -1;\r\n                this.redBall.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(300, 0);\r\n                this.blueBall.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(-300, 0);\r\n                this.jumpBall(0);\r\n                this.jumpBall(1);\r\n            }\r\n        }\r\n\r\n\r\n    },\r\n\r\n    OnBallHit(ballName, hitName) {\r\n        if (ballName == \"redBall\") {\r\n            if (hitName == \"Left\") {\r\n                this.redBall.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(300, this.redBall.getComponent(cc.RigidBody).linearVelocity.y);\r\n            }\r\n            else if (hitName == \"Right\") {\r\n                this.redBall.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(-300, this.redBall.getComponent(cc.RigidBody).linearVelocity.y);\r\n            }\r\n            else if (hitName == \"Danger\") {\r\n                this.GameStatus = 2;\r\n                this.redBall.getComponent(cc.RigidBody).gravityScale = 0;\r\n                this.blueBall.getComponent(cc.RigidBody).gravityScale = 0;\r\n                this.redBall.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(0, 0);\r\n                this.blueBall.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(0, 0);\r\n                this.SoundMGR.playOver();\r\n                this.schedule(function () {\r\n                    this.redBall.active = !this.redBall.active;\r\n                }, 0.3);\r\n                this.scheduleOnce(function () {\r\n                    Global.GameData.CurrentWinner = 1;\r\n                    this.GameResultNode.active = true;\r\n                }, 1.5);\r\n            }\r\n        }\r\n        else if (ballName == \"blueBall\") {\r\n            if (hitName == \"Left\") {\r\n                this.blueBall.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(300, this.blueBall.getComponent(cc.RigidBody).linearVelocity.y);\r\n            }\r\n            else if (hitName == \"Right\") {\r\n                this.blueBall.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(-300, this.blueBall.getComponent(cc.RigidBody).linearVelocity.y);\r\n            }\r\n            else if (hitName == \"Danger\") {\r\n                this.GameStatus = 2;\r\n                this.redBall.getComponent(cc.RigidBody).gravityScale = 0;\r\n                this.blueBall.getComponent(cc.RigidBody).gravityScale = 0;\r\n                this.redBall.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(0, 0);\r\n                this.blueBall.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(0, 0);\r\n                this.SoundMGR.playOver();\r\n                this.schedule(function () {\r\n                    this.blueBall.active = !this.blueBall.active;\r\n                }, 0.3);\r\n                this.scheduleOnce(function () {\r\n                    Global.GameData.CurrentWinner = 0;\r\n                    this.GameResultNode.active = true;\r\n                }, 1.5);\r\n            }\r\n        }\r\n    },\r\n\r\n    jumpBall(ballIndex) {\r\n        if (ballIndex == 0) {\r\n            this.redBall.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(this.redBall.getComponent(cc.RigidBody).linearVelocity.x, 300);\r\n        }\r\n        else if (ballIndex == 1) {\r\n            this.blueBall.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(this.blueBall.getComponent(cc.RigidBody).linearVelocity.x, -300);\r\n        }\r\n    }\r\n    // update (dt) {},\r\n});\r\n"]}