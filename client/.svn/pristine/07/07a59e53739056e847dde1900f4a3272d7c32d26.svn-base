{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Game6/assets\\Scripts\\Control\\Games\\Game6\\Game6Control.js"],"names":["cc","Class","extends","Component","properties","GameResultNode","default","type","Node","CountDownNode","PauseNode","RedBallParent","BlueBallParent","RedBallPres","BlueBallPres","UnTouchList","redScoreLabel","Label","blueScoreLabel","redIndex","blueIndex","redScore","blueScore","moveDelta","Vec2","TotalSeconds","tmpTimer","redProgress","ProgressBar","blueProgress","onLoad","director","getPhysicsManager","enabled","update","dt","GameStatus","progress","scheduleOnce","Global","GameData","CurrentWinner","active","start","startAnimation","SpawnNewBall","onBallHit","selfName","otherName","log","find","destroy","obj","getComponent","RigidBody","linearVelocity","indexOf","push","AddScore","DestroyBall","addIndex","string","toString","bIndex","rd","Math","floor","random","newObj","instantiate","name","parent","setPosition","position"],"mappings":"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","file":"Game6Control.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Game6","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        GameResultNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        CountDownNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        PauseNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        RedBallParent:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        BlueBallParent:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        RedBallPres:\r\n        {\r\n            default: [],\r\n            type: [cc.Node],\r\n        },\r\n        BlueBallPres:\r\n        {\r\n            default: [],\r\n            type: [cc.Node],\r\n        },\r\n        UnTouchList:\r\n        {\r\n            default: [],\r\n        },\r\n        redScoreLabel:\r\n        {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        blueScoreLabel:\r\n        {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        redIndex: 10000,//生成球的起始编号\r\n        blueIndex: 50000,\r\n        redScore: 0,\r\n        blueScore: 0,\r\n        moveDelta:\r\n        {\r\n            default: new cc.Vec2(),\r\n\r\n        },\r\n        TotalSeconds: 30,\r\n        tmpTimer: 0,\r\n        redProgress:\r\n        {\r\n            default: null,\r\n            type: cc.ProgressBar,\r\n        },\r\n        blueProgress:\r\n        {\r\n            default: null,\r\n            type: cc.ProgressBar,\r\n        },\r\n    },\r\n    onLoad() {\r\n        cc.director.getPhysicsManager().enabled = true;\r\n\r\n    },\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n    update(dt) {\r\n        if (this.GameStatus == 1) {\r\n            if (this.tmpTimer <= this.TotalSeconds) {\r\n                this.tmpTimer += dt;\r\n                this.redProgress.progress = (this.TotalSeconds - this.tmpTimer) / this.TotalSeconds;\r\n                this.blueProgress.progress = (this.TotalSeconds - this.tmpTimer) / this.TotalSeconds;\r\n            }\r\n            else {\r\n                this.GameStatus = 2;\r\n                if (this.redScore > this.blueScore) {\r\n                    this.scheduleOnce(function () {\r\n                        Global.GameData.CurrentWinner = 0;\r\n                        this.GameResultNode.active = true;\r\n                    }, 2);\r\n                }\r\n                else if (this.redScore < this.blueScore) {\r\n                    this.scheduleOnce(function () {\r\n                        Global.GameData.CurrentWinner = 1;\r\n                        this.GameResultNode.active = true;\r\n                    }, 2);\r\n                }\r\n                else {\r\n                    this.scheduleOnce(function () {\r\n                        Global.GameData.CurrentWinner = 2;\r\n                        this.GameResultNode.active = true;\r\n                    }, 2);\r\n                }\r\n            }\r\n        }\r\n    },\r\n    start() {\r\n        this.startAnimation();\r\n    },\r\n    startAnimation() {\r\n        this.scheduleOnce(function () {\r\n            this.CountDownNode.active = true;\r\n        }, 0.5)\r\n        this.scheduleOnce(function () {\r\n            this.GameStatus = 1;\r\n            this.PauseNode.active = true;\r\n            this.SpawnNewBall(0);\r\n            this.SpawnNewBall(1);\r\n        }, 3.5);\r\n\r\n    },\r\n\r\n    onBallHit(selfName, otherName) {\r\n        cc.log(\"self:\" + selfName + \" other:\" + otherName);\r\n        if (otherName == \"Destroy\") {\r\n\r\n            if (selfName < 50000) {\r\n                cc.find(selfName, this.RedBallParent).destroy();\r\n                this.SpawnNewBall(0);\r\n            }\r\n            else {\r\n                cc.find(selfName, this.BlueBallParent).destroy();\r\n                this.SpawnNewBall(1);\r\n            }\r\n        }\r\n        if (otherName == \"RedEnter\") {\r\n            var obj = cc.find(selfName, this.RedBallParent);\r\n            obj.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(0, 0);\r\n            if (this.UnTouchList.indexOf(selfName) == -1) {\r\n                this.UnTouchList.push(selfName);\r\n            }\r\n            if (selfName < 50000) {\r\n                this.scheduleOnce(function () { this.SpawnNewBall(0) }, 1)\r\n                this.AddScore(0);\r\n            }\r\n            else {\r\n                this.scheduleOnce(function () { this.SpawnNewBall(1) }, 1)\r\n                this.AddScore(1);\r\n            }\r\n        }\r\n        if (otherName == \"BlueEnter\") {\r\n            var obj = cc.find(selfName, this.BlueBallParent);\r\n            obj.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(0, 0);\r\n            if (this.UnTouchList.indexOf(selfName) == -1) {\r\n                this.UnTouchList.push(selfName);\r\n            }\r\n            if (selfName < 50000) {\r\n                this.scheduleOnce(function () { this.SpawnNewBall(0) }, 1)\r\n                this.AddScore(0);\r\n            }\r\n            else {\r\n                this.scheduleOnce(function () { this.SpawnNewBall(1) }, 1)\r\n                this.AddScore(1);\r\n            }\r\n        }\r\n    },\r\n    DestroyBall() {\r\n\r\n    },\r\n    //addindex=0，红色加分\r\n    AddScore(addIndex) {\r\n        if (addIndex == 0) {\r\n            this.redScore += 1;\r\n            if (this.redScore < 10) {\r\n                this.redScoreLabel.string = \"0\" + this.redScore.toString();\r\n            }\r\n            else {\r\n                this.redScoreLabel.string = this.redScore.toString();\r\n            }\r\n        }\r\n        else {\r\n            this.blueScore += 1;\r\n            if (this.blueScore < 10) {\r\n                this.blueScoreLabel.string = \"0\" + this.blueScore.toString();\r\n            }\r\n            else {\r\n                this.blueScoreLabel.string = this.blueScore.toString();\r\n            }\r\n        }\r\n    },\r\n    // update (dt) {},\r\n    SpawnNewBall(bIndex) {\r\n        if (bIndex == 0)//spawn red\r\n        {\r\n            this.redIndex += 1;\r\n            var rd = Math.floor(Math.random() * 4);\r\n            cc.log(rd);\r\n            var newObj = cc.instantiate(this.RedBallPres[rd]);\r\n            newObj.active = true;\r\n            newObj.name = this.redIndex.toString();\r\n            newObj.parent = this.RedBallParent;\r\n            newObj.setPosition(0, 0);\r\n            // newObj.parent = this.RedBallParent;\r\n            // newObj.x = this.RedBallParent.x;\r\n            // newObj.y = this.RedBallParent.y;\r\n            cc.log(newObj.position);\r\n        }\r\n        else {\r\n            this.blueIndex += 1;\r\n            var rd = Math.floor(Math.random() * 4);\r\n            cc.log(rd);\r\n            var newObj = cc.instantiate(this.BlueBallPres[rd]);\r\n            newObj.active = true;\r\n            newObj.name = this.blueIndex.toString();\r\n            newObj.parent = this.BlueBallParent;\r\n            newObj.setPosition(0, 0);\r\n            // newObj.parent = this.RedBallParent;\r\n            // newObj.x = this.RedBallParent.x;\r\n            // newObj.y = this.RedBallParent.y;\r\n            cc.log(newObj.position);\r\n        }\r\n    }\r\n});\r\n"]}