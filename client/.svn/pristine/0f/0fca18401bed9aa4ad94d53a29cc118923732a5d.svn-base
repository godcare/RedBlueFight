{"version":3,"sources":["Game7Control.js"],"names":["MySpriteNumber","require","SoundManager","cc","Class","extends","Component","properties","SoundMGR","default","type","GameResultNode","Node","CountDownNode","PauseNode","RedScoreNumber","BlueScoreNumber","bmoveDelta","Vec2","rmoveDelta","UnTouchList","MovedList","Distance4","Distance3","Distance2","Distance1","CenterObj","redBalls","blueBalls","redIndex","blueIndex","checkInterval","tmpTimer","redScore","blueScore","isNewBallGenerated","GameStatus","update","dt","tmpRScore","tmpBScore","rStopFlag","bStopFlag","i","length","substr","obj","find","Math","abs","getComponent","RigidBody","linearVelocity","x","y","dist","sqrt","log","playScore","setNumber","playOver","scheduleOnce","Global","GameData","CurrentWinner","active","SpawnNewBall","onLoad","director","getPhysicsManager","enabled","start","startAnimation","push","name","newIndex","setPosition","opacity","splice","indexOf","playBlob","onBallHit","selfName","otherName"],"mappings":"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","file":"Game7Control.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Game7","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\nvar MySpriteNumber = require(\"MySpriteNumber\");\r\nvar SoundManager = require(\"SoundManager\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        SoundMGR:\r\n        {\r\n            default: null,\r\n            type: SoundManager,\r\n        },\r\n        GameResultNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        CountDownNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        PauseNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        RedScoreNumber:\r\n        {\r\n            default: null,\r\n            type: MySpriteNumber,\r\n        },\r\n        BlueScoreNumber:\r\n        {\r\n            default: null,\r\n            type: MySpriteNumber,\r\n        },\r\n        bmoveDelta:\r\n        {\r\n            default: new cc.Vec2(),\r\n        },\r\n        rmoveDelta:\r\n        {\r\n            default: new cc.Vec2(),\r\n        },\r\n        UnTouchList:\r\n        {\r\n            default: [],\r\n        },\r\n        MovedList:\r\n        {\r\n            default: [],\r\n        },\r\n        Distance4: 20,\r\n        Distance3: 57,\r\n        Distance2: 97,\r\n        Distance1: 150,\r\n        CenterObj:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        redBalls:\r\n        {\r\n            default: [],\r\n            type: [cc.Node],\r\n        },\r\n        blueBalls:\r\n        {\r\n            default: [],\r\n            type: [cc.Node],\r\n        },\r\n        redIndex: -1,\r\n        blueIndex: -1,\r\n        checkInterval: 0.2,\r\n        tmpTimer: 0,\r\n        redScore: 0,\r\n        blueScore: 0,\r\n        isNewBallGenerated: false,\r\n        GameStatus: 0,//0未开始，1开始了，2结束了\r\n    },\r\n    update(dt) {\r\n        if (this.GameStatus == 1) {\r\n            this.tmpTimer += dt;\r\n            if (this.tmpTimer >= this.checkInterval) {\r\n                this.tmpTimer = 0;\r\n                var tmpRScore = 0;\r\n                var tmpBScore = 0;\r\n                var rStopFlag = 1;\r\n                var bStopFlag = 1;\r\n                // cc.log(this.MovedList);\r\n                for (var i = 0; i < this.MovedList.length; i++) {\r\n                    if (this.MovedList[i].substr(0, 1) == \"r\") {\r\n                        var obj = cc.find(\"Canvas/GameCore/\" + this.MovedList[i]);\r\n                        // cc.log(obj.getComponent(cc.RigidBody).linearVelocity.x + \" \" + obj.getComponent(cc.RigidBody).linearVelocity.y);\r\n                        if (Math.abs(obj.getComponent(cc.RigidBody).linearVelocity.x) <= 0.5 && Math.abs(obj.getComponent(cc.RigidBody).linearVelocity.y) <= 0.5) {\r\n                            rStopFlag *= 1;\r\n                            obj.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(0, 0);\r\n                            // tmpR = obj.position;\r\n                            var dist = Math.sqrt(obj.x * obj.x + obj.y * obj.y);\r\n                            // cc.log(\"Dist: \" + dist + \" d1:\" + this.Distance1 + \" d2:\" + this.Distance2 + \" d3:\" + this.Distance3 + \" d4:\" + this.Distance4);\r\n                            if (dist <= this.Distance4) {\r\n                                tmpRScore += 4;\r\n                                // cc.log(\"4 p Dist: \" + dist + \"at distance:\" + this.Distance4);\r\n                            }\r\n                            else if (dist <= this.Distance3) {\r\n                                tmpRScore += 3;\r\n                                // cc.log(\"3 p Dist: \" + dist+ \"at distance:\" + this.Distance3);\r\n                            }\r\n                            else if (dist <= this.Distance2) {\r\n                                tmpRScore += 2;\r\n                                // cc.log(\"2 p Dist: \" + dist+ \"at distance:\" + this.Distance2);\r\n                            }\r\n                            else if (dist <= this.Distance1) {\r\n                                tmpRScore += 1;\r\n                                // cc.log(\"1 p Dist: \" + dist+ \"at distance:\" + this.Distance1);\r\n                            }\r\n                            cc.log(\"tmpRScore: \" + tmpRScore);\r\n                        }\r\n                        else {\r\n                            rStopFlag *= 0;\r\n                        }\r\n\r\n                    }\r\n                    else if (this.MovedList[i].substr(0, 1) == \"b\") {\r\n                        var obj = cc.find(\"Canvas/GameCore/\" + this.MovedList[i]);\r\n                        // var tmpB = 0;\r\n\r\n                        if (Math.abs(obj.getComponent(cc.RigidBody).linearVelocity.x) <= 0.5 && Math.abs(obj.getComponent(cc.RigidBody).linearVelocity.y) <= 0.5) {\r\n                            bStopFlag *= 1;\r\n                            obj.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(0, 0);\r\n                            var dist = Math.sqrt(obj.x * obj.x + obj.y * obj.y);\r\n                            if (dist <= this.Distance4) {\r\n                                tmpBScore += 4;\r\n                            }\r\n                            else if (dist <= this.Distance3) {\r\n                                tmpBScore += 3;\r\n                            }\r\n                            else if (dist <= this.Distance2) {\r\n                                tmpBScore += 2;\r\n                            }\r\n                            else if (dist <= this.Distance1) {\r\n                                tmpBScore += 1;\r\n                            }\r\n                        }\r\n                        else {\r\n                            bStopFlag *= 0;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (bStopFlag == 1 && rStopFlag == 1) {\r\n                    if (tmpRScore != this.redScore) {\r\n                        this.SoundMGR.playScore();\r\n                        this.redScore = tmpRScore;\r\n                        this.RedScoreNumber.setNumber(this.redScore);\r\n                    }\r\n                    if (tmpBScore != this.blueScore) {\r\n                        this.blueScore = tmpBScore;\r\n                        this.SoundMGR.playScore();\r\n                        this.BlueScoreNumber.setNumber(this.blueScore);\r\n                    }\r\n                    if (this.MovedList.length >= 8) {\r\n                        this.GameStatus = 2;\r\n                        this.SoundMGR.playOver();\r\n                        if (this.redScore > this.blueScore) {\r\n                            this.scheduleOnce(function () {\r\n                                Global.GameData.CurrentWinner = 0;\r\n                                this.GameResultNode.active = true;\r\n                            }, 1);\r\n                        }\r\n                        else if (this.redScore < this.blueScore) {\r\n                            this.scheduleOnce(function () {\r\n                                Global.GameData.CurrentWinner = 1;\r\n                                this.GameResultNode.active = true;\r\n                            }, 1);\r\n                        }\r\n                        else {\r\n                            this.scheduleOnce(function () {\r\n                                Global.GameData.CurrentWinner = 2;\r\n                                this.GameResultNode.active = true;\r\n                            }, 1);\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (this.isNewBallGenerated != true) {\r\n                            this.isNewBallGenerated = true;\r\n                            if (this.redIndex > this.blueIndex) {\r\n                                this.SpawnNewBall(1);\r\n                            }\r\n                            else {\r\n                                this.SpawnNewBall(0);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n    onLoad() {\r\n        cc.director.getPhysicsManager().enabled = true;\r\n\r\n    },\r\n\r\n    start() {\r\n        this.startAnimation();\r\n        for (var i = 0; i < this.redBalls.length; i++) {\r\n            this.UnTouchList.push(this.redBalls[i].name);\r\n        }\r\n        for (var i = 0; i < this.blueBalls.length; i++) {\r\n            this.UnTouchList.push(this.blueBalls[i].name);\r\n        }\r\n    },\r\n\r\n    startAnimation() {\r\n        this.scheduleOnce(function () {\r\n            this.CountDownNode.active = true;\r\n        }, 0.5)\r\n        this.scheduleOnce(function () {\r\n            this.GameStatus = 1;\r\n            this.PauseNode.active = true;\r\n            this.SpawnNewBall(0);\r\n        }, 4.5);\r\n\r\n    },\r\n\r\n    SpawnNewBall(newIndex) {\r\n        this.isNewBallGenerated = true;\r\n        cc.log(\"Spawn\" + newIndex);\r\n        if (newIndex == 0)//spawn red\r\n        {\r\n            if (this.redIndex < this.redBalls.length - 1) {\r\n                this.redIndex += 1;\r\n                this.redBalls[this.redIndex].setPosition(0, -560);\r\n                this.redBalls[this.redIndex].opacity = 255;\r\n                this.UnTouchList.splice(this.UnTouchList.indexOf(this.redBalls[this.redIndex].name), 1);\r\n                this.SoundMGR.playBlob();\r\n            }\r\n        }\r\n        else {\r\n            if (this.blueIndex < this.blueBalls.length - 1) {\r\n                this.blueIndex += 1;\r\n                this.blueBalls[this.blueIndex].setPosition(0, 560);\r\n                this.blueBalls[this.blueIndex].opacity = 255;\r\n                this.UnTouchList.splice(this.UnTouchList.indexOf(this.blueBalls[this.blueIndex].name), 1);\r\n                this.SoundMGR.playBlob();\r\n            }\r\n        }\r\n    },\r\n    onBallHit(selfName, otherName) {\r\n        // if (this.MovedList.indexOf(otherName) == -1) {\r\n        //     this.MovedList.push(otherName);\r\n        // }\r\n    },\r\n\r\n    start() {\r\n        this.startAnimation();\r\n    },\r\n    // update (dt) {},\r\n});\r\n"]}