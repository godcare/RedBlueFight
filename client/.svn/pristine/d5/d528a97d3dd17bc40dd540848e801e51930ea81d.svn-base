{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Game14/assets\\Scripts\\Control\\Games\\Game14\\Game14Control.js"],"names":["SoundManager","require","cc","Class","extends","Component","properties","SoundMGR","default","type","GameResultNode","Node","CountDownNode","PauseNode","GameStatus","redViruses","blueViruses","redCannon","blueCannon","bulletSpeed","redBullet","blueBullet","redParent","blueParent","redCount","blueCount","rIndex","bIndex","hitList","rotateSpeed","onLoad","director","getPhysicsManager","enabled","start","startAnimation","update","dt","scheduleOnce","active","initViruses","Shoot","schedule","i","r1","Math","random","r2","getComponent","RigidBody","linearVelocity","Vec2","OnTouchPanelStart","panelName","touchX","moveY","rotation","getChildren","length","x","y","newRed","instantiate","name","parent","newBlue","OnBulletHit","ballName","otherName","log","indexOf","playScore","find","destroy","push","playRebounce2","playOver","Global","GameData","CurrentWinner"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIA,eAAeC,QAAQ,cAAR,CAAnB;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,kBACA;AACIC,qBAAS,IADb;AAEIC,kBAAMT;AAFV,SAjBQ;AAqBRU,wBACA;AACIF,qBAAS,IADb;AAEIC,kBAAMP,GAAGS;AAFb,SAtBQ;AA0BRC,uBACA;AACIJ,qBAAS,IADb;AAEIC,kBAAMP,GAAGS;AAFb,SA3BQ;AA+BRE,mBACA;AACIL,qBAAS,IADb;AAEIC,kBAAMP,GAAGS;AAFb,SAhCQ;AAoCRG,oBAAY,CApCJ,EAoCM;AACdC,oBACA;AACIP,qBAAS,EADb;AAEIC,kBAAM,CAACP,GAAGS,IAAJ;AAFV,SAtCQ;AA0CRK,qBACA;AACIR,qBAAS,EADb;AAEIC,kBAAM,CAACP,GAAGS,IAAJ;AAFV,SA3CQ;AA+CRM,mBACA;AACIT,qBAAS,IADb;AAEIC,kBAAMP,GAAGS;AAFb,SAhDQ;AAoDRO,oBACA;AACIV,qBAAS,IADb;AAEIC,kBAAMP,GAAGS;AAFb,SArDQ;AAyDRQ,qBAAa,GAzDL;AA0DRC,mBACA;AACIZ,qBAAS,IADb;AAEIC,kBAAMP,GAAGS;AAFb,SA3DQ;AA+DRU,oBACA;AACIb,qBAAS,IADb;AAEIC,kBAAMP,GAAGS;AAFb,SAhEQ;AAoERW,mBACA;AACId,qBAAS,IADb;AAEIC,kBAAMP,GAAGS;AAFb,SArEQ;AAyERY,oBACA;AACIf,qBAAS,IADb;AAEIC,kBAAMP,GAAGS;AAFb,SA1EQ;AA8ERa,kBAAU,CA9EF;AA+ERC,mBAAW,CA/EH;AAgFRC,gBAAQ,CAhFA;AAiFRC,gBAAQ,CAjFA;AAkFRC,iBAAS,EAlFD;AAmFRC,qBAAa;AAnFL,KAHP;;AAyFL;;AAEAC,UA3FK,oBA2FI;AACL5B,WAAG6B,QAAH,CAAYC,iBAAZ,GAAgCC,OAAhC,GAA0C,IAA1C;AACH,KA7FI;AA+FLC,SA/FK,mBA+FG;AACJ;AACA,aAAKC,cAAL;AAEH,KAnGI;AAqGLC,UArGK,kBAqGEC,EArGF,EAqGM,CAEV,CAvGI;AAyGLF,kBAzGK,4BAyGY;;AAEb,aAAKG,YAAL,CAAkB,YAAY;AAC1B,iBAAK1B,aAAL,CAAmB2B,MAAnB,GAA4B,IAA5B;AACH,SAFD,EAEG,GAFH;AAGA,aAAKD,YAAL,CAAkB,YAAY;AAC1B,iBAAKxB,UAAL,GAAkB,CAAlB;AACA,iBAAKD,SAAL,CAAe0B,MAAf,GAAwB,IAAxB;AACA,iBAAKC,WAAL;AACA,iBAAKF,YAAL,CAAkB,YAAY;AAC1B,qBAAKG,KAAL;AACH,aAFD,EAEG,GAFH;AAGA,iBAAKC,QAAL,CAAc,YAAY;AACtB,oBAAI,KAAK5B,UAAL,IAAmB,CAAvB,EAA0B;AACtB,yBAAK2B,KAAL;AACH;AACJ,aAJD,EAIG,CAJH;AAMH,SAbD,EAaG,GAbH;AAeH,KA7HI;AA+HLD,eA/HK,yBA+HS;AACV,aAAK,IAAIG,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuBA,GAAvB,EAA4B;AACxB,gBAAIC,KAAKC,KAAKC,MAAL,KAAgB,GAAzB;AACA,gBAAIC,KAAKF,KAAKC,MAAL,KAAgB,GAAzB;AACA,gBAAI,KAAK/B,UAAL,CAAgB4B,CAAhB,KAAsB,IAA1B,EAAgC;AAC5B,qBAAK5B,UAAL,CAAgB4B,CAAhB,EAAmBK,YAAnB,CAAgC9C,GAAG+C,SAAnC,EAA8CC,cAA9C,GAA+D,IAAIhD,GAAGiD,IAAP,CAAYP,KAAK,GAAjB,EAAsBG,KAAK,GAA3B,CAA/D;AACA,qBAAKhC,UAAL,CAAgB4B,CAAhB,EAAmBJ,MAAnB,GAA4B,IAA5B;AACH;AACD,gBAAI,KAAKvB,WAAL,CAAiB2B,CAAjB,KAAuB,IAA3B,EAAiC;AAC7B,qBAAK3B,WAAL,CAAiB2B,CAAjB,EAAoBK,YAApB,CAAiC9C,GAAG+C,SAApC,EAA+CC,cAA/C,GAAgE,IAAIhD,GAAGiD,IAAP,CAAYP,KAAK,GAAjB,EAAsBG,KAAK,GAA3B,CAAhE;AACA,qBAAK/B,WAAL,CAAiB2B,CAAjB,EAAoBJ,MAApB,GAA6B,IAA7B;AACH;AACJ;AAEJ,KA7II;AA+ILa,qBA/IK,6BA+IaC,SA/Ib,EA+IwBC,MA/IxB,EA+IgCC,KA/IhC,EA+IuC;AACxC,YAAI,KAAKzC,UAAL,IAAmB,CAAvB,EAA0B;AACtB,gBAAIuC,aAAa,UAAjB,EAA6B;AACzB,oBAAI,KAAKpC,SAAL,CAAeuC,QAAf,IAA2B,CAAC,EAA5B,IAAkC,KAAKvC,SAAL,CAAeuC,QAAf,IAA2B,EAAjE,EAAqE;AACjE,wBAAIF,UAAU,GAAd,EAAmB;AACf,6BAAKrC,SAAL,CAAeuC,QAAf,IAA2BD,QAAQ,KAAK1B,WAAxC;AACH,qBAFD,MAGK;AACD,6BAAKZ,SAAL,CAAeuC,QAAf,IAA2BD,QAAQ,KAAK1B,WAAxC;AACH;;AAED,wBAAI,KAAKZ,SAAL,CAAeuC,QAAf,GAA0B,EAA9B,EAAkC;AAC9B,6BAAKvC,SAAL,CAAeuC,QAAf,GAA0B,EAA1B;AACH,qBAFD,MAGK,IAAI,KAAKvC,SAAL,CAAeuC,QAAf,GAA0B,CAAC,EAA/B,EAAmC;AACpC,6BAAKvC,SAAL,CAAeuC,QAAf,GAA0B,CAAC,EAA3B;AACH;AACJ;AAEJ,aAjBD,MAkBK,IAAIH,aAAa,WAAjB,EAA8B;AAC/B,oBAAI,KAAKnC,UAAL,CAAgBsC,QAAhB,IAA4B,GAA5B,IAAmC,KAAKtC,UAAL,CAAgBsC,QAAhB,IAA4B,GAAnE,EAAwE;AACpE,wBAAIF,UAAU,GAAd,EAAmB;AACf,6BAAKpC,UAAL,CAAgBsC,QAAhB,IAA4BD,QAAQ,KAAK1B,WAAzC;AACH,qBAFD,MAGK;AACD,6BAAKX,UAAL,CAAgBsC,QAAhB,IAA4BD,QAAQ,KAAK1B,WAAzC;AACH;;AAED,wBAAI,KAAKX,UAAL,CAAgBsC,QAAhB,GAA2B,GAA/B,EAAoC;AAChC,6BAAKtC,UAAL,CAAgBsC,QAAhB,GAA2B,GAA3B;AACH,qBAFD,MAGK,IAAI,KAAKtC,UAAL,CAAgBsC,QAAhB,GAA2B,GAA/B,EAAoC;AACrC,6BAAKtC,UAAL,CAAgBsC,QAAhB,GAA2B,GAA3B;AACH;AACJ;AACJ;AACJ;AACJ,KArLI;AAuLLf,SAvLK,mBAuLG;AACJ,YAAI,KAAKnB,SAAL,CAAemC,WAAf,CAA2BC,MAA3B,IAAqC,CAAzC,EAA4C;AACxC,iBAAKpC,SAAL,CAAeqC,CAAf,GAAmB,KAAK1C,SAAL,CAAe0C,CAAlC;AACA,iBAAKrC,SAAL,CAAesC,CAAf,GAAmB,KAAK3C,SAAL,CAAe2C,CAAlC;AACA,iBAAKtC,SAAL,CAAekC,QAAf,GAA0B,KAAKvC,SAAL,CAAeuC,QAAzC;AACA,gBAAIK,SAAS3D,GAAG4D,WAAH,CAAe,KAAK1C,SAApB,CAAb;AACA,iBAAKM,MAAL,IAAe,CAAf;AACAmC,mBAAOE,IAAP,GAAc,YAAY,KAAKrC,MAA/B;AACAmC,mBAAOG,MAAP,GAAgB,KAAK1C,SAArB;AACAuC,mBAAOF,CAAP,GAAW,CAAX;AACAE,mBAAOD,CAAP,GAAW,CAAX;AACAC,mBAAOtB,MAAP,GAAgB,IAAhB;AACH;AACD,YAAI,KAAKhB,UAAL,CAAgBkC,WAAhB,CAA4BC,MAA5B,IAAsC,CAA1C,EAA6C;AACzC,iBAAKnC,UAAL,CAAgBoC,CAAhB,GAAoB,KAAKzC,UAAL,CAAgByC,CAApC;AACA,iBAAKpC,UAAL,CAAgBqC,CAAhB,GAAoB,KAAK1C,UAAL,CAAgB0C,CAApC;AACA,iBAAKrC,UAAL,CAAgBiC,QAAhB,GAA2B,KAAKtC,UAAL,CAAgBsC,QAA3C;AACA,gBAAIS,UAAU/D,GAAG4D,WAAH,CAAe,KAAKzC,UAApB,CAAd;AACA,iBAAKM,MAAL,IAAe,CAAf;AACAsC,oBAAQF,IAAR,GAAe,YAAY,KAAKpC,MAAhC;AACAsC,oBAAQD,MAAR,GAAiB,KAAKzC,UAAtB;AACA0C,oBAAQN,CAAR,GAAY,CAAZ;AACAM,oBAAQL,CAAR,GAAY,CAAZ;AACAK,oBAAQ1B,MAAR,GAAiB,IAAjB;AACH;AACJ,KAhNI;AAkNL2B,eAlNK,uBAkNOC,QAlNP,EAkNiBC,SAlNjB,EAkN4B;AAC7BlE,WAAGmE,GAAH,CAAOF,WAAW,OAAX,GAAqBC,SAA5B;AACA,YAAI,KAAKtD,UAAL,IAAmB,CAAvB,EAA0B;AACtB,gBAAIqD,SAASG,OAAT,CAAiB,SAAjB,IAA8B,CAAC,CAA/B,IAAoC,KAAK1C,OAAL,CAAa0C,OAAb,CAAqBH,QAArB,KAAkC,CAAC,CAA3E,EAA8E;AAC1E,oBAAIC,UAAUE,OAAV,CAAkB,WAAlB,IAAiC,CAAC,CAAtC,EAAwC;AACxC;AACI,6BAAK/D,QAAL,CAAcgE,SAAd;AACArE,2BAAGsE,IAAH,CAAQ,qBAAqBJ,SAA7B,EAAwCK,OAAxC;AACA,4BAAIvE,GAAGsE,IAAH,CAAQL,QAAR,EAAkB,KAAK7C,SAAvB,KAAqC,IAAzC,EAA+C;AAC3CpB,+BAAGsE,IAAH,CAAQL,QAAR,EAAkB,KAAK7C,SAAvB,EAAkCmD,OAAlC;AACH;AACD,6BAAKhD,SAAL,IAAkB,CAAlB;AACA,6BAAKG,OAAL,CAAa8C,IAAb,CAAkBP,QAAlB;AACH,qBATD,MAUK,IAAIC,UAAUE,OAAV,CAAkB,UAAlB,IAAgC,CAAC,CAArC,EAAuC;AAC5C;AACI,6BAAK/D,QAAL,CAAcoE,aAAd;AACAzE,2BAAGsE,IAAH,CAAQ,qBAAqBJ,SAA7B,EAAwCK,OAAxC;AACA,4BAAIvE,GAAGsE,IAAH,CAAQL,QAAR,EAAkB,KAAK7C,SAAvB,KAAqC,IAAzC,EAA+C;AAC3CpB,+BAAGsE,IAAH,CAAQL,QAAR,EAAkB,KAAK7C,SAAvB,EAAkCmD,OAAlC;AACH;AACD,6BAAKjD,QAAL,IAAiB,CAAjB;AACA,6BAAKI,OAAL,CAAa8C,IAAb,CAAkBP,QAAlB;AACH;AACJ,aArBD,MAsBK,IAAIA,SAASG,OAAT,CAAiB,SAAjB,IAA8B,CAAC,CAA/B,IAAoC,KAAK1C,OAAL,CAAa0C,OAAb,CAAqBH,QAArB,KAAkC,CAAC,CAA3E,EAA8E;AAC/E,oBAAIC,UAAUE,OAAV,CAAkB,WAAlB,IAAiC,CAAC,CAAtC,EAAwC;AACxC;AACI,6BAAK/D,QAAL,CAAcoE,aAAd;AACAzE,2BAAGsE,IAAH,CAAQ,qBAAqBJ,SAA7B,EAAwCK,OAAxC;AACA,4BAAIvE,GAAGsE,IAAH,CAAQL,QAAR,EAAkB,KAAK5C,UAAvB,KAAsC,IAA1C,EAAgD;AAC5CrB,+BAAGsE,IAAH,CAAQL,QAAR,EAAkB,KAAK5C,UAAvB,EAAmCkD,OAAnC;AACH;AACD,6BAAKhD,SAAL,IAAkB,CAAlB;AACA,6BAAKG,OAAL,CAAa8C,IAAb,CAAkBP,QAAlB;AACH,qBATD,MAUK,IAAIC,UAAUE,OAAV,CAAkB,UAAlB,IAAgC,CAAC,CAArC,EAAuC;AAC5C;AACI,6BAAK/D,QAAL,CAAcgE,SAAd;AACArE,2BAAGsE,IAAH,CAAQ,qBAAqBJ,SAA7B,EAAwCK,OAAxC;AACA,4BAAIvE,GAAGsE,IAAH,CAAQL,QAAR,EAAkB,KAAK5C,UAAvB,KAAsC,IAA1C,EAAgD;AAC5CrB,+BAAGsE,IAAH,CAAQL,QAAR,EAAkB,KAAK5C,UAAvB,EAAmCkD,OAAnC;AACH;AACD,6BAAKjD,QAAL,IAAiB,CAAjB;AACA,6BAAKI,OAAL,CAAa8C,IAAb,CAAkBP,QAAlB;AACH;AACJ;;AAED,gBAAI,KAAK3C,QAAL,IAAiB,CAArB,EAAwB;AACpB,qBAAKV,UAAL,GAAkB,CAAlB;AACA,qBAAKP,QAAL,CAAcqE,QAAd;AACA,qBAAKtC,YAAL,CAAkB,YAAY;AAC1BuC,2BAAOC,QAAP,CAAgBC,aAAhB,GAAgC,CAAhC;AACA,yBAAKrE,cAAL,CAAoB6B,MAApB,GAA6B,IAA7B;AACH,iBAHD,EAGG,GAHH;AAIH,aAPD,MAQK,IAAI,KAAKd,SAAL,IAAkB,CAAtB,EAAyB;AAC1B,qBAAKX,UAAL,GAAkB,CAAlB;AACA,qBAAKP,QAAL,CAAcqE,QAAd;AACA,qBAAKtC,YAAL,CAAkB,YAAY;AAC1BuC,2BAAOC,QAAP,CAAgBC,aAAhB,GAAgC,CAAhC;AACA,yBAAKrE,cAAL,CAAoB6B,MAApB,GAA6B,IAA7B;AACH,iBAHD,EAGG,GAHH;AAIH;AACJ;AACJ;AAnRI,CAAT","file":"Game14Control.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Scripts\\Control\\Games\\Game14","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\nvar SoundManager = require(\"SoundManager\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        SoundMGR:\r\n        {\r\n            default: null,\r\n            type: SoundManager,\r\n        },\r\n        GameResultNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        CountDownNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        PauseNode:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        GameStatus: 0,//0未开始，1开始了，2结束了\r\n        redViruses:\r\n        {\r\n            default: [],\r\n            type: [cc.Node],\r\n        },\r\n        blueViruses:\r\n        {\r\n            default: [],\r\n            type: [cc.Node],\r\n        },\r\n        redCannon:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        blueCannon:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        bulletSpeed: 300,\r\n        redBullet:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        blueBullet:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        redParent:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        blueParent:\r\n        {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        redCount: 8,\r\n        blueCount: 8,\r\n        rIndex: 0,\r\n        bIndex: 0,\r\n        hitList: [],\r\n        rotateSpeed: 0.1,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        cc.director.getPhysicsManager().enabled = true;\r\n    },\r\n\r\n    start() {\r\n        // this.redScoreTotalNumber.setNumber(20);\r\n        this.startAnimation();\r\n\r\n    },\r\n\r\n    update(dt) {\r\n\r\n    },\r\n\r\n    startAnimation() {\r\n\r\n        this.scheduleOnce(function () {\r\n            this.CountDownNode.active = true;\r\n        }, 0.5)\r\n        this.scheduleOnce(function () {\r\n            this.GameStatus = 1;\r\n            this.PauseNode.active = true;\r\n            this.initViruses();\r\n            this.scheduleOnce(function () {\r\n                this.Shoot();\r\n            }, 0.5);\r\n            this.schedule(function () {\r\n                if (this.GameStatus == 1) {\r\n                    this.Shoot();\r\n                }\r\n            }, 3);\r\n\r\n        }, 4.5);\r\n\r\n    },\r\n\r\n    initViruses() {\r\n        for (var i = 0; i < 8; i++) {\r\n            var r1 = Math.random() - 0.5;\r\n            var r2 = Math.random() - 0.5;\r\n            if (this.redViruses[i] != null) {\r\n                this.redViruses[i].getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(r1 * 400, r2 * 400);\r\n                this.redViruses[i].active = true;\r\n            }\r\n            if (this.blueViruses[i] != null) {\r\n                this.blueViruses[i].getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(r1 * 400, r2 * 400);\r\n                this.blueViruses[i].active = true;\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    OnTouchPanelStart(panelName, touchX, moveY) {\r\n        if (this.GameStatus == 1) {\r\n            if (panelName == \"redTouch\") {\r\n                if (this.redCannon.rotation >= -45 && this.redCannon.rotation <= 45) {\r\n                    if (touchX <= 360) {\r\n                        this.redCannon.rotation += moveY * this.rotateSpeed;\r\n                    }\r\n                    else {\r\n                        this.redCannon.rotation -= moveY * this.rotateSpeed;\r\n                    }\r\n\r\n                    if (this.redCannon.rotation > 45) {\r\n                        this.redCannon.rotation = 45;\r\n                    }\r\n                    else if (this.redCannon.rotation < -45) {\r\n                        this.redCannon.rotation = -45;\r\n                    }\r\n                }\r\n\r\n            }\r\n            else if (panelName == \"blueTouch\") {\r\n                if (this.blueCannon.rotation >= 135 && this.blueCannon.rotation <= 225) {\r\n                    if (touchX <= 360) {\r\n                        this.blueCannon.rotation += moveY * this.rotateSpeed;\r\n                    }\r\n                    else {\r\n                        this.blueCannon.rotation -= moveY * this.rotateSpeed;\r\n                    }\r\n\r\n                    if (this.blueCannon.rotation > 225) {\r\n                        this.blueCannon.rotation = 225;\r\n                    }\r\n                    else if (this.blueCannon.rotation < 135) {\r\n                        this.blueCannon.rotation = 135;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    Shoot() {\r\n        if (this.redParent.getChildren.length == 0) {\r\n            this.redParent.x = this.redCannon.x;\r\n            this.redParent.y = this.redCannon.y;\r\n            this.redParent.rotation = this.redCannon.rotation;\r\n            var newRed = cc.instantiate(this.redBullet);\r\n            this.rIndex += 1;\r\n            newRed.name = \"rBullet\" + this.rIndex;\r\n            newRed.parent = this.redParent;\r\n            newRed.x = 0;\r\n            newRed.y = 0;\r\n            newRed.active = true;\r\n        }\r\n        if (this.blueParent.getChildren.length == 0) {\r\n            this.blueParent.x = this.blueCannon.x;\r\n            this.blueParent.y = this.blueCannon.y;\r\n            this.blueParent.rotation = this.blueCannon.rotation;\r\n            var newBlue = cc.instantiate(this.blueBullet);\r\n            this.bIndex += 1;\r\n            newBlue.name = \"bBullet\" + this.bIndex;\r\n            newBlue.parent = this.blueParent;\r\n            newBlue.x = 0;\r\n            newBlue.y = 0;\r\n            newBlue.active = true;\r\n        }\r\n    },\r\n\r\n    OnBulletHit(ballName, otherName) {\r\n        cc.log(ballName + \" hit \" + otherName);\r\n        if (this.GameStatus == 1) {\r\n            if (ballName.indexOf(\"rBullet\") > -1 && this.hitList.indexOf(ballName) == -1) {\r\n                if (otherName.indexOf(\"virusBlue\") > -1)//red hit blue\r\n                {\r\n                    this.SoundMGR.playScore();\r\n                    cc.find(\"Canvas/GameCore/\" + otherName).destroy();\r\n                    if (cc.find(ballName, this.redParent) != null) {\r\n                        cc.find(ballName, this.redParent).destroy();\r\n                    }\r\n                    this.blueCount -= 1;\r\n                    this.hitList.push(ballName);\r\n                }\r\n                else if (otherName.indexOf(\"virusRed\") > -1)//red hit red\r\n                {\r\n                    this.SoundMGR.playRebounce2();\r\n                    cc.find(\"Canvas/GameCore/\" + otherName).destroy();\r\n                    if (cc.find(ballName, this.redParent) != null) {\r\n                        cc.find(ballName, this.redParent).destroy();\r\n                    }\r\n                    this.redCount -= 1;\r\n                    this.hitList.push(ballName);\r\n                }\r\n            }\r\n            else if (ballName.indexOf(\"bBullet\") > -1 && this.hitList.indexOf(ballName) == -1) {\r\n                if (otherName.indexOf(\"virusBlue\") > -1)//blue hit blue\r\n                {\r\n                    this.SoundMGR.playRebounce2();\r\n                    cc.find(\"Canvas/GameCore/\" + otherName).destroy();\r\n                    if (cc.find(ballName, this.blueParent) != null) {\r\n                        cc.find(ballName, this.blueParent).destroy();\r\n                    }\r\n                    this.blueCount -= 1;\r\n                    this.hitList.push(ballName);\r\n                }\r\n                else if (otherName.indexOf(\"virusRed\") > -1)//red hit red\r\n                {\r\n                    this.SoundMGR.playScore();\r\n                    cc.find(\"Canvas/GameCore/\" + otherName).destroy();\r\n                    if (cc.find(ballName, this.blueParent) != null) {\r\n                        cc.find(ballName, this.blueParent).destroy();\r\n                    }\r\n                    this.redCount -= 1;\r\n                    this.hitList.push(ballName);\r\n                }\r\n            }\r\n\r\n            if (this.redCount == 0) {\r\n                this.GameStatus = 2;\r\n                this.SoundMGR.playOver();\r\n                this.scheduleOnce(function () {\r\n                    Global.GameData.CurrentWinner = 1;\r\n                    this.GameResultNode.active = true;\r\n                }, 1.5);\r\n            }\r\n            else if (this.blueCount == 0) {\r\n                this.GameStatus = 2;\r\n                this.SoundMGR.playOver();\r\n                this.scheduleOnce(function () {\r\n                    Global.GameData.CurrentWinner = 0;\r\n                    this.GameResultNode.active = true;\r\n                }, 1.5);\r\n            }\r\n        }\r\n    },\r\n});\r\n"]}